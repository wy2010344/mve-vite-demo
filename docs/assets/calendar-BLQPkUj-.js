import{c as te,k as ne,Y as g,b as d,l as se,W as re,o as T,F as ae,m as F,q as v,t as ie,s as O,f as i,u as M,j as oe,v as W,w as Y,x as p,D as V,y as C,z as q,A as le,a as L,B as y,C as ce,E,G as fe,H as j,I as me,J as de,K as ue,L as he,M as ge,N as ye}from"./index-DnGCQBT-.js";import{f as pe,a as D,h as xe,d as _e,S as X,W as ve,b as De}from"./demoList-PVtUdY_x.js";import{e as we}from"./explain-C8mUj14N.js";import{a as be}from"./onlyMobile-BqottMH7.js";import{m as A}from"./movePage-DpqS8Mge.js";import{f as Ne,a as Se}from"./themeDropdown-T3x6LpCY.js";import{f as ke}from"./chunk-LSEVNFON-G8OzWBoO.js";import"./animate.es-CuPzepd-.js";import"./iconBase-B4az98kw.js";const B="select-cell";function Pe(){we(()=>{}),be(function({width:u},x){x&&Ne(function(){pe(),Se()});const a=te(g.fromDate(new Date),ne),f=d(s=>{const e=a.get();return new se(e.year,e.month,D.get())}),_=d(()=>{const s=a.get();return re.from(s.year,s.month,s.day,D.get())}),G=window;G.__date=a;const c=T(0);let w;const b=ae.get();function m(){return u()/7}const h=d(()=>c.get()>=5*m()),I=T(0),z=F(()=>{const s=m(),e=s*5,n=ce(p(a.get()),D.get())-1;return q({0:0,[e]:-s*n},j)}),N=T(0);let $=a.get();v(()=>N.onAnimation(),function(s){s||($.equals(a.get())||ie(()=>{h()?c.changeTo(m()*5,O({config:{zta:.7,omega0:20}})):c.changeTo(0,O({config:{zta:.7,omega0:20}}))}),$=a.get())}),v(d(s=>{const e=f();if(s&&!h()){const n=Math.sign(e.toNumber()-s.toNumber());n&&S.changePage(n)}return e})),v(d(s=>{const e=_();if(s&&h()){const n=Math.sign(e.cells[0].toNumber()-s.cells[0].toNumber());n&&S.changePage(n)}return e}));function H(){return k.clientWidth}const S=A(I,H);xe(a.get,B);const J=F(()=>{const s=m()*5;return q({0:m()*7,[s]:m()*2},j)}),k=i.div({s_height:"100%",s_overflow:"hidden",s_userSelect:"none",onTouchMove(s){s.preventDefault()},onPointerDown:M(function(s,e){if(e=="y")return me.from(s,{getPage:de,scrollDelta(n){const t=c.get();c.set(t+ye(t,n,k.clientHeight,w.offsetHeight))},onFinish(n){const t=ue([{beforeForce:.005,size:m()*5,afterForce:.005}]);b.destinationWithMarginIscroll({scroll:c,velocity:n,containerSize:k.clientHeight,contentSize:w.offsetHeight,targetSnap:t,edgeBackConfig:he,edgeConfig(r){return ge(r,{nextVelocity(o){return o*.9}})}})}})}),children(){w=i.div({s_transform(){return`translateY(${-c.get()}px)`},className:"flex flex-col",s_minHeight(){return`calc(100% + ${u()}px * 5 / 7)`},children(){i.div({className:"bg-base-100 relative z-10",s_display:"flex",s_alignItems:"stretch",s_transform(){return`translateY(${Math.max(c.get(),0)}px)`},children(){i.h1({className:"text-display-large",childrenType:"text",children(){return a.get().month}}),i.div({className:"flex flex-col items-start justify-center",children(){i.div({className:"text-title-large",childrenType:"text",children(){return a.get().year}}),i.div({className:"text-title-medium",childrenType:"text",children(){return`月 ${a.get().day}日`}})}})}}),i.div({s_zIndex:1,s_position:"relative",s_height(){return m()*7+"px"},children(){i.div({className:"bg-base-300",s_overflow:"hidden",s_height(){const e=c.get();return J(e)+"px"},s_transform(){return`translateY(${Math.max(c.get(),0)}px)`},onPointerDown:M(function(e,n){if(n=="x")return S.pointerDown(e,b,t=>{if(h()){const r=p(a.get());r.setTime(r.getTime()+t*De),t&&a.set(g.fromDate(r))}else{const r=t<0?f().lastMonth():f().nextMonth();a.get().day>r.days?a.set(g.from(r.year,r.month,r.days)):a.set(g.from(r.year,r.month,a.get().day))}})}),children(){i.div({s_position:"relative",s_transform(){return`translateX(${-I.get()}px)`},children(){oe(h,function(){W(Y(()=>{const e=_();return[e.beforeWeek(),e,e.nextWeek()]},E),function(e,n){U(e,n)})},function(){W(Y(()=>{const e=f();return[e.lastMonth(),e,e.nextMonth()]},E),function(e,n){Q(e,n)})})}})}})}}),v(d(e=>{const n=a.get();if(e){const t=p(e).valueOf(),o=p(n).valueOf()-t;let l=0;o>=V?l=1:o<=-864e5&&(l=-1),l&&s.changePage(l)}return n}));const s=A(N,H);i.div({className:" flex-1",onPointerDown:M(function(e,n){if(n=="x")return s.pointerDown(e,b,t=>{const r=p(a.get());r.setTime(r.getTime()+t*V),t&&a.set(g.fromDate(r))})}),children(){i.div({className:"relative",s_transform(){return`translateX(${-N.get()}px)`},children(){W(Y(()=>{const e=a.get();return[e.beforeDay(),e,e.nextDay()]},E),function(e,n){C.div({attrs(t){const r=n();r!=1&&(t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(r-1)*100}%)`)},children(){_e(ke.number.int({max:17,min:15}))}})})}})}})}})}});function Q(s,e){function n(){const t=a.get(),r=s;return t.year==r.year&&t.month==r.month}return C.div({attrs(t){const r=e();if(r==1){const o=c.get();t.s_transform=` translateY(${z(o)}px)`}else t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(r-1)*100}%)`},children(){P(()=>{const t=c.get();return`translateY(${-z(t)}px)`}),i.div({children(){for(let t=0;t<6;t++)i.div({className:"flex items-center justify-center relative",children(){for(let r=0;r<7;r++){const o=s.fullDayOf(r,t);let l=s;o.type=="last"?l=s.lastMonth():o.type=="next"&&(l=s.nextMonth()),K(r,{year:l.year,month:l.month,day:o.day});const Z=X.fromYmd(l.year,l.month,o.day).getLunarDay(),ee=d(()=>o.type=="this"&&n()&&a.get().day==o.day);R({day:o.day,onClick(){a.set(g.from(l.year,l.month,o.day))},lunarDay:Z,selected:ee,hide(){return h()?!1:o.type!="this"}})}}})}})}})}function P(s){i.div({className:"bg-base-300 relative z-10",s_display:"flex",s_alignItems:"center",s_justifyContent:"space-between",s_transform:s,children(){for(let e=0;e<7;e++)i.div({className:"flex-1 aspect-square flex items-center justify-center",childrenType:"text",children(){return ve[f().weekDay(e)]}})}})}function U(s,e){C.div({attrs(n){n.className="self-start",e()!=1&&(n.s_position="absolute",n.s_inset=0,n.s_transform=`translateX(${(e()-1)*100}%)`)},children(){P(),i.div({className:"flex items-center justify-center relative",children(){for(let n=0;n<7;n++){const t=s.cells[n];K(n,t);const o=X.fromYmd(t.year,t.month,t.day).getLunarDay();R({hide(){return!1},day:t.day,lunarDay:o,selected(){return fe(t,a.get())},onClick(){a.set(t)}})}}})}})}})}function K(u,x){u==0&&i.div({className:"absolute left-0 text-label-small",childrenType:"text",children(){return le(p(x),D.get())}})}function R({day:u,lunarDay:x,hide:a,selected:f,onClick:_}){i.div({s_flex:1,s_aspectRatio:1,s_display:"flex",s_flexDirection:"column",s_alignItems:"center",s_justifyContent:"center",className(){return a()?y` opacity-30`:""},onClick:_,children(){i.div({s_aspectRatio:1,s_display:"grid",s_placeItems:"center",s_position:"relative",children(){i.div({id(){return f()?B:""},className(){return L(y`absolute inset-0  rounded-full z-0`,f()&&y`bg-primary`)}}),i.span({s_position:"relative",className(){return L(f()?y`text-primary-content`:y`text-base-content`,y`transition-all`)},childrenType:"text",children:u})}}),i.div({s_fontSize:"10px",childrenType:"text",className:"text-neutral-500",children:x.getName()})}})}export{Pe as default};
