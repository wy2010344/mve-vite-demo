import{aB as F,c as d,m as N,e as l,ap as T,av as g,i as b,I as h,aq as w,o as A,a as m,u as x,v as L}from"./index-BdTCZeBf.js";import{m as M,c as P,e as K,d as q,i as B,f as C,a as E,t as I}from"./forceLayout-B4nbHEBX.js";import{r as z}from"./onlyMobile-BPvrjsyr.js";function _(){z(function({width:a,height:o}){const f=F(()=>{const e=Array.from({length:400},(r,n)=>({index:n})),s=[];for(let r=0;r<20;++r)for(let n=0;n<20;++n)r>0&&s.push({source:(r-1)*20+n,target:r*20+n}),n>0&&s.push({source:r*20+(n-1),target:r*20+n});return{nodes:e,links:s}}),k=d(f.nodes),p=d(f.links),y=d(void 0),i=N(t=>M({nodes:(t==null?void 0:t.nodes)||l,links:(t==null?void 0:t.links)||l,fromLinks:p.get(),fromNodes:k.get(),createForceNode(e,s,r){return P(e,2,s,q,K)},getNodeKey(e){return e.index},getSorceKey(e){return e.source},getTargetKey(e){return e.target},createFromKey(e){return{index:e}}})),c=T(B()),S=C({getStrength:g(1),getDistance:g(20),iterations:10}),v=E({getStrenth:g(-30)}),u=2;function D(){const t=i();I(u,c,t.nodes,e=>{S(t.links,u,e),v(t.nodes,u,e)})}b(h(()=>{D(),w()})),A({className:"touch-none",width:a,height:o},function({canvas:t}){m(()=>i().links,e=>{x({x(){return e.source.x.dSignal.get()+a()/2},y(){return e.source.y.dSignal.get()+o()/2},withPath:!0,draw(s,r){return r.moveTo(0,0),r.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),{operates:[{type:"stroke",style:"#aaa",width:1}]}}})}),m(()=>i().nodes,e=>{x({x(){return e.x.dSignal.get()+a()/2},y(){return e.y.dSignal.get()+o()/2},onPointerDown(s){c.alphaTarget=.3,y.set(e),L({onMove(r){e.x.f=r.offsetX-a()/2,e.y.f=r.offsetY-o()/2},onEnd(r){c.alphaTarget=0,e.x.f=void 0,e.y.f=void 0,y.set(void 0)}},t)},withPath:!0,draw(s,r){return r.arc(0,0,6,0,2*Math.PI),{operates:[{type:"fill",style:"#000"},{type:"draw",callback(n){n.fillText(e.value.index+"",3,-3)}}]}}})})},{beforeDraw(t){}})})}export{_ as default};
