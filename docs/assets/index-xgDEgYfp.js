import{c,d as B,a as w,g as C,f as _,s as b,i as g}from"./index-CnmbM-dR.js";import{createBalls as d,updateBallPhysics as P}from"./physics-CqDVWtuV.js";import{renderControlPanel as S}from"./ControlPanel-B53e_lFn.js";import{renderPhysicsWorld as k}from"./PhysicsWorld-CJlU80nP.js";import{renderInfoPanel as F}from"./InfoPanel-CgC3UXxN.js";import{renderDynamicTextButton as T}from"./DynamicText-Dh_kVTay.js";function G(){const a=c(!1),i=c(!0),r=c(8),l=c(.2),e=c(d(r.get()));function f(){const t=document.querySelector("[data-physics-container]");if(!t||!a.get())return;const s={gravity:l.get(),bounce:.8,containerWidth:t.offsetWidth,containerHeight:t.offsetHeight};g(()=>{const n=P(e.get(),s,i.get());e.set(n)})}B(a.get,function(t){if(t)return C(f)});function h(){a.set(!1),e.set(d(r.get()))}function p(){i.set(!i.get())}function m(){const t=r.get()>=12?4:r.get()+2;r.set(t),e.set(d(t))}function x(){g(()=>{const t=l.get()>=.5?.1:l.get()+.1;l.set(Math.round(t*10)/10)})}function y(t){g(()=>{const s=e.get().map(n=>({...n,selected:n.id===t?!n.selected:!1}));e.set(s)})}function v(){return e.get().find(t=>t.selected)}return w({width:800,height:600,layout(){return b({direction:"y",alignItems:"stretch",alignFix:!0,gap:0})},render(t){return _.div({s_width:()=>t.axis.x.size()+"px",s_height:()=>t.axis.y.size()+"px",s_position:"relative",s_background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",s_borderRadius:"12px",s_boxShadow:"0 10px 30px rgba(0,0,0,0.3)",s_overflow:"hidden",children(){S(a.get,i.get,r.get,l.get,function(){a.set(!a.get())},h,p,m,x),k(e.get,i.get,y),F(v),T(()=>{const s=e.get().length,n=e.get().filter(o=>o.selected).length;return`${a.get()?"运行中":"已暂停"} | 小球: ${s} | 选中: ${n}`},()=>{const s=e.get(),n=s.reduce((u,o)=>u+Math.sqrt(o.vx*o.vx+o.vy*o.vy),0)/s.length;alert(`平均速度: ${n.toFixed(2)}`)})}})}})}export{G as default};
