import{c as h,f as e,a8 as w,n as D,ak as k,v as b}from"./index-SfgOm-p3.js";import{panel as _}from"./WindowManager-CNIQp0k9.js";import"./index-BBmTqfCf.js";import"./index-PeN622_I.js";import"./canvasRender-DwJvwbpB-BWU3cVJm.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-DFXa7QPV.js";import"./iconBase-BQ1OgeWz.js";import"./index-BxY9dVzG.js";const C=[{id:1,title:"è®¾è®¡æ•°æ®åº“è¡¨ç»“æž„",description:"è®¾è®¡ç”¨æˆ·ã€è®¢å•ã€å•†å“è¡¨",status:"todo",priority:"high"},{id:2,title:"å®žçŽ°ç”¨æˆ·ç™»å½•åŠŸèƒ½",description:"JWT + Redis",status:"todo",priority:"high"},{id:3,title:"å¼€å‘å•†å“åˆ—è¡¨é¡µ",description:"æ”¯æŒç­›é€‰å’ŒæŽ’åº",status:"doing",priority:"medium"},{id:4,title:"ä¼˜åŒ–é¦–é¡µåŠ è½½é€Ÿåº¦",description:"å›¾ç‰‡æ‡’åŠ è½½ã€ä»£ç åˆ†å‰²",status:"doing",priority:"medium"},{id:5,title:"ä¿®å¤æ”¯ä»˜å›žè°ƒbug",description:"å¤„ç†å¼‚æ­¥é€šçŸ¥",status:"done",priority:"high"},{id:6,title:"ç¼–å†™å•å…ƒæµ‹è¯•",description:"è¦†ç›–çŽ‡è¾¾åˆ°80%",status:"done",priority:"low"}],I={low:"bg-gray-100 text-gray-600",medium:"bg-yellow-100 text-yellow-700",high:"bg-red-100 text-red-700"},v={todo:"å¾…åŠž",doing:"è¿›è¡Œä¸­",done:"å·²å®Œæˆ"},J=_(function(t){return{title:"ä»»åŠ¡çœ‹æ¿",icon:"ðŸ“‹",width:1e3,height:700,children(){const d=h(C),s=h(null),r=h(null),c=h(-1);function g(n){return d.get().filter(i=>i.status===n)}function l(n){s.set(n)}function f(){s.set(null),r.set(null),c.set(-1)}function o(n,i,m){const a=d.get(),x=a.findIndex(p=>p.id===n);if(x===-1)return;const N={...a[x],status:i},u=a.filter(p=>p.id!==n),y=u.filter(p=>p.status===i),T=u.filter(p=>p.status!==i);y.splice(m,0,N),d.set([...y,...T])}e.div({className:"w-full h-full flex flex-col bg-gradient-to-br from-blue-50 to-purple-50",children(){e.div({className:"h-16 bg-white border-b border-gray-200 flex items-center px-6",children(){e.h2({className:"text-xl font-bold text-gray-800",childrenType:"text",children:"é¡¹ç›®ä»»åŠ¡çœ‹æ¿"}),e.div({className:"flex-1"}),e.div({className:"flex gap-4 text-sm",children(){["todo","doing","done"].forEach(n=>{const i=g(n).length;e.div({className:"flex items-center gap-2",children(){e.span({className:"text-gray-600",childrenType:"text",children:v[n]}),e.span({className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full font-semibold",childrenType:"text",children:`${i}`})}})})}})}}),e.div({className:"flex-1 flex gap-4 p-6 overflow-x-auto",children(){["todo","doing","done"].forEach(n=>{L(n,{tasks:d,draggingTask:s,dragOverStatus:r,dragOverIndex:c,startDrag:l,endDrag:f,moveTask:o,getTasksByStatus:g})})}})}})}}});function L(t,{tasks:d,draggingTask:s,dragOverStatus:r,dragOverIndex:c,startDrag:g,endDrag:l,moveTask:f,getTasksByStatus:o}){const n={todo:"bg-gray-100",doing:"bg-blue-100",done:"bg-green-100"};e.div({className:"flex-1 min-w-[300px] flex flex-col",children(){e.div({className:`${n[t]} rounded-t-lg px-4 py-3 font-semibold text-gray-700`,children(){e.div({className:"flex items-center justify-between",children(){e.span({childrenType:"text",children:v[t]}),e.span({className:"text-sm",childrenType:"text",children(){return`${o(t).length}`}})}})}}),e.div({className:"flex-1 bg-white rounded-b-lg p-3 space-y-3 min-h-[400px]",s_backgroundColor(){return r.get()===t?"#f0f9ff":"#ffffff"},s_transition:"background-color 0.2s",onDragOver(i){i.preventDefault(),r.set(t)},onDragLeave(){r.get()===t&&r.set(null)},onDrop(i){i.preventDefault();const m=s.get();if(m){const a=c.get();f(m.id,t,a>=0?a:o(t).length)}l()},children(){const i=o(t);i.length===0&&e.div({className:"flex flex-col items-center justify-center h-full text-gray-400",children(){e.div({className:"text-4xl mb-2",childrenType:"text",children:"ðŸ“­"}),e.div({className:"text-sm",childrenType:"text",children:"æš‚æ— ä»»åŠ¡"})}}),i.forEach((m,a)=>{$(m,a,{draggingTask:s,dragOverIndex:c,startDrag:g,endDrag:l})})}})}})}function $(t,d,{draggingTask:s,dragOverIndex:r,startDrag:c,endDrag:g}){const l=w(1),f=()=>s.get()?.id===t.id;e.div({draggable:!0,className:"bg-white border border-gray-200 rounded-lg p-3 cursor-move hover:shadow-md transition-shadow",s_opacity(){return f()?.5:1},s_transform(){return`scale(${l.get()})`},s_transition:"opacity 0.2s, transform 0.2s",onDragStart(o){c(t),l.animateTo(1.05,k(200,b.out(b.back())))},onDragEnd(){g(),l.animateTo(1,D())},onDragOver(o){o.preventDefault(),o.stopPropagation(),r.set(d)},children(){e.div({className:"flex items-center justify-between mb-2",children(){e.span({className:`text-xs px-2 py-0.5 rounded ${I[t.priority]}`,childrenType:"text",children:t.priority.toUpperCase()}),e.span({className:"text-xs text-gray-400",childrenType:"text",children:`#${t.id}`})}}),e.h3({className:"font-semibold text-gray-900 mb-2",childrenType:"text",children:t.title}),e.p({className:"text-sm text-gray-700",childrenType:"text",children:t.description})}})}export{J as DragDropApp};
