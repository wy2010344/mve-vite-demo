import{a4 as M,S as w,F as B,i as N,a5 as T,a6 as A,u as m,a as R,a7 as G,b as F,a8 as x,a9 as P,aa as k,ab as p,c as O,d as b,I as W,A as _,Q as g,ac as z,C as H,m as L,ad as Q,ae as U,af as X}from"./index-BnPd4ZD8.js";import"./canvasRender-hz9keZru.js";const Y=function(){var t={type:"FF",version:0,documentMode:""};if(!globalThis.navigator)return t;var e=navigator.userAgent,n=e.indexOf("Opera")>-1,i=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!n,a=e.indexOf("Firefox")>-1,r=e.indexOf("Safari")>-1;if(i){var l=new RegExp("MSIE (\\d+\\.\\d+);");l.test(e),t.type="IE",t.version=parseFloat(RegExp.$1),t.documentMode=document.documentMode}return a&&(t.type="FF"),n&&(t.type="Opera"),r&&(t.type="Safari"),t}(),le=Y.type=="FF"?!0:"plaintext-only";var $=Object.defineProperty,q=(t,e,n)=>e in t?$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e,n)=>q(t,typeof e!="symbol"?e+"":e,n);function J(t,e){const n=document.createElement(t);return n.style.position="absolute",n.style.minWidth="0px",te(n,e,!1)}P(k,t=>function(e){return J(t,e)});function v(t){return function(e){return function(){const n=e();try{return n.getInfo(t)}catch{try{return n.parent.getChildInfo(t,n.index())}catch{return n.getInfo(t,!0)}}}}}const K=v("x"),Z=v("y"),j=v("width"),ee=v("height");function te(t,e,n){let i,a,r,l;function u(){return s}const f=p(e.x,u,K),h=p(e.y,u,Z);if(e.width=="auto"){const o=O(0);r=o.get,i=o.set}else r=p(e.width,u,j);if(e.height=="auto"){const o=O(0);l=o.get,a=o.set}else l=p(e.height,u,ee);const c=w();(i||a)&&b(()=>{const o=()=>{i==null||i(t.clientWidth),a==null||a(t.clientHeight),m()};o();const d=new ResizeObserver(o);d.observe(t),c(()=>{d.disconnect()})},-2);const s=new re(t,f,h,r,l,n,e);return G(s),!e.childrenType&&e.children?s.children=ie(e.children,s.target,s):s.children=W(_),b(()=>{c(g(s.x,o=>s.target.style.left=o+"px")),c(g(s.y,o=>s.target.style.top=o+"px")),i||c(g(s.width,o=>s.target.style.width=o+"px")),a||c(g(s.height,o=>s.target.style.height=o+"px"))},-1),b(()=>{function o(d,I,E){const S=arguments[3];typeof I=="function"?c(g(()=>I(s),E,d,S)):E(I,d,S)}z(t,e,o,H,_)}),s}function ne(t){return t.target}class re{constructor(e,n,i,a,r,l,u){y(this,"display"),y(this,"children"),y(this,"parent"),y(this,"__index"),this.target=e,this.x=n,this.y=i,this.width=a,this.height=r,this.isSVG=l,this.configure=u;const f=x(u.m_display||ae);this.display=L(()=>Q(this,f))}getExt(){return this.configure}index(){return this.parent.children(),this.__index}getChildInfo(e,n){return this.display().getChildInfo(e,n)}getInfo(e,n){return this.display().getInfo(e,n)}}function ie(t,e,n){const i=U(t,n,a=>{a.forEach((r,l)=>{r.__index=l,r.parent&&r.parent!=n&&console.log("parent发生改变",r.parent,n),r.parent=n})});return F(i,X(e,ne)),i}const ae={getChildInfo(t,e){throw""},getInfo(t,e){if(e)return 0;if(t=="x"||t=="y")throw"";return 0}};function V(t,e,n,i){const a=x(t);F(()=>{i();const r=a();r!=e[n]&&(e[n]=r)})}function D(t="onInput",e,n="",i,a,r){const[l,u]=T(),f=x(t),h=e.onInput;e.onInput=o=>{if(f()=="onInput"){const d=s[r]||"";u(),i(d),h==null||h(o),m()}else h==null||h(o)};const c=e.onBlur;e.onBlur=o=>{if(f()=="onBlur"){const d=s[r]||"";u(),i(d),m()}else c==null||c(o)};const s=a(e);return V(n,s,r,l),s}function ue(t,{value:e,onValueChange:n,triggerTime:i,...a}){return D(i,a,e,n,r=>A(t,r),"value")}function ce(t,e){const{value:n,onValueChange:i,triggerTime:a,...r}=e;return D(a,r,n,i,l=>A(t,l),"textContent")}function de({checked:t,onInput:e,...n}){const i=x(t),[a,r]=T(),l=A("input",{...n,onInput(u){r(),e==null||e(u),m()}});return V(i,l,"checked",a),l}function fe(t,e){B(t,(n,i)=>{let a;N(()=>{const r=n.step();return r=="exiting"||r=="will-exiting"},()=>{var r;"node"in a?C(a,n):((r=a.call)==null||r.call(a),a.list.forEach(l=>{C(l,n)}))},()=>{a=e(n,i)})})}function C(t,e){const n=t.node.cloneNode(!0);G(n);const i=t.applyAnimate;F(e.step,a=>{a=="exiting"&&i(n)})}function he(t,e){const[n,i]=M(R,t,e);return w()(i),n}export{ce as a,de as b,le as c,fe as d,he as e,ue as r};
