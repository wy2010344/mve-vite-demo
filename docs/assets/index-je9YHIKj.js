import{c as l,f as g,l as h,o as x,ae as v,a8 as d,a1 as D}from"./index-SfgOm-p3.js";import{g as m,s as b,k as w}from"./index-PeN622_I.js";import{a as y}from"./index-BxY9dVzG.js";import"./canvasRender-DwJvwbpB-BWU3cVJm.js";import"./_commonjsHelpers-CqkleIqs.js";const c=l(void 0),{createListContainer:N}=b({getDragData:c.get,setDragData:c.set,changeIndexAnimate(e,t,n){y(e,{[t]:[n,0]})},onDragFinish(e,t){if(t&&t.accept=="move"){const n=e.targetPlaceholder;if(!n)throw"no preview placeholder";const a=e.from.get().filter(o=>o!=e.id);if(e.from!=n.list)n.list.set(n.list.get().toSpliced(n.index(),0,e.id));else{const o=n.beforeId();if(o){const f=a.indexOf(o);a.splice(f,0,e.id)}else a.push(e.id)}e.from.set(a)}e.onDropEnd.set(!0),D()}});function P(){const e=l([0,1,2,l([3,4,5,6])]);g.div({className:"w-full h-full",children(){p(e),h(c.get,t=>{t&&p(t.id,{className:"pointer-events-none opacity-90 fixed",s_position:"fixed",s_width:`${t.width}px`,s_height:`${t.height}px`,s_top(){return`${t.dragY.get()-t.y}px`},s_transformOrigin(){return`${t.x}px ${t.y}px`}})})}})}function p(e,t,n){if(typeof e=="number")return g.div({...t,onPointerDown:n,className:m("h-10 bg-blue-300",t?.className),children:e});{const a=x(()=>e.get().filter(r=>{const i=c.get();return!(i&&r==i.id&&!i.onDropEnd.get())})),{plugin:o,renderChildren:f}=N({accept(r){return"move"},direction:"y",getList:a,getId:v,createDragData(r,i,s){return{...w(r,s),startEvent:r,id:i,activeContainer:l(null),dragX:d(0),dragY:d(0),onDropEnd:l(!1),from:e}},preview(r,i){const s=p(i.id,{s_opacity:0,s_backgroundColor:"yellow"});i.targetPlaceholder={index:r,element:s,list:e,beforeId(){return a()[r()]}}}});return g.div({...t,plugin(r){o(r),t?.plugin?.(r)},className:m("flex flex-col gap-1 items-stretch p-4 relative border-green-700 border-2",t?.className),children(r){g.div({onPointerDown(i){n?.(i,r)},className:"h-5 bg-gray-300"}),f(function({key:i,plugin:s,onPointerDown:u}){p(i,{plugin:s,className(){return c.get()?.id==i?"opacity-0 pointer-events-none":""}},u)})}})}}export{P as default};
