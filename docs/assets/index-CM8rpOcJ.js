import{aV as u,z as v,c as D,aW as w,f as y,aU as k,aS as m,w as C,o as _,aX as $,aY as b,av as E,N as I,aO as S}from"./index-B26XVUiJ.js";import O from"./column-CLH0kVl3.js";import{taskContext as F}from"./context-DHjCgBjc.js";import N from"./cardBase-DjfqXltp.js";import{a as T}from"./index-BxY9dVzG.js";import"./columnBase-DXKptada.js";import"./type-DRAuYFMP.js";import"./chunk-KZPPZA2C-rvBpA5M9.js";import"./xmlRender-7hBnQ1Gi.js";import"./index-C50M3ZaI.js";import"./iconBase-DrttcOin.js";import"./mve-icon-uLXJ-ds6.js";function q({tasks:g,columns:l}){const n=u(g),a=D(void 0),i=v(()=>{const e=a.get();if(e)return n.get().find(r=>r.id==e.id)}),{getAccept:f,createListContainer:h}=w({getDragData:a.get,setDragData:a.set,changeIndexAnimate(e,r,s){T(e,{[r]:[s,0]})},onDragFinish(e,r){if(r&&(r.accept="move")){const s=i(),p=e.targetPlaceholder;if(!p)throw"";const c=p.getBeforeId(),x=n.set(function(t){t=[...t];const d={...s,type:p.type};if(b(t,o=>o.id==e.id),c){for(let o=0;o<t.length;o++)if(t[o].id==c){t.splice(o,0,d);break}}else t.push(d);return t});setTimeout(()=>{x.commit()},10*1e3)}e.onDropEnd.set(!0),E()}});F.provide({tasks:n,dragData:a,dragTask:i,createListContainer:h,getAccept:f}),y.div({plugin(e){$(e,{shouldMeasure:a.get,direction:"x"})},className:"flex gap-6 overflow-x-auto overflow-y-hidden pb-6 flex-1 relative",children(){l.map(e=>{k(()=>{m.renderChild(O(e))})}),C(a.get,e=>{e&&_(i,function(){m.renderChild(m.createElement(N,{selected:S,onDelete:I,getTask:i,className:"pointer-events-none opacity-90 fixed",s_zIndex:1e3,s_width:`${e.width}px`,s_height:`${e.height}px`,s_top:()=>`${e.dragY.get()-e.y}px`,s_left:()=>`${e.dragX.get()-e.x}px`,s_transformOrigin:`${e.x}px ${e.y}px`,s_rotate:()=>a.get()?.onDropEnd.get()?"0deg":"-15deg"}))})})}})}export{q as default};
