import{c,h as B,a as b,f as w,s as C,b as g}from"./index-SfgOm-p3.js";import{a as _}from"./index-PeN622_I.js";import{createBalls as d,updateBallPhysics as P}from"./physics-BZbKS0Hf.js";import{renderControlPanel as S}from"./ControlPanel-CIUkpj-E.js";import{renderPhysicsWorld as $}from"./PhysicsWorld-BKT6Z3DY.js";import{renderInfoPanel as k}from"./InfoPanel-BY5l-dxA.js";import{renderDynamicTextButton as F}from"./DynamicText-CmNYtglo.js";import"./canvasRender-DwJvwbpB-BWU3cVJm.js";import"./_commonjsHelpers-CqkleIqs.js";function M(){const a=c(!1),i=c(!0),r=c(8),l=c(.2),e=c(d(r.get()));function f(){const t=document.querySelector("[data-physics-container]");if(!t||!a.get())return;const s={gravity:l.get(),bounce:.8,containerWidth:t.offsetWidth,containerHeight:t.offsetHeight};g(()=>{const n=P(e.get(),s,i.get());e.set(n)})}B(a.get,function(t){if(t)return b(f)});function h(){a.set(!1),e.set(d(r.get()))}function p(){i.set(!i.get())}function m(){const t=r.get()>=12?4:r.get()+2;r.set(t),e.set(d(t))}function x(){g(()=>{const t=l.get()>=.5?.1:l.get()+.1;l.set(Math.round(t*10)/10)})}function y(t){g(()=>{const s=e.get().map(n=>({...n,selected:n.id===t?!n.selected:!1}));e.set(s)})}function v(){return e.get().find(t=>t.selected)}return _({width:800,height:600,layout(){return C({direction:"y",alignItems:"stretch",alignFix:!0,gap:0})},render(t){return w.div({s_width:()=>`${t.axis.x.size()}px`,s_height:()=>`${t.axis.y.size()}px`,s_position:"relative",s_background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",s_borderRadius:"12px",s_boxShadow:"0 10px 30px rgba(0,0,0,0.3)",s_overflow:"hidden",children(){S(a.get,i.get,r.get,l.get,function(){a.set(!a.get())},h,p,m,x),$(e.get,i.get,y),k(v),F(()=>{const s=e.get().length,n=e.get().filter(o=>o.selected).length;return`${a.get()?"运行中":"已暂停"} | 小球: ${s} | 选中: ${n}`},()=>{const s=e.get(),n=s.reduce((u,o)=>u+Math.sqrt(o.vx*o.vx+o.vy*o.vy),0)/s.length;alert(`平均速度: ${n.toFixed(2)}`)})}})}})}export{M as default};
