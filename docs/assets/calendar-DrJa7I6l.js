import{c as ne,z as ae,Y as h,q as d,A as se,W as re,B as k,F as ie,o as H,D as v,E as oe,y as V,G as I,g as i,H as T,x as le,b as M,I as C,J as p,K as O,L as W,M as X,N as ce,l as q,O as y,P as fe,Q as Y,R as me,T as L,U as j,V as de,X as ge,Z as ue,_ as he,C as A,$ as ye,a0 as pe}from"./index-C09L67qZ.js";import{f as xe,a as D,h as _e,d as ve,S as R,W as De,b as we}from"./demoList-B3w_mpvn.js";import{e as be}from"./explain-B-rFNxaP.js";import{a as Ne}from"./onlyMobile-Dkk4_pv8.js";import{f as Se,a as ke}from"./themeDropdown-BHGctfIZ.js";import{f as Te}from"./chunk-LSEVNFON-G8OzWBoO.js";import"./index-cHHGad51.js";import"./iconBase-CiSp5Y-1.js";import"./index-BDV14NvS.js";const B="select-cell";function Ve(){be(()=>{}),Ne(function({width:g},x){x&&Se(function(){xe(),ke()});const r=ne(h.fromDate(new Date),ae),f=d(a=>{const e=r.get();return new se(e.year,e.month,D.get())}),_=d(()=>{const a=r.get();return re.from(a.year,a.month,a.day,D.get())}),J=window;J.__date=r;const c=k(0);let w;ie.get();function m(){return g()/7}const u=d(()=>c.get()>=5*m()),P=k(0),E=H(()=>{const a=m(),e=a*5,n=fe(p(r.get()),D.get())-1;return X({0:0,[e]:-a*n},L)}),b=k(0);let $=r.get();v(()=>b.onAnimation(),function(a){a||($.equals(r.get())||oe(()=>{u()?c.changeTo(m()*5,V({config:{zta:.7,omega0:20}})):c.changeTo(0,V({config:{zta:.7,omega0:20}}))}),$=r.get())}),v(d(a=>{const e=f();if(a&&!u()){const n=Math.sign(e.toNumber()-a.toNumber());n&&N.changePage(n)}return e})),v(d(a=>{const e=_();if(a&&u()){const n=Math.sign(e.cells[0].toNumber()-a.cells[0].toNumber());n&&N.changePage(n)}return e}));function z(){return S.clientWidth}const N=I(P,z);_e(r.get,B);const Q=H(()=>{const a=m()*5;return X({0:m()*7,[a]:m()*2},L)}),S=i.div({s_height:"100%",s_overflow:"hidden",s_userSelect:"none",onTouchMove(a){a.preventDefault()},onPointerDown:T(function(a,e){if(e=="y")return de.from(a,{getPage:ge,scrollDelta(n){const t=c.get();c.set(t+pe(t,n,S.clientHeight,w.offsetHeight))},onFinish(n){const t=ue([{beforeForce:.005,size:m()*5,afterForce:.005}]);he({scroll:c,frictional:A.get().getFromVelocity(n),containerSize:S.clientHeight,contentSize:w.offsetHeight,targetSnap:t,edgeBackConfig:ye,edgeConfig(o){return A.get(100).getFromVelocity(o).animationConfig()}})}})}),children(){w=i.div({s_transform(){return`translateY(${-c.get()}px)`},className:"flex flex-col",s_minHeight(){return`calc(100% + ${g()}px * 5 / 7)`},children(){i.div({className:"bg-base-100 relative z-10",s_display:"flex",s_alignItems:"stretch",s_transform(){return`translateY(${Math.max(c.get(),0)}px)`},children(){i.h1({className:"text-display-large",childrenType:"text",children(){return r.get().month}}),i.div({className:"flex flex-col items-start justify-center",children(){i.div({className:"text-title-large",childrenType:"text",children(){return r.get().year}}),i.div({className:"text-title-medium",childrenType:"text",children(){return`月 ${r.get().day}日`}})}})}}),i.div({s_zIndex:1,s_position:"relative",s_height(){return m()*7+"px"},children(){i.div({className:"bg-base-300",s_overflow:"hidden",s_height(){const e=c.get();return Q(e)+"px"},s_transform(){return`translateY(${Math.max(c.get(),0)}px)`},onPointerDown:T(function(e,n){if(n=="x")return N.pointerDown(e,{getPage:j,callback(t,o){if(u()){const s=p(r.get());s.setTime(s.getTime()+t*we),t&&r.set(h.fromDate(s))}else{const s=t<0?f().lastMonth():f().nextMonth();r.get().day>s.days?r.set(h.from(s.year,s.month,s.days)):r.set(h.from(s.year,s.month,r.get().day))}}})}),children(){i.div({s_position:"relative",s_transform(){return`translateX(${-P.get()}px)`},children(){le(u,function(){M(C(()=>{const e=_();return[e.beforeWeek(),e,e.nextWeek()]},Y),function(e,n){Z(e,n)})},function(){M(C(()=>{const e=f();return[e.lastMonth(),e,e.nextMonth()]},Y),function(e,n){U(e,n)})})}})}})}}),v(d(e=>{const n=r.get();if(e){const t=p(e).valueOf(),s=p(n).valueOf()-t;let l=0;s>=O?l=1:s<=-864e5&&(l=-1),l&&a.changePage(l)}return n}));const a=I(b,z);i.div({className:" flex-1",onPointerDown:T(function(e,n){if(n=="x")return a.pointerDown(e,{getPage:j,callback(t,o){const s=p(r.get());s.setTime(s.getTime()+t*O),t&&r.set(h.fromDate(s))}})}),children(){i.div({className:"relative",s_transform(){return`translateX(${-b.get()}px)`},children(){M(C(()=>{const e=r.get();return[e.beforeDay(),e,e.nextDay()]},Y),function(e,n){W.div({attrs(t){const o=n();o!=1&&(t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(o-1)*100}%)`)},children(){ve(Te.number.int({max:17,min:15}))}})})}})}})}})}});function U(a,e){function n(){const t=r.get(),o=a;return t.year==o.year&&t.month==o.month}return W.div({attrs(t){const o=e();if(o==1){const s=c.get();t.s_transform=` translateY(${E(s)}px)`}else t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(o-1)*100}%)`},children(){F(()=>{const t=c.get();return`translateY(${-E(t)}px)`}),i.div({children(){for(let t=0;t<6;t++)i.div({className:"flex items-center justify-center relative",children(){for(let o=0;o<7;o++){const s=a.fullDayOf(o,t);let l=a;s.type=="last"?l=a.lastMonth():s.type=="next"&&(l=a.nextMonth()),G(o,{year:l.year,month:l.month,day:s.day});const ee=R.fromYmd(l.year,l.month,s.day).getLunarDay(),te=d(()=>s.type=="this"&&n()&&r.get().day==s.day);K({day:s.day,onClick(){r.set(h.from(l.year,l.month,s.day))},lunarDay:ee,selected:te,hide(){return u()?!1:s.type!="this"}})}}})}})}})}function F(a){i.div({className:"bg-base-300 relative z-10",s_display:"flex",s_alignItems:"center",s_justifyContent:"space-between",s_transform:a,children(){for(let e=0;e<7;e++)i.div({className:"flex-1 aspect-square flex items-center justify-center",childrenType:"text",children(){return De[f().weekDay(e)]}})}})}function Z(a,e){W.div({attrs(n){n.className="self-start",e()!=1&&(n.s_position="absolute",n.s_inset=0,n.s_transform=`translateX(${(e()-1)*100}%)`)},children(){F(),i.div({className:"flex items-center justify-center relative",children(){for(let n=0;n<7;n++){const t=a.cells[n];G(n,t);const s=R.fromYmd(t.year,t.month,t.day).getLunarDay();K({hide(){return!1},day:t.day,lunarDay:s,selected(){return me(t,r.get())},onClick(){r.set(t)}})}}})}})}})}function G(g,x){g==0&&i.div({className:"absolute left-0 text-label-small",childrenType:"text",children(){return ce(p(x),D.get())}})}function K({day:g,lunarDay:x,hide:r,selected:f,onClick:_}){i.div({s_flex:1,s_aspectRatio:1,s_display:"flex",s_flexDirection:"column",s_alignItems:"center",s_justifyContent:"center",className(){return r()?y` opacity-30`:""},onClick:_,children(){i.div({s_aspectRatio:1,s_display:"grid",s_placeItems:"center",s_position:"relative",children(){i.div({id(){return f()?B:""},className(){return q(y`absolute inset-0  rounded-full z-0`,f()&&y`bg-primary`)}}),i.span({s_position:"relative",className(){return q(f()?y`text-primary-content`:y`text-base-content`,y`transition-all`)},childrenType:"text",children:g})}}),i.div({s_fontSize:"10px",childrenType:"text",className:"text-neutral-500",children:x.getName()})}})}export{Ve as default};
