import{c as H,N as R,o as I,q as k,O as W,f as Z}from"./index-DvMfoO23.js";import{a as A,b as N,s as y,c as $,d as G,r as P}from"./canvasRender-BoWEpDho.js";import{f as C}from"./chunk-LSEVNFON-G8OzWBoO.js";function B(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var F={exports:{}},z={exports:{}},j=z.exports,X;function K(){return X||(X=1,function(l){var g=Date.now||function(){return+new Date},w=60,D=1e3,p={},h=1,v={effect:{}};v.effect.Animate={requestAnimationFrame:function(){var r=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame,e=!!r;if(r&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(r.toString())&&(e=!1),e)return function(s,a){r(s,a)};var n=60,t={},i=1,o=null,f=+new Date;return function(s,a){var c=i++;return t[c]=s,o===null&&(o=setInterval(function(){var _=+new Date,u=t;t={};for(var d in u)u.hasOwnProperty(d)&&(u[d](_),f=_);_-f>2500&&(clearInterval(o),o=null)},1e3/n)),c}}(),stop:function(r){var e=p[r]!=null;return e&&(p[r]=null),e},isRunning:function(r){return p[r]!=null},start:function(r,e,n,t,i,o){var f=g(),s=f,a=0,c=0,_=h++;if(o||(o=document.body),_%20===0){var u={};for(var d in p)u[d]=!0;p=u}var x=function(L){var m=L!==!0,T=g();if(!p[_]||e&&!e(_)){p[_]=null,n&&n(w-c/((T-f)/D),_,!1);return}if(m)for(var S=Math.round((T-s)/(D/w))-1,M=0;M<Math.min(S,4);M++)x(!0),c++;t&&(a=(T-f)/t,a>1&&(a=1));var b=i?i(a):a;(r(b,T,m)===!1||a===1)&&m?(p[_]=null,n&&n(w-c/((T-f)/D),_,a===1||t==null)):m&&(s=T,v.effect.Animate.requestAnimationFrame(x,o))};return p[_]=!0,v.effect.Animate.requestAnimationFrame(x,o),_}},z.exports=v}(typeof window<"u"?window:j)),z.exports}var q;function U(){if(q)return F.exports;q=1;var l=K(),g;return function(){var w=function(){};g=function(r,e){this.__callback=r,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:w,decelerationRate:.95,penetrationDeceleration:.03,penetrationAcceleration:.08};for(var n in e)this.options[n]=e[n]};var D=function(r){return Math.pow(r-1,3)+1},p=function(r){return(r/=.5)<1?.5*Math.pow(r,3):.5*(Math.pow(r-2,3)+2)},h={__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(r,e,n,t){var i=this;r===+r&&(i.__clientWidth=r),e===+e&&(i.__clientHeight=e),n===+n&&(i.__contentWidth=n),t===+t&&(i.__contentHeight=t),i.__computeScrollMax(),i.scrollTo(i.__scrollLeft,i.__scrollTop,!0)},setPosition:function(r,e){var n=this;n.__clientLeft=r||0,n.__clientTop=e||0},setSnapSize:function(r,e){var n=this;n.__snapWidth=r,n.__snapHeight=e},activatePullToRefresh:function(r,e,n,t){var i=this;i.__refreshHeight=r,i.__refreshActivate=e,i.__refreshDeactivate=n,i.__refreshStart=t},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var r=this;r.__refreshActive=!1,r.__refreshDeactivate&&r.__refreshDeactivate(),r.scrollTo(r.__scrollLeft,r.__scrollTop,!0)},getValues:function(){var r=this;return{left:r.__scrollLeft,top:r.__scrollTop,zoom:r.__zoomLevel}},getScrollMax:function(){var r=this;return{left:r.__maxScrollLeft,top:r.__maxScrollTop}},zoomTo:function(r,e,n,t,i){var o=this;if(!o.options.zooming)throw new Error("Zooming is not enabled!");i&&(o.__zoomComplete=i),o.__isDecelerating&&(l.effect.Animate.stop(o.__isDecelerating),o.__isDecelerating=!1);var f=o.__zoomLevel;n==null&&(n=o.__clientWidth/2),t==null&&(t=o.__clientHeight/2),r=Math.max(Math.min(r,o.options.maxZoom),o.options.minZoom),o.__computeScrollMax(r);var s=(n+o.__scrollLeft)*r/f-n,a=(t+o.__scrollTop)*r/f-t;s>o.__maxScrollLeft?s=o.__maxScrollLeft:s<0&&(s=0),a>o.__maxScrollTop?a=o.__maxScrollTop:a<0&&(a=0),o.__publish(s,a,r,e)},zoomBy:function(r,e,n,t,i){var o=this;o.zoomTo(o.__zoomLevel*r,e,n,t,i)},scrollTo:function(r,e,n,t){var i=this;if(i.__isDecelerating&&(l.effect.Animate.stop(i.__isDecelerating),i.__isDecelerating=!1),t!=null&&t!==i.__zoomLevel){if(!i.options.zooming)throw new Error("Zooming is not enabled!");r*=t,e*=t,i.__computeScrollMax(t)}else t=i.__zoomLevel;i.options.scrollingX?i.options.paging?r=Math.round(r/i.__clientWidth)*i.__clientWidth:i.options.snapping&&(r=Math.round(r/i.__snapWidth)*i.__snapWidth):r=i.__scrollLeft,i.options.scrollingY?i.options.paging?e=Math.round(e/i.__clientHeight)*i.__clientHeight:i.options.snapping&&(e=Math.round(e/i.__snapHeight)*i.__snapHeight):e=i.__scrollTop,r=Math.max(Math.min(i.__maxScrollLeft,r),0),e=Math.max(Math.min(i.__maxScrollTop,e),0),r===i.__scrollLeft&&e===i.__scrollTop&&(n=!1),i.__publish(r,e,t,n)},scrollBy:function(r,e,n){var t=this,i=t.__isAnimating?t.__scheduledLeft:t.__scrollLeft,o=t.__isAnimating?t.__scheduledTop:t.__scrollTop;t.scrollTo(i+(r||0),o+(e||0),n)},doMouseZoom:function(r,e,n,t){var i=this,o=r>0?.97:1.03;return i.zoomTo(i.__zoomLevel*o,!1,n-i.__clientLeft,t-i.__clientTop)},doTouchStart:function(r,e){if(r.length==null)throw new Error("Invalid touch list: "+r);if(e instanceof Date&&(e=e.valueOf()),typeof e!="number")throw new Error("Invalid timestamp value: "+e);var n=this;n.__interruptedAnimation=!0,n.__isDecelerating&&(l.effect.Animate.stop(n.__isDecelerating),n.__isDecelerating=!1,n.__interruptedAnimation=!0),n.__isAnimating&&(l.effect.Animate.stop(n.__isAnimating),n.__isAnimating=!1,n.__interruptedAnimation=!0);var t,i,o=r.length===1;o?(t=r[0].pageX,i=r[0].pageY):(t=Math.abs(r[0].pageX+r[1].pageX)/2,i=Math.abs(r[0].pageY+r[1].pageY)/2),n.__initialTouchLeft=t,n.__initialTouchTop=i,n.__zoomLevelStart=n.__zoomLevel,n.__lastTouchLeft=t,n.__lastTouchTop=i,n.__lastTouchMove=e,n.__lastScale=1,n.__enableScrollX=!o&&n.options.scrollingX,n.__enableScrollY=!o&&n.options.scrollingY,n.__isTracking=!0,n.__didDecelerationComplete=!1,n.__isDragging=!o,n.__isSingleTouch=o,n.__positions=[]},doTouchMove:function(r,e,n){if(r.length==null)throw new Error("Invalid touch list: "+r);if(e instanceof Date&&(e=e.valueOf()),typeof e!="number")throw new Error("Invalid timestamp value: "+e);var t=this;if(t.__isTracking){var i,o;r.length===2?(i=Math.abs(r[0].pageX+r[1].pageX)/2,o=Math.abs(r[0].pageY+r[1].pageY)/2):(i=r[0].pageX,o=r[0].pageY);var f=t.__positions;if(t.__isDragging){var s=i-t.__lastTouchLeft,a=o-t.__lastTouchTop,c=t.__scrollLeft,_=t.__scrollTop,u=t.__zoomLevel;if(n!=null&&t.options.zooming){var d=u;if(u=u/t.__lastScale*n,u=Math.max(Math.min(u,t.options.maxZoom),t.options.minZoom),d!==u){var x=i-t.__clientLeft,L=o-t.__clientTop;c=(x+c)*u/d-x,_=(L+_)*u/d-L,t.__computeScrollMax(u)}}if(t.__enableScrollX){c-=s*this.options.speedMultiplier;var m=t.__maxScrollLeft;(c>m||c<0)&&(t.options.bouncing?c+=s/2*this.options.speedMultiplier:c>m?c=m:c=0)}if(t.__enableScrollY){_-=a*this.options.speedMultiplier;var T=t.__maxScrollTop;(_>T||_<0)&&(t.options.bouncing?(_+=a/2*this.options.speedMultiplier,!t.__enableScrollX&&t.__refreshHeight!=null&&(!t.__refreshActive&&_<=-t.__refreshHeight?(t.__refreshActive=!0,t.__refreshActivate&&t.__refreshActivate()):t.__refreshActive&&_>-t.__refreshHeight&&(t.__refreshActive=!1,t.__refreshDeactivate&&t.__refreshDeactivate()))):_>T?_=T:_=0)}f.length>60&&f.splice(0,30),f.push(c,_,e),t.__publish(c,_,u)}else{var S=t.options.locking?3:0,M=5,b=Math.abs(i-t.__initialTouchLeft),E=Math.abs(o-t.__initialTouchTop);t.__enableScrollX=t.options.scrollingX&&b>=S,t.__enableScrollY=t.options.scrollingY&&E>=S,f.push(t.__scrollLeft,t.__scrollTop,e),t.__isDragging=(t.__enableScrollX||t.__enableScrollY)&&(b>=M||E>=M),t.__isDragging&&(t.__interruptedAnimation=!1)}t.__lastTouchLeft=i,t.__lastTouchTop=o,t.__lastTouchMove=e,t.__lastScale=n}},doTouchEnd:function(r){if(r instanceof Date&&(r=r.valueOf()),typeof r!="number")throw new Error("Invalid timestamp value: "+r);var e=this;if(e.__isTracking){if(e.__isTracking=!1,e.__isDragging)if(e.__isDragging=!1,e.__isSingleTouch&&e.options.animating&&r-e.__lastTouchMove<=100){for(var n=e.__positions,t=n.length-1,i=t,o=t;o>0&&n[o]>e.__lastTouchMove-100;o-=3)i=o;if(i===t&&n.length>5&&(i=2),i!==t){var f=n[t]-n[i],s=e.__scrollLeft-n[i-2],a=e.__scrollTop-n[i-1];e.__decelerationVelocityX=s/f*(1e3/60),e.__decelerationVelocityY=a/f*(1e3/60);var c=e.options.paging||e.options.snapping?4:1;(Math.abs(e.__decelerationVelocityX)>c||Math.abs(e.__decelerationVelocityY)>c)&&(e.__refreshActive||e.__startDeceleration(r))}else e.options.scrollingComplete()}else r-e.__lastTouchMove>100&&e.options.scrollingComplete();e.__isDecelerating||(e.__refreshActive&&e.__refreshStart?(e.__publish(e.__scrollLeft,-e.__refreshHeight,e.__zoomLevel,!0),e.__refreshStart&&e.__refreshStart()):((e.__interruptedAnimation||e.__isDragging)&&e.options.scrollingComplete(),e.scrollTo(e.__scrollLeft,e.__scrollTop,!0,e.__zoomLevel),e.__refreshActive&&(e.__refreshActive=!1,e.__refreshDeactivate&&e.__refreshDeactivate()))),e.__positions.length=0}},__publish:function(r,e,n,t){var i=this,o=i.__isAnimating;if(o&&(l.effect.Animate.stop(o),i.__isAnimating=!1),t&&i.options.animating){i.__scheduledLeft=r,i.__scheduledTop=e,i.__scheduledZoom=n;var f=i.__scrollLeft,s=i.__scrollTop,a=i.__zoomLevel,c=r-f,_=e-s,u=n-a,d=function(m,T,S){S&&(i.__scrollLeft=f+c*m,i.__scrollTop=s+_*m,i.__zoomLevel=a+u*m,i.__callback&&i.__callback(i.__scrollLeft,i.__scrollTop,i.__zoomLevel))},x=function(m){return i.__isAnimating===m},L=function(m,T,S){T===i.__isAnimating&&(i.__isAnimating=!1),(i.__didDecelerationComplete||S)&&i.options.scrollingComplete(),i.options.zooming&&(i.__computeScrollMax(),i.__zoomComplete&&(i.__zoomComplete(),i.__zoomComplete=null))};i.__isAnimating=l.effect.Animate.start(d,x,L,i.options.animationDuration,o?D:p)}else i.__scheduledLeft=i.__scrollLeft=r,i.__scheduledTop=i.__scrollTop=e,i.__scheduledZoom=i.__zoomLevel=n,i.__callback&&i.__callback(r,e,n),i.options.zooming&&(i.__computeScrollMax(),i.__zoomComplete&&(i.__zoomComplete(),i.__zoomComplete=null))},__computeScrollMax:function(r){var e=this;r==null&&(r=e.__zoomLevel),e.__maxScrollLeft=Math.max(e.__contentWidth*r-e.__clientWidth,0),e.__maxScrollTop=Math.max(e.__contentHeight*r-e.__clientHeight,0)},__startDeceleration:function(r){var e=this;if(e.options.paging){var n=Math.max(Math.min(e.__scrollLeft,e.__maxScrollLeft),0),t=Math.max(Math.min(e.__scrollTop,e.__maxScrollTop),0),i=e.__clientWidth,o=e.__clientHeight;e.__minDecelerationScrollLeft=Math.floor(n/i)*i,e.__minDecelerationScrollTop=Math.floor(t/o)*o,e.__maxDecelerationScrollLeft=Math.ceil(n/i)*i,e.__maxDecelerationScrollTop=Math.ceil(t/o)*o}else e.__minDecelerationScrollLeft=0,e.__minDecelerationScrollTop=0,e.__maxDecelerationScrollLeft=e.__maxScrollLeft,e.__maxDecelerationScrollTop=e.__maxScrollTop;var f=function(_,u,d){e.__stepThroughDeceleration(d)},s=e.options.snapping?4:.1,a=function(){var _=Math.abs(e.__decelerationVelocityX)>=s||Math.abs(e.__decelerationVelocityY)>=s;return _||(e.__didDecelerationComplete=!0),_},c=function(_,u,d){e.__isDecelerating=!1,e.__didDecelerationComplete&&e.options.scrollingComplete(),e.scrollTo(e.__scrollLeft,e.__scrollTop,e.options.snapping)};e.__isDecelerating=l.effect.Animate.start(f,a,c)},__stepThroughDeceleration:function(r){var e=this,n=e.__scrollLeft+e.__decelerationVelocityX,t=e.__scrollTop+e.__decelerationVelocityY;if(!e.options.bouncing){var i=Math.max(Math.min(e.__maxDecelerationScrollLeft,n),e.__minDecelerationScrollLeft);i!==n&&(n=i,e.__decelerationVelocityX=0);var o=Math.max(Math.min(e.__maxDecelerationScrollTop,t),e.__minDecelerationScrollTop);o!==t&&(t=o,e.__decelerationVelocityY=0)}if(r?e.__publish(n,t,e.__zoomLevel):(e.__scrollLeft=n,e.__scrollTop=t),!e.options.paging){var f=e.options.decelerationRate;e.__decelerationVelocityX*=f,e.__decelerationVelocityY*=f}if(e.options.bouncing){var s=0,a=0,c=e.options.penetrationDeceleration,_=e.options.penetrationAcceleration;n<e.__minDecelerationScrollLeft?s=e.__minDecelerationScrollLeft-n:n>e.__maxDecelerationScrollLeft&&(s=e.__maxDecelerationScrollLeft-n),t<e.__minDecelerationScrollTop?a=e.__minDecelerationScrollTop-t:t>e.__maxDecelerationScrollTop&&(a=e.__maxDecelerationScrollTop-t),s!==0&&(s*e.__decelerationVelocityX<=0?e.__decelerationVelocityX+=s*c:e.__decelerationVelocityX=s*_),a!==0&&(a*e.__decelerationVelocityY<=0?e.__decelerationVelocityY+=a*c:e.__decelerationVelocityY=a*_)}}};for(var v in h)g.prototype[v]=h[v];F.exports=g}(),F.exports}var V,Y;function J(){return Y||(Y=1,V=U()),V}var O=J();const Q=B(O);function ee(){let l;const g=H(0),w=R(30,h=>h),D=new Q((h,v)=>{g.set(v)},{scrollingX:!1,scrollingY:!0,decelerationRate:.95,penetrationAcceleration:.08});window.addEventListener("pointermove",h=>{l&&(l=h,D.doTouchMove([l],l.timeStamp))});function p(h){l&&(l=void 0,D.doTouchEnd(h.timeStamp))}window.addEventListener("pointerup",p),window.addEventListener("pointercancel",p),I(()=>{k(()=>{D.setDimensions(420,700,420,110*w.length-30)})}),A({width:420,height:700,paddingTop(){return-g.get()},layout(){return y({gap:30})},draw(h,v,r){return r.rect(0,0,v.width(),v.height()),{operates:[{type:"fill",style:"yellow"}],clipFillRule:"nonzero"}},onPointerDown(h){l=h.original,D.doTouchStart([l],l.timeStamp)},children(){w.forEach((h,v)=>{A({height:80,width:700,layout(r){return y({direction:"x",gap:4})},children(){A({width:80,height:80,layout(r){return y({direction:"x",alignFix:!0})},draw(r,e,n){return n.rect(0,0,e.width(),e.height()),{clipFillRule:"nonzero",operates:[{type:"fill",style:"green"}]}},children(){N({ext:{grow:1},relay:"width",src:C.image.avatarGitHub()})}}),A({draw(r,e,n){return n.rect(0,0,e.width(),e.height()),{operates:[{type:"fill",style:"green"}]}},layout(r){return y({direction:"y",directionFix:"start",alignFix:!0,alignItems:"start"})},ext:{stretch:!0,grow:1},children(){$({config:{text:C.person.fullName(),fontSize:"20px",fontFamily:"serif"},drawInfo:{style:"white"}}),G({config:{maxLines:3,text:C.lorem.lines(4),fontSize:"10px",fontFamily:"serif"},drawInfo:{style:"white"},ext:{stretch:!0,grow:1}})}})}})})}})}function ne(){const l=H(window.innerWidth),g=H(window.innerHeight);function w(){l.set(window.innerWidth),g.set(window.innerHeight)}window.addEventListener("resize",w),W(()=>{window.removeEventListener("resize",w)});const D=Z.canvas({className:"touch-none",width:l.get,height:g.get});P(D,()=>{A({width:l.get,height:g.get,layout(){return y({direction:"x",directionFix:"center",alignFix:!0})},draw(p,h,v){return v.rect(0,0,h.width(),h.height()),{operates:[{type:"fill",style:"gray"}]}},children(){ee()}})},{beforeDraw(p){}})}export{ne as default};
