import{f as o,c as f,bl as S,bm as T,H as h,k as C,bz as P,d as y,Z as x,ah as b,ai as v,a6 as A,x as $,bA as I}from"./index-DzjyJcX9.js";import{parseSentence as F,toFillToken as _}from"./parse-Bs_UKCnP.js";import{evalOneExp as j}from"./evalTree-CVvZVPkJ.js";import{t as z}from"./index-hd7qkCj1.js";import"./kanren-DfUmp-DM.js";import"./intersect-BrkOqI9c.js";I();function J(){o.div({className:"flex",children(){D("A1")}})}function D(e){const a=f(S(localStorage.getItem(e)||"")),{current:c,renderContentEditable:g}=T(a);h(()=>c().value,s=>{localStorage.setItem(e,s)}),g({render(s,E){return o.pre({className:"daisy-textarea",contentEditable:C,...E,spellcheck:!1,children(){try{const r=c().value,l=P(r,F);console.log("out",l,j(l,z,!1));const k=_(l,r);let N=0;k.forEach(t=>{var d;const i=y.span({className:`token ${t.type} ${H(t.messages)?x`decoration-error [text-decoration-line:spelling-error]`:(d=t.messages)!=null&&d.length?x`decoration-info`:""}`}).renderTextContent(t.value);if(t.messages){const p=`--tokenAnchor${N++}`;i.style.setProperty("anchor-name",p);const n=f(!1);b(v(i,"pointerenter",m=>{n.set(!0)})),b(v(i,"pointerleave",m=>{n.set(!1)})),A(document.body,()=>{o.ul({className:"fixed [justify-self:anchor-center] bottom-[anchor(top)] daisy-list",s_opacity(){return n.get()?1:0},s_pointerEvents(){return n.get()?"all":"none"},children(){t.messages.forEach(u=>{y.li({className:`daisy-list-row daisy-alert ${u.type=="error"?"daisy-alert-error":"daisy-alert-info"}`}).renderTextContent(u.value)})}}).style.setProperty("position-anchor",p)})}})}catch(r){console.log("dd",r),o.span({childrenType:"text",children:s})}}})}}),h(()=>{},$)}function H(e){return e==null?void 0:e.some(a=>a.type=="error")}export{J as default};
