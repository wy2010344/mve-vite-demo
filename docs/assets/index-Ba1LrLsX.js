import{f as g}from"./chunk-LSEVNFON-G8OzWBoO.js";import{c as h,m as x,b as S,E as k,h as y,g as t,a as z,G as C,H as P,I as A,f as N,J as _,K as D}from"./index-BdTCZeBf.js";import I from"./center-empty-Ds57-hQi.js";import $ from"./op-button-Blslf85J.js";import L from"./center-arrow-26pddLzE.js";function G(){const i=h(6),a=x(()=>S(i.get(),e=>({id:e,color:g.color.rgb(),amount:g.number.int(),symbol:g.animal.cat(),img:g.image.avatar()}))),c=x(()=>{const e=j(a(),r=>1);return B(e,r=>r.color)}),l=h(0),n=h(void 0),o=x(()=>m/a().length);function p(e){n.set(e);const r=(a.length-e.index)*o()-o()/2;E(r+10*m)}function f(){const e=n.get();e&&alert("中奖为"+a()[e.index].amount)}function b(){w()&&(l.set(0),setTimeout(()=>{const e=Math.floor(Math.random()*a.length);p({index:e})},2e3))}const{beginDraw:w,drawValue:v,onDrawEffect:T,setDistance:E}=k({beginConfig:_(200,1),endConfig:D(1),value:l,cycle:m,onFinish:f});let u;y(v,function(e){if(e){const r=T();u=A(function(d){r(d,u)})}else u==null||u()}),t.div({className:"relative",children(){t.div({className:"absolute right-0 top-0",children(){const e=t.input({type:"range",min:2,max:9,value:i.get,step:1,onInput(r){i.set(Number(e.value))}})}}),t.img({className:"mx-auto",src:I,alt:"center-empty"}),t.div({className:"absolute w-[525px] h-[525px] left-[50%] translate-x-[-50%] top-[70px]",children(){t.div({className:"absolute inset-0 rounded-[50%]",s_rotate(){return l.get()+180+"deg"},s_background:c,children(){z(a,function(d,s){t.div({className:`prize absolute top-0  h-[50%] 
    rotate-[var(--angel)] origin-[50%_bottom]
    left-[50%] translate-x-[-50%]`,css_angel(){return s()*o()+o()/2+"deg"},children(){t.div({children(){C(d.amount)}}),t.div({children(){C(d.symbol)}})}})})}});let e=0;const r=P(0);y(l.get,d=>{const s=d%o();s>e&&s<o()/2?N(()=>{r.set(s)}):N(()=>{s>r.get()&&r.set(s),r.animateTo(0)}),e=s}),t.div({className:"arrow absolute left-[50%] translate-x-[-50%] top-[50%] translate-y-[-50%]",s_rotate(){return r.get()+"deg"},children(){t.img({src:L})}})}}),t.button({className:"block mx-auto group relative",onClick:b,disabled:v,children(){t.img({src:$,className:"transition-all group-active:scale-y-50 origin-bottom"}),t.div({className:`absolute inset-0 flex items-start pt-[30px] justify-center text-white text-4xl
        transition-all group-active:scale-y-50 origin-bottom`,childrenType:"text",children:"Click"})}})}})}const m=360;function j(i,a){const c=i.reduce((n,o)=>n+a(o),0);return i.reduce((n,o)=>{const p=n.reduce((f,b)=>f+b.percent,0);return n.push({data:o,percent:a(o)/c,beforePercent:p}),n},[])}function B(i,a){const c=[];return i.forEach(n=>{c.push(`${a(n.data)} ${n.beforePercent*m}deg ${(n.beforePercent+n.percent)*m}deg`)}),`conic-gradient(${c.join(", ")})`}export{G as default};
