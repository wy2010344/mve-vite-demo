import{f as C,o as K,c as xn,d as F}from"./index-Dxu4lnfn.js";import{r as vn}from"./index-CT0uQ99y.js";import{hookOrderBooks as kn}from"./getOrderBooks-Bak86jXO.js";import{c as Nn,b as q,e as W,f as bn,g as nn}from"./transform-DXPH_Bvq.js";import{s as Sn,z as Pn}from"./zoom-iZl2cpQ6.js";import{i as En}from"./init-Gi6I4Gst.js";import"./canvasRender-CK3mhhFQ.js";import"./_commonjsHelpers-CqkleIqs.js";import"./pointer-Drloq0xg.js";function L(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Tn(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function sn(n){let t,r,e;n.length!==2?(t=L,r=(f,c)=>L(n(f),c),e=(f,c)=>n(f)-c):(t=n===L||n===Tn?n:zn,r=n,e=n);function o(f,c,i=0,l=f.length){if(i<l){if(t(c,c)!==0)return l;do{const u=i+l>>>1;r(f[u],c)<0?i=u+1:l=u}while(i<l)}return i}function a(f,c,i=0,l=f.length){if(i<l){if(t(c,c)!==0)return l;do{const u=i+l>>>1;r(f[u],c)<=0?i=u+1:l=u}while(i<l)}return i}function s(f,c,i=0,l=f.length){const u=o(f,c,i,l-1);return u>i&&e(f[u-1],c)>-e(f[u],c)?u-1:u}return{left:o,center:s,right:a}}function zn(){return 0}function jn(n){return n===null?NaN:+n}const In=sn(L),Ln=In.right;sn(jn).center;const Rn=Math.sqrt(50),Bn=Math.sqrt(10),Dn=Math.sqrt(2);function R(n,t,r){const e=(t-n)/Math.max(0,r),o=Math.floor(Math.log10(e)),a=e/Math.pow(10,o),s=a>=Rn?10:a>=Bn?5:a>=Dn?2:1;let f,c,i;return o<0?(i=Math.pow(10,-o)/s,f=Math.round(n*i),c=Math.round(t*i),f/i<n&&++f,c/i>t&&--c,i=-i):(i=Math.pow(10,o)*s,f=Math.round(n/i),c=Math.round(t/i),f*i<n&&++f,c*i>t&&--c),c<f&&.5<=r&&r<2?R(n,t,r*2):[f,c,i]}function Cn(n,t,r){if(t=+t,n=+n,r=+r,!(r>0))return[];if(n===t)return[n];const e=t<n,[o,a,s]=e?R(t,n,r):R(n,t,r);if(!(a>=o))return[];const f=a-o+1,c=new Array(f);if(e)if(s<0)for(let i=0;i<f;++i)c[i]=(a-i)/-s;else for(let i=0;i<f;++i)c[i]=(a-i)*s;else if(s<0)for(let i=0;i<f;++i)c[i]=(o+i)/-s;else for(let i=0;i<f;++i)c[i]=(o+i)*s;return c}function X(n,t,r){return t=+t,n=+n,r=+r,R(n,t,r)[2]}function Fn(n,t,r){t=+t,n=+n,r=+r;const e=t<n,o=e?X(t,n,r):X(n,t,r);return(e?-1:1)*(o<0?1/-o:o)}function qn(n,t){t||(t=[]);var r=n?Math.min(t.length,n.length):0,e=t.slice(),o;return function(a){for(o=0;o<r;++o)e[o]=n[o]*(1-a)+t[o]*a;return e}}function Xn(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function On(n,t){var r=t?t.length:0,e=n?Math.min(r,n.length):0,o=new Array(e),a=new Array(r),s;for(s=0;s<e;++s)o[s]=Z(n[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(f){for(s=0;s<e;++s)a[s]=o[s](f);return a}}function Un(n,t){var r=new Date;return n=+n,t=+t,function(e){return r.setTime(n*(1-e)+t*e),r}}function Vn(n,t){var r={},e={},o;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in n?r[o]=Z(n[o],t[o]):e[o]=t[o];return function(a){for(o in r)e[o]=r[o](a);return e}}function Z(n,t){var r=typeof t,e;return t==null||r==="boolean"?Nn(t):(r==="number"?q:r==="string"?(e=nn(t))?(t=e,W):bn:t instanceof nn?W:t instanceof Date?Un:Xn(t)?qn:Array.isArray(t)?On:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Vn:q)(n,t)}function Yn(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}const O=Math.PI,U=2*O,b=1e-6,Zn=U-b;function cn(n){this._+=n[0];for(let t=1,r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function Gn(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return cn;const r=10**t;return function(e){this._+=e[0];for(let o=1,a=e.length;o<a;++o)this._+=Math.round(arguments[o]*r)/r+e[o]}}class Hn{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cn:Gn(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,e,o){this._append`Q${+t},${+r},${this._x1=+e},${this._y1=+o}`}bezierCurveTo(t,r,e,o,a,s){this._append`C${+t},${+r},${+e},${+o},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,e,o,a){if(t=+t,r=+r,e=+e,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,f=this._y1,c=e-t,i=o-r,l=s-t,u=f-r,h=l*l+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>b)if(!(Math.abs(u*c-i*l)>b)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let m=e-s,g=o-f,_=c*c+i*i,M=m*m+g*g,$=Math.sqrt(_),x=Math.sqrt(h),w=a*Math.tan((O-Math.acos((_+h-M)/(2*$*x)))/2),v=w/x,y=w/$;Math.abs(v-1)>b&&this._append`L${t+v*l},${r+v*u}`,this._append`A${a},${a},0,0,${+(u*m>l*g)},${this._x1=t+y*c},${this._y1=r+y*i}`}}arc(t,r,e,o,a,s){if(t=+t,r=+r,e=+e,s=!!s,e<0)throw new Error(`negative radius: ${e}`);let f=e*Math.cos(o),c=e*Math.sin(o),i=t+f,l=r+c,u=1^s,h=s?o-a:a-o;this._x1===null?this._append`M${i},${l}`:(Math.abs(this._x1-i)>b||Math.abs(this._y1-l)>b)&&this._append`L${i},${l}`,e&&(h<0&&(h=h%U+U),h>Zn?this._append`A${e},${e},0,1,${u},${t-f},${r-c}A${e},${e},0,1,${u},${this._x1=i},${this._y1=l}`:h>b&&this._append`A${e},${e},0,${+(h>=O)},${u},${this._x1=t+e*Math.cos(a)},${this._y1=r+e*Math.sin(a)}`)}rect(t,r,e,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${e=+e}v${+o}h${-e}Z`}toString(){return this._}}function Qn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function B(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,e=n.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+n.slice(r+1)]}function E(n){return n=B(Math.abs(n)),n?n[1]:NaN}function Jn(n,t){return function(r,e){for(var o=r.length,a=[],s=0,f=n[0],c=0;o>0&&f>0&&(c+f+1>e&&(f=Math.max(1,e-c)),a.push(r.substring(o-=f,o+f)),!((c+=f+1)>e));)f=n[s=(s+1)%n.length];return a.reverse().join(t)}}function Kn(n){return function(t){return t.replace(/[0-9]/g,function(r){return n[+r]})}}var Wn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function D(n){if(!(t=Wn.exec(n)))throw new Error("invalid format: "+n);var t;return new G({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}D.prototype=G.prototype;function G(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}G.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nt(n){n:for(var t=n.length,r=1,e=-1,o;r<t;++r)switch(n[r]){case".":e=o=r;break;case"0":e===0&&(e=r),o=r;break;default:if(!+n[r])break n;e>0&&(e=0);break}return e>0?n.slice(0,e)+n.slice(o+1):n}var hn;function tt(n,t){var r=B(n,t);if(!r)return n+"";var e=r[0],o=r[1],a=o-(hn=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=e.length;return a===s?e:a>s?e+new Array(a-s+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+B(n,Math.max(0,t+a-1))[0]}function tn(n,t){var r=B(n,t);if(!r)return n+"";var e=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+e:e.length>o+1?e.slice(0,o+1)+"."+e.slice(o+1):e+new Array(o-e.length+2).join("0")}const en={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Qn,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>tn(n*100,t),r:tn,s:tt,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function rn(n){return n}var on=Array.prototype.map,un=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function et(n){var t=n.grouping===void 0||n.thousands===void 0?rn:Jn(on.call(n.grouping,Number),n.thousands+""),r=n.currency===void 0?"":n.currency[0]+"",e=n.currency===void 0?"":n.currency[1]+"",o=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?rn:Kn(on.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",f=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function i(u){u=D(u);var h=u.fill,m=u.align,g=u.sign,_=u.symbol,M=u.zero,$=u.width,x=u.comma,w=u.precision,v=u.trim,y=u.type;y==="n"?(x=!0,y="g"):en[y]||(w===void 0&&(w=12),v=!0,y="g"),(M||h==="0"&&m==="=")&&(M=!0,h="0",m="=");var _n=_==="$"?r:_==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",$n=_==="$"?e:/[%p]/.test(y)?s:"",H=en[y],An=/[defgprs%]/.test(y);w=w===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function Q(d){var N=_n,A=$n,S,J,T;if(y==="c")A=H(d)+A,d="";else{d=+d;var z=d<0||1/d<0;if(d=isNaN(d)?c:H(Math.abs(d),w),v&&(d=nt(d)),z&&+d==0&&g!=="+"&&(z=!1),N=(z?g==="("?g:f:g==="-"||g==="("?"":g)+N,A=(y==="s"?un[8+hn/3]:"")+A+(z&&g==="("?")":""),An){for(S=-1,J=d.length;++S<J;)if(T=d.charCodeAt(S),48>T||T>57){A=(T===46?o+d.slice(S+1):d.slice(S))+A,d=d.slice(0,S);break}}}x&&!M&&(d=t(d,1/0));var j=N.length+d.length+A.length,k=j<$?new Array($-j+1).join(h):"";switch(x&&M&&(d=t(k+d,k.length?$-A.length:1/0),k=""),m){case"<":d=N+d+A+k;break;case"=":d=N+k+d+A;break;case"^":d=k.slice(0,j=k.length>>1)+N+d+A+k.slice(j);break;default:d=k+N+d+A;break}return a(d)}return Q.toString=function(){return u+""},Q}function l(u,h){var m=i((u=D(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(E(h)/3)))*3,_=Math.pow(10,-g),M=un[8+g/3];return function($){return m(_*$)+M}}return{format:i,formatPrefix:l}}var I,ln,dn;rt({thousands:",",grouping:[3],currency:["$",""]});function rt(n){return I=et(n),ln=I.format,dn=I.formatPrefix,I}function it(n){return Math.max(0,-E(Math.abs(n)))}function ot(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(E(t)/3)))*3-E(Math.abs(n)))}function ut(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,E(t)-E(n))+1}function at(n){return function(){return n}}function ft(n){return+n}var an=[0,1];function P(n){return n}function V(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:at(isNaN(t)?NaN:.5)}function st(n,t){var r;return n>t&&(r=n,n=t,t=r),function(e){return Math.max(n,Math.min(t,e))}}function ct(n,t,r){var e=n[0],o=n[1],a=t[0],s=t[1];return o<e?(e=V(o,e),a=r(s,a)):(e=V(e,o),a=r(a,s)),function(f){return a(e(f))}}function ht(n,t,r){var e=Math.min(n.length,t.length)-1,o=new Array(e),a=new Array(e),s=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++s<e;)o[s]=V(n[s],n[s+1]),a[s]=r(t[s],t[s+1]);return function(f){var c=Ln(n,f,1,e)-1;return a[c](o[c](f))}}function lt(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function dt(){var n=an,t=an,r=Z,e,o,a,s=P,f,c,i;function l(){var h=Math.min(n.length,t.length);return s!==P&&(s=st(n[0],n[h-1])),f=h>2?ht:ct,c=i=null,u}function u(h){return h==null||isNaN(h=+h)?a:(c||(c=f(n.map(e),t,r)))(e(s(h)))}return u.invert=function(h){return s(o((i||(i=f(t,n.map(e),q)))(h)))},u.domain=function(h){return arguments.length?(n=Array.from(h,ft),l()):n.slice()},u.range=function(h){return arguments.length?(t=Array.from(h),l()):t.slice()},u.rangeRound=function(h){return t=Array.from(h),r=Yn,l()},u.clamp=function(h){return arguments.length?(s=h?!0:P,l()):s!==P},u.interpolate=function(h){return arguments.length?(r=h,l()):r},u.unknown=function(h){return arguments.length?(a=h,u):a},function(h,m){return e=h,o=m,l()}}function mt(){return dt()(P,P)}function gt(n,t,r,e){var o=Fn(n,t,r),a;switch(e=D(e??",f"),e.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(t));return e.precision==null&&!isNaN(a=ot(o,s))&&(e.precision=a),dn(e,s)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(a=ut(o,Math.max(Math.abs(n),Math.abs(t))))&&(e.precision=a-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(a=it(o))&&(e.precision=a-(e.type==="%")*2);break}}return ln(e)}function pt(n){var t=n.domain;return n.ticks=function(r){var e=t();return Cn(e[0],e[e.length-1],r??10)},n.tickFormat=function(r,e){var o=t();return gt(o[0],o[o.length-1],r??10,e)},n.nice=function(r){r==null&&(r=10);var e=t(),o=0,a=e.length-1,s=e[o],f=e[a],c,i,l=10;for(f<s&&(i=s,s=f,f=i,i=o,o=a,a=i);l-- >0;){if(i=X(s,f,r),i===c)return e[o]=s,e[a]=f,t(e);if(i>0)s=Math.floor(s/i)*i,f=Math.ceil(f/i)*i;else if(i<0)s=Math.ceil(s*i)/i,f=Math.floor(f*i)/i;else break;c=i}return n},n}function Y(){var n=mt();return n.copy=function(){return lt(n,Y())},En.apply(n,arguments),pt(n)}function p(n){return function(){return n}}function mn(n){let t=3;return n.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return n},()=>new Hn(t)}function gn(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function pn(n){this._context=n}pn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:this._context.lineTo(n,t);break}}};function yn(n){return new pn(n)}function Mn(n){return n[0]}function wn(n){return n[1]}function yt(n,t){var r=p(!0),e=null,o=yn,a=null,s=mn(f);n=typeof n=="function"?n:n===void 0?Mn:p(n),t=typeof t=="function"?t:t===void 0?wn:p(t);function f(c){var i,l=(c=gn(c)).length,u,h=!1,m;for(e==null&&(a=o(m=s())),i=0;i<=l;++i)!(i<l&&r(u=c[i],i,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+n(u,i,c),+t(u,i,c));if(m)return a=null,m+""||null}return f.x=function(c){return arguments.length?(n=typeof c=="function"?c:p(+c),f):n},f.y=function(c){return arguments.length?(t=typeof c=="function"?c:p(+c),f):t},f.defined=function(c){return arguments.length?(r=typeof c=="function"?c:p(!!c),f):r},f.curve=function(c){return arguments.length?(o=c,e!=null&&(a=o(e)),f):o},f.context=function(c){return arguments.length?(c==null?e=a=null:a=o(e=c),f):e},f}function fn(n,t,r){var e=null,o=p(!0),a=null,s=yn,f=null,c=mn(i);n=typeof n=="function"?n:n===void 0?Mn:p(+n),t=typeof t=="function"?t:p(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?wn:p(+r);function i(u){var h,m,g,_=(u=gn(u)).length,M,$=!1,x,w=new Array(_),v=new Array(_);for(a==null&&(f=s(x=c())),h=0;h<=_;++h){if(!(h<_&&o(M=u[h],h,u))===$)if($=!$)m=h,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),g=h-1;g>=m;--g)f.point(w[g],v[g]);f.lineEnd(),f.areaEnd()}$&&(w[h]=+n(M,h,u),v[h]=+t(M,h,u),f.point(e?+e(M,h,u):w[h],r?+r(M,h,u):v[h]))}if(x)return f=null,x+""||null}function l(){return yt().defined(o).curve(s).context(a)}return i.x=function(u){return arguments.length?(n=typeof u=="function"?u:p(+u),e=null,i):n},i.x0=function(u){return arguments.length?(n=typeof u=="function"?u:p(+u),i):n},i.x1=function(u){return arguments.length?(e=u==null?null:typeof u=="function"?u:p(+u),i):e},i.y=function(u){return arguments.length?(t=typeof u=="function"?u:p(+u),r=null,i):t},i.y0=function(u){return arguments.length?(t=typeof u=="function"?u:p(+u),i):t},i.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:p(+u),i):r},i.lineX0=i.lineY0=function(){return l().x(n).y(t)},i.lineY1=function(){return l().x(n).y(r)},i.lineX1=function(){return l().x(e).y(t)},i.defined=function(u){return arguments.length?(o=typeof u=="function"?u:p(!!u),i):o},i.curve=function(u){return arguments.length?(s=u,a!=null&&(f=s(a)),i):s},i.context=function(u){return arguments.length?(u==null?a=f=null:f=s(a=u),i):a},i}function bt(){const n=["BTCUSDT","ETHUSDT","BNBUSDT"],{coinSymbolPair:t,currentOrderBook:r}=kn();vn(t.get,t.set,C.select({className:"daisy-select",children(){n.forEach(a=>{C.option({value:a,children:a})})}}));function e(a){return a.reduce(function(s,f){return s.push({price:f[0],amount:f[1],accAmount:(s.at(-1)?.accAmount??0)+f[1]}),s},[])}const o=K(()=>{const a=r();return{asks:e(a.asks),bids:e(a.bids)}});C.div({children(){const f=xn(void 0),c=K(()=>{const i=o(),l=Math.min(i.asks[0]?.price??1/0,i.bids.at(-1)?.price??1/0),u=Math.max(i.asks.at(-1)?.price??-1/0,i.bids[0]?.price??-1/0),h=Y().domain([l,u]).range([0,800]);console.log("c",i);const m=f.get();return{xAxis:m?m.rescaleX(h):h,yAxisA:Y().domain([0,Math.max(i.bids.at(-1)?.accAmount??-1/0,i.asks.at(-1)?.accAmount??-1/0)]).range([800,0])}});F.svg({viewBox:"0 0 800 800",width:800,height:800,children(i){Sn(i).call(Pn().on("zoom",l=>{f.set(l.transform)})),F.path({fill:"green",d(){const{yAxisA:l,xAxis:u}=c();return fn().y0(l(0)).x(m=>u(m.price)).y1(m=>l(m.accAmount))(o().asks)??""}}),F.path({fill:"red",d(){const{yAxisA:l,xAxis:u}=c();return fn().y0(l(0)).x(m=>u(m.price)).y1(m=>l(m.accAmount))(o().bids)??""}})}})}})}export{bt as default};
