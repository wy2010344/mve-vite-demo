import{f as b,e as D,c as d,m as F,A as m,B as T,h,E as A,J as N,I as g,F as l,u as L}from"./index-BnPd4ZD8.js";import{r as P,h as x}from"./canvasRender-hz9keZru.js";import{m as K,f as M,a as B,i as C,e as E,d as I,c as q,t as z}from"./forceLayout-DID_KXem.js";function Y(){const f=b.canvas({width:800,height:800}),a=800,u=D(()=>{const t=Array.from({length:400},(r,s)=>({index:s})),n=[];for(let r=0;r<20;++r)for(let s=0;s<20;++s)r>0&&n.push({source:(r-1)*20+s,target:r*20+s}),s>0&&n.push({source:r*20+(s-1),target:r*20+s});return{nodes:t,links:n}}),y=a,k=d(u.nodes),p=d(u.links),i=d(void 0),c=F(e=>K({nodes:(e==null?void 0:e.nodes)||m,links:(e==null?void 0:e.links)||m,fromLinks:p.get(),fromNodes:k.get(),createForceNode(t,n,r){return C(t,2,n,I,E)},getNodeKey(t){return t.index},getSorceKey(t){return t.source},getTargetKey(t){return t.target},createFromKey(t){return{index:t}}})),o=T(q()),S=M({getStrength:g(1),getDistance:g(20),iterations:10}),w=B({getStrenth:g(-30)});function v(){const e=c();z(o,e.nodes,t=>{S(e.links,o.nDim,t),w(e.nodes,o.nDim,t)})}h(A(()=>{v(),L()})),h(N(function(e,t){const n=i.get();n&&(t?(o.alphaTarget=0,n.x.f=void 0,n.y.f=void 0,i.set(void 0)):(n.x.f=e.offsetX-a/2,n.y.f=e.offsetY-y/2))},"pointer",{element:f})),P(f,function(){l(()=>c().links,e=>{x({x:e.source.x.dSignal.get,y:e.source.y.dSignal.get,withPath:!0,draw(t,n){return n.moveTo(0,0),n.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),{operates:[{type:"stroke",style:"#aaa",width:1}]}}})}),l(()=>c().nodes,e=>{x({x:e.x.dSignal.get,y:e.y.dSignal.get,onPointerDown(t){o.alphaTarget=.3,i.set(e)},withPath:!0,draw(t,n){return n.arc(0,0,3,0,2*Math.PI),{operates:[{type:"fill",style:"#000"},{type:"draw",callback(r){r.fillText(e.value.index+"",0,0)}}]}}})})},{beforeDraw(e){e.translate(a/2,y/2)}})}export{Y as default};
