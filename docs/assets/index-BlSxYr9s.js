import{c as A,V as K,Y as h,z as _,W as R,X as Z,Z as B,_ as G,H as Y,$ as J,d as Q,i as U,a0 as ee,f as s,o as te,n as w,E as ne,a1 as p,a2 as D,a3 as k,a4 as $,a5 as re,M as E,a6 as y,a7 as ae,a8 as se,a9 as C}from"./index-BiAKiJb6.js";import{c as oe,f as b,h as ie,W as le,S as z,a as ce}from"./index-DQpQsvk_.js";import{e as de}from"./explain-CmY0fWr7.js";import{a as me}from"./onlyMobile-61vyPEdr.js";import{f as fe}from"./fixRightTop-CFpXaWua.js";import{t as ue}from"./themeDropdown-CyeGAwEh.js";import he from"./demoList-DdHD8eFJ.js";import{f as ye}from"./chunk-KZPPZA2C-rvBpA5M9.js";import"./index-C6eOwPKX.js";import"./iconBase-CduQK-mk.js";import"./index-BxY9dVzG.js";import"./index-BcEmkcLw.js";const V="select-cell";function We(){de(()=>{}),me(function({width:f},g){g&&fe(function(){oe(),ue()});const a=A(h.fromDate(new Date),K),c=_(r=>{const o=a.get();return new R(o.year,o.month,b.get())}),x=_(()=>{const r=a.get();return Z.from(r.year,r.month,r.day,b.get())}),L=window;L.__date=a;const l=new B("y",{maxScroll(){return S.get()},targetSnap:G([{beforeForce:1,size:d()*5,afterForce:1}])}),S=l.measureMaxScroll();function d(){return f()/7}const u=_(()=>l.get()>=5*d()),T=Y(()=>{const r=d(),o=r*5,e=ae(p(a.get()),b.get())-1;return $({0:0,[o]:-r*e},C)}),N=J({direction:"x",getValue:a.get,compare(r,o){const e=p(o).valueOf(),i=p(r).valueOf()-e;let n=0;return i>=k?n=1:i<=-k&&(n=-1),n},callback(r){const o=p(a.get());o.setTime(o.getTime()+r*k),a.set(h.fromDate(o))}});let M=a.get();Q(()=>N.onAnimation(),function(r){r||(M.equals(a.get())||U(()=>{u()?l.animateTo(d()*5):l.animateTo(0)}),M=a.get())});const v=ee({getSize(){return H.clientWidth}});ie(a.get,V);const X=Y(()=>{const r=d()*5;return $({0:d()*7,[r]:d()*2},C)}),H=s.div({s_height:"100%",s_overflow:"hidden",s_userSelect:"none",onTouchMove(r){r.preventDefault()},onWheel:l.wheelEventListener,onPointerDown:l.pointerEventListner,children(r){v.hookCompare(x,function(e,t){return u()?e.cells[0].toNumber()-t.cells[0].toNumber():0}),v.hookCompare(c,function(e,t){return u()?0:e.toNumber()-t.toNumber()});const o=s.div({s_transform(){return`translateY(${-l.get()}px)`},className:"flex flex-col",s_minHeight(){return`calc(100% + ${f()}px * 5 / 7)`},children(){s.div({className:"bg-base-100 relative z-10",s_display:"flex",s_alignItems:"stretch",s_transform(){return`translateY(${Math.max(l.get(),0)}px)`},children(){s.h1({className:"text-display-large",childrenType:"text",children(){return a.get().month}}),s.div({className:"flex flex-col items-start justify-center",children(){s.div({className:"text-title-large",childrenType:"text",children(){return a.get().year}}),s.div({className:"text-title-medium",childrenType:"text",children(){return`月 ${a.get().day}日`}})}})}}),s.div({s_zIndex:1,s_position:"relative",s_height(){return`${d()*7}px`},children(){s.div({className:"bg-base-300",s_overflow:"hidden",s_height(){const e=l.get();return`${X(e)}px`},s_transform(){return`translateY(${Math.max(l.get(),0)}px)`},onPointerDown(e){ne(v.getMoveEvent(e,"x",{callback(t,i){if(u()){const n=p(a.get());n.setTime(n.getTime()+t*le),t&&a.set(h.fromDate(n))}else{const n=t<0?c().lastMonth():c().nextMonth();a.get().day>n.days?a.set(h.from(n.year,n.month,n.days)):a.set(h.from(n.year,n.month,a.get().day))}}}))},children(){s.div({s_position:"relative",s_transform(){return`translateX(${-v.get()}px)`},children(){te(u,function(){w(()=>{const e=x();return[e.beforeWeek(),e,e.nextWeek()]},e=>e.cells[0].toNumber(),function(e,t){q(e(),t)})},function(){w(()=>{const e=c();return[e.lastMonth(),e,e.nextMonth()]},e=>e.toNumber(),function(e,t){j(e(),t)})})}})}})}}),s.div({className:" flex-1",data_a:"99",plugin:N.plugin,children(){s.div({className:"relative",s_transform(){return`translateX(${-N.get()}px)`},children(){w(()=>{const e=a.get();return[e.beforeDay(),e,e.nextDay()]},e=>e.toNumber(),function(e,t){D.div({attrs(i){const n=t();n!=1&&(i.s_position="absolute",i.s_inset=0,i.s_transform=`translateX(${(n-1)*100}%)`)},children(){he(ye.number.int({max:17,min:15}))}})})}})}})}});S.hookInit(r,o)}});function j(r,o){function e(){const t=a.get(),i=r;return t.year==i.year&&t.month==i.month}return D.div({attrs(t){const i=o();if(i==1){const n=l.get();t.s_transform=` translateY(${T(n)}px)`}else t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(i-1)*100}%)`},children(){W(()=>{const t=l.get();return`translateY(${-T(t)}px)`}),s.div({children(){for(let t=0;t<6;t++)s.div({className:"flex items-center justify-center relative",children(){for(let i=0;i<7;i++){const n=r.fullDayOf(i,t);let m=r;n.type=="last"?m=r.lastMonth():n.type=="next"&&(m=r.nextMonth()),I(i,{year:m.year,month:m.month,day:n.day});const F=z.fromYmd(m.year,m.month,n.day).getLunarDay(),P=_(()=>n.type=="this"&&e()&&a.get().day==n.day);O({day:n.day,onClick(){a.set(h.from(m.year,m.month,n.day))},lunarDay:F,selected:P,hide(){return u()?!1:n.type!="this"}})}}})}})}})}function W(r){s.div({className:"bg-base-300 relative z-10",s_display:"flex",s_alignItems:"center",s_justifyContent:"space-between",s_transform:r,children(){for(let o=0;o<7;o++)s.div({className:"flex-1 aspect-square flex items-center justify-center",childrenType:"text",children(){return ce[c().weekDay(o)]}})}})}function q(r,o){D.div({attrs(e){e.className="self-start",o()!=1&&(e.s_position="absolute",e.s_inset=0,e.s_transform=`translateX(${(o()-1)*100}%)`)},children(){W(),s.div({className:"flex items-center justify-center relative",children(){for(let e=0;e<7;e++){const t=r.cells[e];I(e,t);const n=z.fromYmd(t.year,t.month,t.day).getLunarDay();O({hide(){return!1},day:t.day,lunarDay:n,selected(){return se(t,a.get())},onClick(){a.set(t)}})}}})}})}})}function I(f,g){f==0&&s.div({className:"absolute left-0 text-label-small",childrenType:"text",children(){return re(p(g),b.get())}})}function O({day:f,lunarDay:g,hide:a,selected:c,onClick:x}){s.div({s_flex:1,s_aspectRatio:1,s_display:"flex",s_flexDirection:"column",s_alignItems:"center",s_justifyContent:"center",className(){return a()?y` opacity-30`:""},onClick:x,children(){s.div({s_aspectRatio:1,s_display:"grid",s_placeItems:"center",s_position:"relative",children(){s.div({id(){return c()?V:""},className(){return E(y`absolute inset-0  rounded-full z-0`,c()&&y`bg-primary`)}}),s.span({s_position:"relative",className(){return E(c()?y`text-primary-content`:y`text-base-content`,y`transition-all`)},childrenType:"text",children:f})}}),s.div({s_fontSize:"10px",childrenType:"text",className:"text-neutral-500",children:g.getName()})}})}export{We as default};
