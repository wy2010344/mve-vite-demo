import{c as i,l as F,f as T,k,m as u,n as W,o as X,p as C,q as d,t as P,u as m,s as D,v as Y,g as _}from"./index-BNMIKCZr.js";function E(){const x=i(0),w=i(0),c=i(!1),L=i(1),I=i(80),R=i(120),h=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#26de81","#fd79a8","#fdcb6e","#6c5ce7"];function S(n,e,o){return{id:n,x:Math.random()*e,y:Math.random()*o,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:Math.random()*3+1,color:h[Math.floor(Math.random()*h.length)],opacity:Math.random()*.8+.2,life:0,maxLife:Math.random()*200+100}}function $(n,e){return k(I.get(),o=>S(o,n,e))}const s=i($(1e3,700));function q(n,e){const o=s.get(),t=L.get(),r=c.get(),l=x.get(),f=w.get(),g=o.map(y=>{const a={...y};if(r){const b=l-a.x,M=f-a.y,p=Math.sqrt(b*b+M*M);if(p<150){const v=(150-p)/150*.02;a.vx+=b/p*v,a.vy+=M/p*v}}if(a.x+=a.vx*t,a.y+=a.vy*t,a.x<0&&(a.x=n),a.x>n&&(a.x=0),a.y<0&&(a.y=e),a.y>e&&(a.y=0),a.life+=1,a.life>a.maxLife)return S(a.id,n,e);const A=a.life/a.maxLife;return a.opacity=Math.sin(A*Math.PI)*.8+.2,a});s.set(g)}function z(){const n=s.get(),e=R.get(),o=[];for(let t=0;t<n.length;t++)for(let r=t+1;r<n.length;r++){const l=n[t],f=n[r],g=l.x-f.x,y=l.y-f.y,a=Math.sqrt(g*g+y*y);a<e&&o.push({from:l,to:f,distance:a,opacity:(1-a/e)*.3})}return o}F(T.canvas({s_width:"1000px",s_height:"700px",className:"border border-gray-300 rounded-lg shadow-lg",data_canvasContainer:!0,onMouseMove:n=>{x.set(n.offsetX),w.set(n.offsetY)},onMouseEnter:()=>c.set(!0),onMouseLeave:()=>c.set(!1),onClick:n=>{console.log("click",n);const e=k(10,o=>({id:Date.now()+o,x:n.offsetX,y:n.offsetY,vx:(Math.random()-.5)*8,vy:(Math.random()-.5)*8,size:Math.random()*4+2,color:h[Math.floor(Math.random()*h.length)],opacity:1,life:0,maxLife:60}));s.set([...s.get(),...e])}}),({canvas:n})=>{u({x:0,y:0,draw({ctx:e}){const o=e.createLinearGradient(0,0,0,700);o.addColorStop(0,"#0f0f23"),o.addColorStop(.5,"#1a1a2e"),o.addColorStop(1,"#16213e"),e.fillStyle=o,e.fillRect(0,0,1e3,700)}}),u({x:0,y:0,draw({ctx:e}){z().forEach(t=>{e.beginPath(),e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e.strokeStyle=`rgba(255, 255, 255, ${t.opacity})`,e.lineWidth=.5,e.stroke()})}}),W(s.get,e=>e.id,function(e){u({x:()=>e().x-e().size,y:()=>e().y-e().size,draw({ctx:o}){const t=e(),r=o.createRadialGradient(t.size,t.size,0,t.size,t.size,t.size*3);r.addColorStop(0,t.color+Math.floor(t.opacity*255).toString(16).padStart(2,"0")),r.addColorStop(.5,`${t.color}20`),r.addColorStop(1,"transparent"),o.fillStyle=r,o.fillRect(0,0,t.size*6,t.size*6),o.beginPath(),o.arc(t.size,t.size,t.size,0,Math.PI*2),o.fillStyle=t.color,o.globalAlpha=t.opacity,o.fill(),o.globalAlpha=1}})}),X(c.get,function(){u({x:()=>x.get()-30,y:()=>w.get()-30,draw({ctx:e}){e.beginPath(),e.arc(30,30,25,0,Math.PI*2),e.strokeStyle="rgba(255, 255, 255, 0.3)",e.lineWidth=2,e.setLineDash([5,5]),e.stroke(),e.setLineDash([])}})}),C({x:20,y:20,layout(e){return D({direction:"y",alignItems:"start"})},draw(){P("rgba(0, 0, 0, 0.7)"),m(1,"rgba(255, 255, 255, 0.3)")},children(){d({config:{text:"ğŸŒŸ ç²’å­æ˜Ÿç©ºæ§åˆ¶å°",fontSize:"16px",fontWeight:"bold"},draw(e){e.draw({style:"white"})}}),d({config(){return{text:`ç²’å­æ•°é‡: ${s.get().length}`,fontSize:"12px"}},draw(e){e.draw({style:"#4ecdc4"})}}),d({config(){return{text:`è¿æ¥æ•°é‡: ${z().length}`,fontSize:"12px"}},draw(e){e.draw({style:"#45b7d1"})}}),d({config:{text:"ğŸ’¡ ç§»åŠ¨é¼ æ ‡å¸å¼•ç²’å­",fontSize:"11px"},draw(e){e.draw({style:"#feca57"})}}),d({config:{text:"ğŸ† ç‚¹å‡»åˆ›å»ºçˆ†ç‚¸æ•ˆæœ",fontSize:"11px"},draw(e){e.draw({style:"#ff9ff3"})}})}}),C({x:800,y:20,paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,layout(e){return D({direction:"x",gap:10,alignItems:"center"})},draw(){P("rgba(0, 0, 0, 0.7)"),m(1,"rgba(255, 255, 255, 0.3)")},children(){d({config:{text:"âš¡ æ€§èƒ½ç›‘æ§",fontSize:"14px",fontWeight:"bold"},draw(e){m(1,"blue"),e.draw()}}),d({config:{text:"FPS: ~60",fontSize:"12px"},draw({ctx:e,draw:o}){e.textBaseline="top",m(1,"blue"),o({style:"#26de81"})}})}}),Y(_(function(){q(n.width,n.height)}))},{beforeDraw(n){n.clearRect(0,0,1e3,700)}})}export{E as default};
