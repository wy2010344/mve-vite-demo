import{ax as p,c as d,A as D,e as m,as as N,ay as f,v as T,g as b,aw as A,l as w,b as l,m as x,u as L,t as M,G as P}from"./index-CnmbM-dR.js";import{m as K,c as C,e as E,d as q,i as z,f as B,a as G,t as I}from"./forceLayout-BYmRYkBU.js";import{r as R}from"./onlyMobile-C_GUAbBU.js";function j(){R(function({width:o,height:a}){const u=p(()=>{const e=Array.from({length:400},(n,s)=>({index:s})),t=[];for(let n=0;n<20;++n)for(let s=0;s<20;++s)n>0&&t.push({source:(n-1)*20+s,target:n*20+s}),s>0&&t.push({source:n*20+(s-1),target:n*20+s});return{nodes:e,links:t}}),k=d(u.nodes),S=d(u.links),y=d(void 0),i=D(r=>K({nodes:(r==null?void 0:r.nodes)||m,links:(r==null?void 0:r.links)||m,fromLinks:S.get(),fromNodes:k.get(),createForceNode(e,t,n){return C(e,2,t,q,E)},getNodeKey(e){return e.index},getSorceKey(e){return e.source},getTargetKey(e){return e.target},createFromKey(e){return{index:e}}})),c=N(z()),h=B({getStrength:f(1),getDistance:f(20),iterations:10}),v=G({getStrenth:f(-30)}),g=2;function F(){const r=i();I(g,c,r.nodes,e=>{h(r.links,g,e),v(r.nodes,g,e)})}T(b(()=>{F(),A()})),w({className:"touch-none",width:o,height:a},function({canvas:r}){l(()=>i().links,e=>{x({x:e.source.x.dSignal.get,y:e.source.y.dSignal.get,withPath:!0,draw(t,n){n.moveTo(0,0),n.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),L(1,"#aaa")}})}),l(()=>i().nodes,e=>{x({x:e.x.dSignal.get,y:e.y.dSignal.get,onPointerDown(t){c.alphaTarget=.3,y.set(e),P({onMove(n){e.x.f=n.offsetX-o()/2,e.y.f=n.offsetY-a()/2},onEnd(n){c.alphaTarget=0,e.x.f=void 0,e.y.f=void 0,y.set(void 0)}},{element:r})},withPath:!0,draw(t,n){n.arc(0,0,6,0,2*Math.PI),M("#000"),t.fillText(e.value.index+"",3,-3)}})})},{beforeDraw(r){r.translate(o()/2,a()/2)}})})}export{j as default};
