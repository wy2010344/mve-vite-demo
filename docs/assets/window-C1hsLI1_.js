import{b3 as O,b4 as X,b5 as Y,b6 as $,b7 as g,f as n,b1 as R,au as v,b8 as A,aw as H,b9 as x,E as q,a7 as w}from"./index-B26XVUiJ.js";const{renderPop:F,createPop:b}=O();let f;window.addEventListener("pointerup",s=>f=s,!0);function B(s){return function(...r){function t(){return s(t,...r)}return s(t,...r)}}function G(s=X){const r=s();return function(t,i){let o=r.get(t);if(o)return b(o.panel);{o=i(function(c){c?o?.closeOther():a.closeIt(null)}),r.set(t,o);const a=b(o.panel);return a.closeSet.add(()=>{r.delete(t)}),a}}}const J=B(function(s,r){const t=[];return{closeOther(){t.forEach(H)},panel(i){const o=Y(),a=$(),c=f,{title:z,typeIcon:_,width:y,height:N,x:C,y:P,minHeight:S,minWidth:I,children:M,className:D,noCopy:E,titleControls:W,...L}=r(i),u=g({size:y,direction:"x",position:C??c?.pageX??0,minSize:I,getMaxSize(){return o.clientWidth}}),h=g({size:N,direction:"y",position:P??c?.pageY??0,minSize:S,getMaxSize(){return o.clientHeight}});function d(e){const l=x(u.onMove(e)),k=x(h.onMove(e));let m=e.point;document.body.style.userSelect="none",q({onMove(p){l(p.pageX-m.pageX),k(p.pageY-m.pageY),m=p},onEnd(p){document.body.style.userSelect=""}})}n.div({...L,onPointerDown(e){a()||i.setIndex(-1)},willRemove(e){return e.classList.remove("ds-animate-appear"),e.classList.add("ds-animate-disappear"),A(300)},className:R(D,"ds-animate-appear absolute  overflow-hidden ds-window flex flex-col"),s_left(){return`${u.position()}px`},s_top(){return`${h.position()}px`},s_width(){return`${u.size()}px`},s_height(){return`${h.size()}px`},s_zIndex:i.getIndex,children(){n.div({className:"ds-titlebar",children(){n.div({className:"ds-titlebar__content",children(){n.span({className:"ds-titlebar__icon",children:_}),n.span({className:"ds-titlebar__title ",children:z})},onPointerDown(e){d({action:"move",point:e})}}),n.div({className:"ds-titlebar__controls",children(){W?.(),E||n.button({className:"ds-control bg-green-500/80 hover:bg-green-400 text-black text-xs",children:"□",title:"克隆",onClick(){const e=s(),l=b(e.panel);l.closeSet.add(()=>{v(t,l.closeIt),v(t,e.closeOther)}),t.push(l.closeIt),t.push(e.closeOther)}}),n.button({className:"ds-control bg-red-500/80 hover:bg-red-400 text-white",children:"×",title:"关闭",onClick:i.closeIt})}})}}),M(),n.div({className:"ds-resize-handle ds-resize-handle--se",onPointerDown(e){d({action:"drag",point:e,bottom:!0,right:!0})}}),n.div({className:"ds-resize-handle ds-resize-handle--s",onPointerDown(e){d({action:"drag",point:e,bottom:!0})}}),n.div({className:"ds-resize-handle ds-resize-handle--e",onPointerDown(e){d({action:"drag",point:e,right:!0})}})}})}}}),K=w`custom-scrollbar min-h-0 overflow-y-auto`,Q=w`
                h-6 px-4 
                backdrop-blur-md 
                text-white text-sm 
                rounded-b-2xl shadow-inner`;export{G as cacheCreater,b as createWindow,K as customScrollcss,B as instanceWithCopy,f as lastClientEvnet,J as panel,F as renderWindows,Q as statusBarCss};
