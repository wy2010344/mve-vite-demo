import{f as l}from"./chunk-LSEVNFON-G8OzWBoO.js";import{b as x,c as s,g as r,aq as c,O as H,m as S,bH as v,bz as $,i as d,G as C,d as L,bI as V}from"./index-BdTCZeBf.js";import u from"./hookMeasureHeight-ZPkx-NPi.js";import{e as w}from"./explain-Yn3lRy9J.js";import{m as y}from"./markdown-DrXMDjjS.js";import{dynamidHeight2 as E,forEachSub as I}from"./dynamicHeight-CeHAAKfO.js";import"./iconBase-C9j_FKPc.js";import"./index-D--gOgnP.js";function D(){w(()=>{y`
# 虚拟列表,自定义滚动

这个虚拟列表,每个item的高度不固定 未出现的高度依平均高度

自定义滚动,基于animateSignal动画,动画曲线是模仿flutter的Clamping算法,带有一定的弹性.
`});const h=x(1e3,e=>({id:e,color:l.color.rgb(),content:l.lorem.lines(),height:s(void 0)})),n=s(h),{getHeight:m,averageHeight:f}=E(n.get,function(e){return e.height.get()});r.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1",children(e){const i=s(0);u(e,()=>{i.set(e.clientHeight),c()});const g=H.hookGet("y",e,{maxScroll:S(()=>f()*n.get().length-i.get())}),{paddingBegin:p,subList:b}=v(()=>V(n.get(),g.get(),i.get(),m));r.div({s_transform(){return`translateY(${-g.get()}px)`},s_paddingTop(){return p()+"px"},children(){$(I(n.get,t=>t.id,b),function(t,o){t==0&&(console.log("init",`${t}-abc`),d(()=>{console.log("destroy",`${t}-abc`)}));const a=r.div({id:`key--${t}`,s_background(){return o.getValue().color},children(){C(()=>o.getValue().id+"--"+o.getIndex()),r.input({className:"daisy-input daisy-input-xs"}),L.p().renderTextContent(()=>o.getValue().content),t==0&&(console.log("initxx",`${t}-abc`),d(()=>{console.log("destroyxx",`${t}-abc`)}))}});u(a,function(){a.clientHeight&&(o.getValue().height.set(a.clientHeight),c())})})}})}})}export{D as default};
