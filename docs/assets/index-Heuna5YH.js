import{f as g}from"./chunk-LSEVNFON-G8OzWBoO.js";import{b as S,c as l,H as y,g as o,at as c,m as v,v as C,ak as F,am as H,aj as V,C as m,bI as L,bA as k,G as _,bJ as w}from"./index-DSI5ljsY.js";import{e as E}from"./explain-BMUvdocQ.js";import{m as M}from"./markdown-Bbieit4V.js";import N from"./hookMeasureHeight-Dor_OfE7.js";import{forEachSub as P}from"./dynamicHeight-DTwhw47W.js";import"./iconBase-C0LW6USm.js";import"./index-B9iVH0Zi.js";function B(){E(()=>{M`
# 虚拟列表,自定义滚动

这个虚拟列表,需要每条记录提供自己的高度,这个高度是预先于dom渲染存在的.

自定义滚动,基于animateSignal动画,动画曲线是模仿flutter的Clamping算法,带有一定的弹性.
`});const d=S(1e3,n=>({id:n,color:g.color.rgb(),height:g.number.int({min:30,max:80})})),a=l(d),r=y(0),u=m.get(),h=m.get(100);o.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1",children(n){const s=l(0);N(n,()=>{s.set(n.clientHeight),c()});const f=v(()=>{const e=a.get();let t=0;for(let i=0;i<e.length;i++)t=t+e[i].height;return t});n.addEventListener("pointerdown",e=>{r.stop(),C(F.from(e,{getPage:H,scrollDelta(t,i){r.set(r.get()+t),c()},onFinish(t){return V({scroll:r,frictional:u.getFromVelocity(t),containerSize:s.get(),contentSize:f(),edgeConfig(i){return h.getFromVelocity(i).animationConfig()}})}}))});function p(e){return e.height}const{paddingBegin:b,subList:x}=L(()=>w(a.get(),r.get(),s.get(),p));o.div({s_transform(){return`translateY(${-r.get()}px)`},s_paddingTop(){return b()+"px"},children(){k(P(a.get,e=>e.id,x),function(e,t){o.div({className:"flex items-center justify-center min-h-0",s_height(){return t.getValue().height+"px"},s_maxHeight(){return t.getValue().height+"px"},s_background(){return t.getValue().color},children(){_(()=>t.getValue().id+"--"),o.input({className:"daisy-input daisy-input-xs"})}})})}})}})}export{B as default};
