import{c as a,b as g,f as e,m as y}from"./index-Dxu4lnfn.js";import{panel as u}from"./WindowManager-BeVA7m6z.js";import"./index-DTVsSBOz.js";import"./index-CT0uQ99y.js";import"./canvasRender-CK3mhhFQ.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-D2NKKKQE.js";import"./iconBase-BD6ICo6R.js";import"./index-BxY9dVzG.js";async function b(o,r){if(await new Promise(n=>setTimeout(n,1e3+Math.random()*500)),Math.random()<.1)throw new Error("ç½‘ç»œè¯·æ±‚å¤±è´¥");return Array.from({length:r},(n,i)=>{const l=o*r+i;return{id:l,title:`å¸–å­æ ‡é¢˜ ${l+1}`,author:`ç”¨æˆ·${Math.floor(Math.random()*1e3)}`,content:`è¿™æ˜¯ç¬¬ ${l+1} æ¡å¸–å­çš„å†…å®¹ã€‚${Math.random()>.5?"ç®€çŸ­å†…å®¹ã€‚":"è¿™æ˜¯ä¸€æ®µè¾ƒé•¿çš„å†…å®¹ï¼Œç”¨æ¥æ¨¡æ‹ŸçœŸå®çš„ç¤¾äº¤åª’ä½“å¸–å­ã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µï¼Œæ¯”å¦‚ç½‘ç»œå¤±è´¥ã€æ•°æ®ä¸ºç©ºã€æ»šåŠ¨åˆ°åº•éƒ¨ç­‰ã€‚"}`,likes:Math.floor(Math.random()*1e3),comments:Math.floor(Math.random()*100),timestamp:new Date(Date.now()-Math.random()*864e5*7).toLocaleString()}})}const C=u(function(o){return{title:"æ— é™æ»šåŠ¨åŠ è½½",icon:"â™¾ï¸",width:650,height:750,children(){const r=a([]),n=a(0),i=a(!1),l=a(!0),s=a(null),h=10;let d;async function c(){if(!(i.get()||!l.get())){i.set(!0),s.set(null);try{const t=await b(n.get(),h);t.length<h&&l.set(!1),r.set([...r.get(),...t]),n.set(n.get()+1)}catch(t){s.set(t.message)}finally{i.set(!1)}}}function m(){if(!d)return;const{scrollTop:t,scrollHeight:p,clientHeight:f}=d;p-t-f<100&&c()}g(()=>{c()});function x(){r.set([]),n.set(0),l.set(!0),s.set(null),c()}e.div({className:"w-full h-full flex flex-col bg-gray-100",children(){e.div({className:"h-14 bg-white border-b border-gray-200 flex items-center px-4 gap-4",children(){e.h2({className:"text-lg font-bold text-gray-800",childrenType:"text",children:"ç¤¾äº¤åŠ¨æ€"}),e.div({className:"flex-1"}),e.div({className:"text-sm text-gray-600",children(){e.span({childrenType:"text",children:"å·²åŠ è½½: "}),e.span({className:"font-bold text-blue-600",childrenType:"text",children(){return`${r.get().length}`}}),e.span({className:"ml-2",childrenType:"text",children:"æ¡"})}}),e.button({className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",childrenType:"text",children:"ğŸ”„ é‡ç½®",onClick:x})}}),d=y.div({className:"flex-1 overflow-auto",onScroll:m}).render(()=>{e.div({className:"max-w-2xl mx-auto p-4 space-y-4",children(){e.div({s_display(){return r.get().length===0&&!i.get()&&!s.get()?"flex":"none"},className:"flex flex-col items-center justify-center py-20",children(){e.div({className:"text-6xl mb-4",childrenType:"text",children:"ğŸ“­"}),e.div({className:"text-gray-500",childrenType:"text",children:"æš‚æ— åŠ¨æ€"})}}),r.get().forEach(t=>{e.div({className:"bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-shadow",children(){e.div({className:"flex items-center gap-3 mb-3",children(){e.div({className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-bold",childrenType:"text",children:t.author[0]}),e.div({className:"flex-1",children(){e.div({className:"font-semibold text-gray-900",childrenType:"text",children:t.author}),e.div({className:"text-xs text-gray-600",childrenType:"text",children:t.timestamp})}})}}),e.div({className:"mb-3",children(){e.h3({className:"font-semibold text-gray-900 mb-2",childrenType:"text",children:t.title}),e.p({className:"text-gray-700 text-sm",childrenType:"text",children:t.content})}}),e.div({className:"flex items-center gap-6 text-sm text-gray-600",children(){e.button({className:"flex items-center gap-1 text-gray-600 hover:text-red-500 transition-colors",children(){e.span({childrenType:"text",children:"â¤ï¸"}),e.span({childrenType:"text",children:`${t.likes}`})}}),e.button({className:"flex items-center gap-1 text-gray-600 hover:text-blue-500 transition-colors",children(){e.span({childrenType:"text",children:"ğŸ’¬"}),e.span({childrenType:"text",children:`${t.comments}`})}}),e.button({className:"flex items-center gap-1 text-gray-600 hover:text-green-500 transition-colors",children(){e.span({childrenType:"text",children:"ğŸ”—"}),e.span({childrenType:"text",children:"åˆ†äº«"})}})}})}})}),e.div({s_display(){return i.get()?"flex":"none"},className:"flex flex-col items-center justify-center py-8",children(){e.div({className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-2"}),e.div({className:"text-gray-500 text-sm",childrenType:"text",children:"åŠ è½½ä¸­..."})}}),e.div({s_display(){return s.get()?"flex":"none"},className:"flex flex-col items-center justify-center py-8",children(){e.div({className:"text-4xl mb-2",childrenType:"text",children:"âš ï¸"}),e.div({className:"text-red-500 mb-3",childrenType:"text",children(){return s.get()||""}}),e.button({className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",childrenType:"text",children:"é‡è¯•",onClick:c})}}),e.div({s_display(){return!l.get()&&r.get().length>0?"flex":"none"},className:"flex flex-col items-center justify-center py-8 text-gray-400",children(){e.div({className:"text-2xl mb-2",childrenType:"text",children:"ğŸ“„"}),e.div({className:"text-sm",childrenType:"text",children:"æ²¡æœ‰æ›´å¤šå†…å®¹äº†"})}})}})})}})}}});export{C as InfiniteScrollApp};
