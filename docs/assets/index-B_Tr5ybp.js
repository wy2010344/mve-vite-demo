import{f as c}from"./chunk-LSEVNFON-G8OzWBoO.js";import{b as y,c as g,H as C,g as a,at as l,v as x,ak as F,am as H,aj as V,C as d,bI as L,bA as k,G as w,d as E,bJ as M}from"./index-DSI5ljsY.js";import m from"./hookMeasureHeight-Dor_OfE7.js";import{e as P}from"./explain-BMUvdocQ.js";import{m as T}from"./markdown-Bbieit4V.js";import{dynamidHeight2 as Y,forEachSub as _}from"./dynamicHeight-DTwhw47W.js";import"./iconBase-C0LW6USm.js";import"./index-B9iVH0Zi.js";function D(){P(()=>{T`
# 虚拟列表,自定义滚动

这个虚拟列表,每个item的高度不固定 未出现的高度依平均高度

自定义滚动,基于animateSignal动画,动画曲线是模仿flutter的Clamping算法,带有一定的弹性.
`});const u=y(1e3,e=>({id:e,color:c.color.rgb(),content:c.lorem.lines(),height:g(void 0)})),i=g(u),n=C(0),h=d.get(),p=d.get(100),{getHeight:f,averageHeight:b}=Y(i.get,function(e){return e.height.get()});a.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1",children(e){const s=g(0);m(e,()=>{s.set(e.clientHeight),l()}),e.addEventListener("pointerdown",o=>{n.stop(),x(F.from(o,{getPage:H,scrollDelta(t,r){n.set(n.get()+t),l()},onFinish(t){return V({scroll:n,frictional:h.getFromVelocity(t),containerSize:s.get(),contentSize:b()*i.get().length,edgeConfig(r){return p.getFromVelocity(r).animationConfig()}})}}))});const{paddingBegin:v,subList:S}=L(()=>M(i.get(),n.get(),s.get(),f));a.div({s_transform(){return`translateY(${-n.get()}px)`},s_paddingTop(){return v()+"px"},children(){k(_(i.get,o=>o.id,S),function(o,t){const r=a.div({s_background(){return t.getValue().color},children(){w(()=>t.getValue().id+"--"),a.input({className:"daisy-input daisy-input-xs"}),E.p().renderTextContent(()=>t.getValue().content)}});m(r,function(){t.getValue().height.set(r.clientHeight),l()})})}})}})}export{D as default};
