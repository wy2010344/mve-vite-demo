import{z as T,c as A,aS as g}from"./index-BeB-7kZt.js";import{ArrayRender as E}from"./xmlRender-BS0y7sRj.js";import k from"./task-BH20Esm3.js";import C from"./indicator-gbWL7OmZ.js";import D from"./columnBase-3zYH6-Kh.js";import{TaskContext as x,ColumnContext as N}from"./context-8-XQ2BZx.js";import"./cardBase-CBJv82-P.js";import"./mve-icon-BrTsJoJp.js";import"./index-Cw7y7Wej.js";import"./iconBase-loNxg2Lh.js";import"./type-DRAuYFMP.js";import"./chunk-KZPPZA2C-rvBpA5M9.js";function z({title:I,type:a}){const{dragId:f,tasks:n}=x.consume(),u=T(function(){return n.get().filter(e=>e.type==a&&e.id!=f.get())}),d=A(void 0);N.provide({type:a,getActive:d.get});function p(e){const i=Array.from(document.querySelectorAll(`[data-column="${a}"]`)),t=100,o=i.reduce((r,m)=>{const v=m.getBoundingClientRect(),l=e-(v.top+t/2);return l<0&&l>r.offset?{offset:l,element:m}:r},{offset:Number.NEGATIVE_INFINITY,element:i.at(-1)}).element?.dataset.before;return d.get()!=o&&d.set(o),o}return g.createElement(D,{type:a,title:I,tasks:n,getTasks:u,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move",p(e.clientY)},onDragLeave:e=>{d.set(void 0)},onDrop:e=>{const i=p(e.clientY),t=f.get();if(i!=t){const s=n.get().find(r=>r.id==t),o=s.type==a?s:{...s,type:a},c=n.get().filter(r=>r.id!=t);if(i=="")c.push(o);else{const r=c.findIndex(m=>m.id==i);c.splice(r,0,o)}n.set(c)}d.set(void 0)}},g.createElement(E,{getArray:u,getKey:e=>e.id,render:function(e,i,t){k({getTask:e,onDelete(s){n.set(n.get().filter(o=>o.id!=t))},onDragStart(s){f.set(t)}})}}),g.createElement(C,null))}export{z as default};
