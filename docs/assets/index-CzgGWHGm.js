import{c as i,l as W,k as v,m as u,n as X,o as Y,p as I,q as l,t as C,u as m,s as D,v as $,g as B,w as P}from"./index-CnmbM-dR.js";function G(){const x=i(0),w=i(0),c=i(!1),L=i(1),R=i(80),q=i(120),h=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#26de81","#fd79a8","#fdcb6e","#6c5ce7"];function S(n,t,o){return{id:n,x:Math.random()*t,y:Math.random()*o,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,size:Math.random()*3+1,color:h[Math.floor(Math.random()*h.length)],opacity:Math.random()*.8+.2,life:0,maxLife:Math.random()*200+100}}function A(n,t){return v(R.get(),o=>S(o,n,t))}const s=i(A(1e3,700));function F(n,t){const o=s.get(),e=L.get(),r=c.get(),f=x.get(),d=w.get(),g=o.map(y=>{const a={...y};if(r){const b=f-a.x,M=d-a.y,p=Math.sqrt(b*b+M*M);if(p<150){const k=(150-p)/150*.02;a.vx+=b/p*k,a.vy+=M/p*k}}if(a.x+=a.vx*e,a.y+=a.vy*e,a.x<0&&(a.x=n),a.x>n&&(a.x=0),a.y<0&&(a.y=t),a.y>t&&(a.y=0),a.life+=1,a.life>a.maxLife)return S(a.id,n,t);const T=a.life/a.maxLife;return a.opacity=Math.sin(T*Math.PI)*.8+.2,a});s.set(g)}function z(){const n=s.get(),t=q.get(),o=[];for(let e=0;e<n.length;e++)for(let r=e+1;r<n.length;r++){const f=n[e],d=n[r],g=f.x-d.x,y=f.y-d.y,a=Math.sqrt(g*g+y*y);a<t&&o.push({from:f,to:d,distance:a,opacity:(1-a/t)*.3})}return o}W({width:1e3,height:700,className:"border border-gray-300 rounded-lg shadow-lg",data_canvasContainer:!0,onMouseMove:n=>{x.set(n.offsetX),w.set(n.offsetY)},onMouseEnter:()=>c.set(!0),onMouseLeave:()=>c.set(!1),onClick:n=>{console.log("click",n);const t=v(10,o=>({id:Date.now()+o,x:n.offsetX,y:n.offsetY,vx:(Math.random()-.5)*8,vy:(Math.random()-.5)*8,size:Math.random()*4+2,color:h[Math.floor(Math.random()*h.length)],opacity:1,life:0,maxLife:60}));s.set([...s.get(),...t])}},({canvas:n})=>{u({x:0,y:0,draw(t){const o=t.createLinearGradient(0,0,0,700);o.addColorStop(0,"#0f0f23"),o.addColorStop(.5,"#1a1a2e"),o.addColorStop(1,"#16213e"),t.fillStyle=o,t.fillRect(0,0,1e3,700)}}),u({x:0,y:0,draw(t){z().forEach(e=>{t.beginPath(),t.moveTo(e.from.x,e.from.y),t.lineTo(e.to.x,e.to.y),t.strokeStyle=`rgba(255, 255, 255, ${e.opacity})`,t.lineWidth=.5,t.stroke()})}}),X(s.get,t=>t.id,function(t){u({x:()=>t().x-t().size,y:()=>t().y-t().size,draw(o){const e=t(),r=o.createRadialGradient(e.size,e.size,0,e.size,e.size,e.size*3);r.addColorStop(0,e.color+Math.floor(e.opacity*255).toString(16).padStart(2,"0")),r.addColorStop(.5,e.color+"20"),r.addColorStop(1,"transparent"),o.fillStyle=r,o.fillRect(0,0,e.size*6,e.size*6),o.beginPath(),o.arc(e.size,e.size,e.size,0,Math.PI*2),o.fillStyle=e.color,o.globalAlpha=e.opacity,o.fill(),o.globalAlpha=1}})}),Y(c.get,function(){u({x:()=>x.get()-30,y:()=>w.get()-30,draw(t){t.beginPath(),t.arc(30,30,25,0,Math.PI*2),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=2,t.setLineDash([5,5]),t.stroke(),t.setLineDash([])}})}),I({x:20,y:20,layout(t){return D({direction:"y",alignItems:"start"})},draw(t,o){C("rgba(0, 0, 0, 0.7)"),m(1,"rgba(255, 255, 255, 0.3)")},children(){l({config:{text:"🌟 粒子星空控制台",fontSize:"16px",fontWeight:"bold"},drawInfo:{style:"white"}}),l({config(){return{text:`粒子数量: ${s.get().length}`,fontSize:"12px"}},drawInfo:{style:"#4ecdc4"}}),l({config(){return{text:`连接数量: ${z().length}`,fontSize:"12px"}},drawInfo:{style:"#45b7d1"}}),l({config:{text:"💡 移动鼠标吸引粒子",fontSize:"11px"},drawInfo:{style:"#feca57"}}),l({config:{text:"🎆 点击创建爆炸效果",fontSize:"11px"},drawInfo:{style:"#ff9ff3"}})}}),I({x:800,y:20,paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,layout(t){return D({direction:"x",gap:10,alignItems:"center"})},draw(t,o){C("rgba(0, 0, 0, 0.7)"),m(1,"rgba(255, 255, 255, 0.3)")},children(){l({config:{text:"⚡ 性能监控",fontSize:"14px",fontWeight:"bold"},drawInfo:{style:"white"},draw(t,o,e){m(1,"blue"),P()}}),l({config:{text:"FPS: ~60",fontSize:"12px"},drawInfo:{style:"#26de81"},draw(t,o,e){t.textBaseline="top",m(1,"blue"),P()}})}}),$(B(function(){F(n.width,n.height)}))},{beforeDraw(n){n.clearRect(0,0,1e3,700)}})}export{G as default};
