var b=Object.defineProperty;var h=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var a=(e,t,r)=>h(e,typeof t!="symbol"?t+"":t,r);import{bx as w,by as c,aM as $}from"./index-DzjyJcX9.js";import{K as y}from"./kanren-DfUmp-DM.js";function g(e,t){return e instanceof o?t?e.list.slice():e.list:[e]}class o{constructor(t){this.list=t}static from(t,r){const l=g(t,!0);return g(r).forEach(m=>{l.find(p=>s(p,m))||(w(l,p=>s(m,p)),l.push(m))}),o.listToAllMayType(l)}static listToAllMayType(t){return t.length>1?new o(t):t.length==1?t[0]:n.empty}}const k=Object.freeze(Object.defineProperty({__proto__:null,Union:o,unionToList:g},Symbol.toStringTag,{value:"Module"})),i=class i{constructor(t){this.flag=t}};a(i,"all",new i("all")),a(i,"string",new i("string")),a(i,"number",new i("number")),a(i,"empty",new i("empty")),a(i,"symbol",new i("symbol"));let n=i;class f{constructor(t,r,l){this.arg=t,this.out=r,this.apply=l}}function u(e){if(e instanceof n){if(e==n.all)return"All";if(e==n.number)return"Number";if(e==n.string)return"String";if(e==n.empty)return"Empty";if(e==n.symbol)return"Symbol";throw"未定义"}else{if(typeof e=="number")return e+"";if(typeof e=="string")return e;if(e instanceof o)return`(${e.list.map(u).join(" | ")})`;if(e instanceof y)return`(${u(e.left)+" + "+u(e.right)})`;if(e instanceof c)return`(${e.key}:${u(e.value)}${e.rest?`& ${u(e.rest)}`:""})`;if(e instanceof f)return`(${u(e.arg)} => ${u(e.out)})`;if(typeof e=="symbol")return`#${e.description}#`;throw`unkonwn type ${e}`}}function d(e){let t;for(let r in e)t=new c(r,e[r],t);return t}const S=d({Empty:n.empty,All:n.all,String:n.string,Number:n.number,quote:new f(n.all,n.all,$),plus:new f(n.number,n.number,e=>new f(n.number,n.number,function(t){return typeof e=="number"&&typeof t=="number"?e+t:"number"}))});function s(e,t){if(t==e||t==n.empty)return!0;if(t instanceof o)return t.list.every(r=>s(e,r));if(e instanceof n)return e.flag=="all"?!0:e.flag=="string"?typeof t=="string":e.flag=="number"?typeof t=="number":e.flag=="symbol"?typeof t=="symbol":!1;if(e instanceof o)return e.list.some(r=>s(r,t));if(e instanceof f){if(t instanceof f&&s(t.arg,e.arg)){const r=t.apply(e.arg);return s(e.out,r)}return!1}if(e instanceof y)return t instanceof y?s(e.left,t.left)&&s(e.right,t.right):!1;if(e instanceof c){if(t instanceof c){let r=e;for(;r;){const l=t.get(r.key);if(!l||!s(r.value,l.value))return!1;r=r.rest}return!0}return!1}return!1}let T;T("9");let v;v("8");const P=Object.freeze(Object.defineProperty({__proto__:null,Any:n,Fun:f,allMayTypeToString:u,include:s,topScope:S},Symbol.toStringTag,{value:"Module"}));export{n as A,f as F,o as U,u as a,k as b,P as c,s as i,S as t,g as u};
