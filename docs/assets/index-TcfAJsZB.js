import{au as D,c as g,n as N,e as m,aq as T,av as d,j as b,J as h,as as A,p as L,b as l,q as x,a3 as w,a9 as M,w as P}from"./index-DQyCy5E-.js";import{m as K,d as q,e as C,c as E,i as j,f as z,a as B,t as I}from"./forceLayout-CAGwU0f4.js";import{r as J}from"./onlyMobile-CStGrFla.js";function _(){J(function({width:s,height:a}){const f=D(()=>{const e=Array.from({length:400},(r,o)=>({index:o})),t=[];for(let r=0;r<20;++r)for(let o=0;o<20;++o)r>0&&t.push({source:(r-1)*20+o,target:r*20+o}),o>0&&t.push({source:r*20+(o-1),target:r*20+o});return{nodes:e,links:t}}),k=g(f.nodes),S=g(f.links),y=g(void 0),i=N(n=>K({nodes:(n==null?void 0:n.nodes)||m,links:(n==null?void 0:n.links)||m,fromLinks:S.get(),fromNodes:k.get(),createForceNode(e,t,r){return q(e,2,t,E,C)},getNodeKey(e){return e.index},getSorceKey(e){return e.source},getTargetKey(e){return e.target},createFromKey(e){return{index:e}}})),c=T(j()),v=z({getStrength:d(1),getDistance:d(20),iterations:10}),p=B({getStrenth:d(-30)}),u=2;function F(){const n=i();I(u,c,n.nodes,e=>{v(n.links,u,e),p(n.nodes,u,e)})}b(h(()=>{F(),A()})),L({className:"touch-none",width:s,height:a},function({canvas:n}){l(()=>i().links,e=>{x({x(){return e.source.x.dSignal.get()+s()/2},y(){return e.source.y.dSignal.get()+a()/2},withPath:!0,draw(t,r){r.moveTo(0,0),r.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),w(1,"#aaa")}})}),l(()=>i().nodes,e=>{x({x(){return e.x.dSignal.get()+s()/2},y(){return e.y.dSignal.get()+a()/2},onPointerDown(t){c.alphaTarget=.3,y.set(e),P({onMove(r){e.x.f=r.offsetX-s()/2,e.y.f=r.offsetY-a()/2},onEnd(r){c.alphaTarget=0,e.x.f=void 0,e.y.f=void 0,y.set(void 0)}},{element:n})},withPath:!0,draw(t,r){r.arc(0,0,6,0,2*Math.PI),M("#000"),t.fillText(e.value.index+"",3,-3)}})})},{beforeDraw(n){}})})}export{_ as default};
