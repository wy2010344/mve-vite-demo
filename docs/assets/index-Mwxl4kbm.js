import{ap as F,c as d,m as N,e as l,al as T,aq as g,ah as b,am as h,an as w,i as A,a as m,l as x,p as L}from"./index-DzjyJcX9.js";import{m as M,c as P,e as K,d as q,i as C,f as E,a as z,t as B}from"./forceLayout-DSj8ewbb.js";import{r as I}from"./onlyMobile-BWWyyzDX.js";function _(){I(function({width:s,height:o}){const f=F(()=>{const e=Array.from({length:400},(r,n)=>({index:n})),a=[];for(let r=0;r<20;++r)for(let n=0;n<20;++n)r>0&&a.push({source:(r-1)*20+n,target:r*20+n}),n>0&&a.push({source:r*20+(n-1),target:r*20+n});return{nodes:e,links:a}}),p=d(f.nodes),k=d(f.links),y=d(void 0),i=N(t=>M({nodes:(t==null?void 0:t.nodes)||l,links:(t==null?void 0:t.links)||l,fromLinks:k.get(),fromNodes:p.get(),createForceNode(e,a,r){return P(e,2,a,q,K)},getNodeKey(e){return e.index},getSorceKey(e){return e.source},getTargetKey(e){return e.target},createFromKey(e){return{index:e}}})),c=T(C()),S=E({getStrength:g(1),getDistance:g(20),iterations:10}),v=z({getStrenth:g(-30)}),u=2;function D(){const t=i();B(u,c,t.nodes,e=>{S(t.links,u,e),v(t.nodes,u,e)})}b(h(()=>{D(),w()})),A({className:"touch-none",width:s,height:o},function({canvas:t}){m(()=>i().links,e=>{x({x(){return e.source.x.dSignal.get()+s()/2},y(){return e.source.y.dSignal.get()+o()/2},withPath:!0,draw(a,r){return r.moveTo(0,0),r.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),{operates:[{type:"stroke",style:"#aaa",width:1}]}}})}),m(()=>i().nodes,e=>{x({x(){return e.x.dSignal.get()+s()/2},y(){return e.y.dSignal.get()+o()/2},onPointerDown(a){c.alphaTarget=.3,y.set(e),L({onMove(r){e.x.f=r.offsetX-s()/2,e.y.f=r.offsetY-o()/2},onEnd(r){c.alphaTarget=0,e.x.f=void 0,e.y.f=void 0,y.set(void 0)}},t)},withPath:!0,draw(a,r){return r.arc(0,0,6,0,2*Math.PI),{operates:[{type:"fill",style:"#000"},{type:"draw",callback(n){n.fillText(e.value.index+"",3,-3)}}]}}})})},{beforeDraw(t){}})})}export{_ as default};
