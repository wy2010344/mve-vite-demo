import{k as g}from"./index-XVZQUbQ5.js";import{o as T,c as k}from"./index-Bn6QTqXa.js";import{ArrayRender as A}from"./xmlRender-eBDP6nR8.js";import E from"./task-Cx5hvzx4.js";import C from"./indicator-O_3QFLVL.js";import D from"./columnBase-MrowlwXW.js";import{TaskContext as x,ColumnContext as N}from"./context-Cn7Gc9_w.js";import"./canvasRender-DlxfwZGY.js";import"./_commonjsHelpers-CqkleIqs.js";import"./cardBase-BzPRqOuU.js";import"./mve-icon-2ZBqkA6T.js";import"./index-C2aBu1xv.js";import"./iconBase-UU481Axx.js";import"./type-DRAuYFMP.js";import"./chunk-KZPPZA2C-rvBpA5M9.js";function V({title:I,type:s}){const{dragId:f,tasks:n}=x.consume(),u=T(function(){return n.get().filter(t=>t.type==s&&t.id!=f.get())}),d=k(void 0);N.provide({type:s,getActive:d.get});function p(t){const i=Array.from(document.querySelectorAll(`[data-column="${s}"]`)),e=100,o=i.reduce((r,c)=>{const v=c.getBoundingClientRect(),l=t-(v.top+e/2);return l<0&&l>r.offset?{offset:l,element:c}:r},{offset:Number.NEGATIVE_INFINITY,element:i.at(-1)}).element?.dataset.before;return d.get()!=o&&d.set(o),o}return g.createElement(D,{type:s,title:I,tasks:n,getTasks:u,onDragOver:t=>{t.preventDefault(),t.dataTransfer.dropEffect="move",p(t.clientY)},onDragLeave:t=>{d.set(void 0)},onDrop:t=>{const i=p(t.clientY),e=f.get();if(i!=e){const a=n.get().find(r=>r.id==e),o=a.type==s?a:{...a,type:s},m=n.get().filter(r=>r.id!=e);if(i=="")m.push(o);else{const r=m.findIndex(c=>c.id==i);m.splice(r,0,o)}n.set(m)}d.set(void 0)}},g.createElement(A,{getArray:u,getKey:t=>t.id,render:function(t,i,e){E({getTask:t,onDelete(a){n.set(n.get().filter(o=>o.id!=e))},onDragStart(a){f.set(e)}})}}),g.createElement(C,null))}export{V as default};
