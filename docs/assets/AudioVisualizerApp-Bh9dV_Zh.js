import{c as x,b as I,f as h,m as $}from"./index-SfgOm-p3.js";import{panel as q}from"./WindowManager-CNIQp0k9.js";import"./index-BBmTqfCf.js";import"./index-PeN622_I.js";import"./canvasRender-DwJvwbpB-BWU3cVJm.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-DFXa7QPV.js";import"./iconBase-BQ1OgeWz.js";import"./index-BxY9dVzG.js";const B=["bars","wave","circular","particles"],j=q(function(R){return{title:"éŸ³é¢‘å¯è§†åŒ–",icon:"ğŸµ",width:800,height:600,children(){const u=x(!1),w=x("bars"),g=x(1.5),b=x("rainbow");let e,t,p,f,o,a,l;function M(){f=new AudioContext,o=f.createAnalyser(),o.fftSize=256,a=new Uint8Array(o.frequencyBinCount),l=f.createOscillator(),l.type="sine",l.frequency.value=440,l.connect(o),o.connect(f.destination)}function m(n,r,i){const c={rainbow:()=>`hsl(${n/r*360}, 100%, ${50+i/5}%)`,fire:()=>`hsl(${60-i/4}, 100%, ${50+i/5}%)`,ocean:()=>`hsl(${200+i/10}, 100%, ${50+i/5}%)`,neon:()=>`hsl(${n/r*360}, 100%, 50%)`};return c[b.get()]?.()||c.rainbow()}function T(){if(!t||!e||!o)return;o.getByteFrequencyData(a),t.fillStyle="rgba(0, 0, 0, 0.2)",t.fillRect(0,0,e.width,e.height);const n=e.width/a.length;a.forEach((r,i)=>{const c=r/255*e.height*g.get(),d=i*n,s=e.height-c;t.fillStyle=m(i,a.length,r),t.fillRect(d,s,n-2,c)})}function F(){if(!t||!e||!o)return;o.getByteTimeDomainData(a),t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(0,0,e.width,e.height),t.lineWidth=3,t.strokeStyle=m(0,1,128),t.beginPath();const n=e.width/a.length;let r=0;a.forEach((i,c)=>{const s=i/128*g.get()*e.height/2;c===0?t.moveTo(r,s):t.lineTo(r,s),r+=n}),t.lineTo(e.width,e.height/2),t.stroke()}function N(){if(!t||!e||!o)return;o.getByteFrequencyData(a),t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(0,0,e.width,e.height);const n=e.width/2,r=e.height/2,i=Math.min(n,r)*.5;a.forEach((c,d)=>{const s=d/a.length*Math.PI*2,y=c/255*i*g.get(),v=n+Math.cos(s)*i,S=r+Math.sin(s)*i,P=n+Math.cos(s)*(i+y),E=r+Math.sin(s)*(i+y);t.strokeStyle=m(d,a.length,c),t.lineWidth=2,t.beginPath(),t.moveTo(v,S),t.lineTo(P,E),t.stroke()})}function k(){if(!t||!e||!o)return;o.getByteFrequencyData(a),t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,e.width,e.height);const n=e.width/2,r=e.height/2;a.forEach((i,c)=>{if(i>50){const d=c/a.length*Math.PI*2,s=i/255*Math.min(n,r)*g.get(),y=n+Math.cos(d)*s,v=r+Math.sin(d)*s,S=i/255*10;t.fillStyle=m(c,a.length,i),t.beginPath(),t.arc(y,v,S,0,Math.PI*2),t.fill()}})}function A(){({bars:T,wave:F,circular:N,particles:k}[w.get()]||T)(),p=requestAnimationFrame(A)}function C(){u.get()?(l?.stop(),p&&cancelAnimationFrame(p),u.set(!1)):(f||M(),l=f.createOscillator(),l.type="sine",l.frequency.value=440+Math.random()*440,l.connect(o),l.start(),A(),u.set(!0))}return I(()=>(e&&(e.width=e.offsetWidth,e.height=e.offsetHeight,t=e.getContext("2d")),()=>{p&&cancelAnimationFrame(p),l&&l.stop(),f&&f.close()})),h.div({className:"w-full h-full flex flex-col bg-black",children(){h.div({className:"h-20 bg-gray-900 border-b border-gray-800 flex items-center px-6 gap-6",children(){h.button({className:"w-14 h-14 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 flex items-center justify-center text-2xl",onClick:C,childrenType:"text",children(){return u.get()?"â¸":"â–¶"}}),h.div({className:"flex gap-2",children(){B.forEach(n=>{h.button({className:"px-4 py-2 rounded text-sm capitalize",s_backgroundColor(){return w.get()===n?"#6366f1":"#374151"},s_color:"#fff",onClick(){w.set(n)},childrenType:"text",children:n})})}}),h.div({className:"flex items-center gap-2",children(){h.span({className:"text-white text-sm",childrenType:"text",children:"çµæ•åº¦:"}),h.input({type:"range",min:"0.5",max:"3",step:"0.1",value(){return`${g.get()}`},onInput(n){g.set(parseFloat(n.target.value))},className:"w-32"})}}),h.select({className:"px-3 py-2 bg-gray-800 text-white rounded",value(){return b.get()},onInput(n){b.set(n.target.value)},children(){["rainbow","fire","ocean","neon"].forEach(n=>{h.option({value:n,childrenType:"text",children:n.charAt(0).toUpperCase()+n.slice(1)})})}})}}),e=$.canvas({className:"flex-1"}).render(),h.div({className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white/30 text-lg pointer-events-none",s_opacity(){return u.get()?0:1},s_transition:"opacity 0.5s",childrenType:"text",children:"ç‚¹å‡»æ’­æ”¾æŒ‰é’®å¼€å§‹éŸ³é¢‘å¯è§†åŒ–"})}})}}});export{j as AudioVisualizerApp};
