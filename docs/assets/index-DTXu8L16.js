import{a3 as F,c as g,o as D,e as m,$ as N,a4 as f,k as T,a as b,a1 as w,r as y,t as A,f as L}from"./index-SfgOm-p3.js";import{r as M,h as x,d as P,c as K}from"./canvasRender-DwJvwbpB-BWU3cVJm.js";import{m as $,d as _,e as C,c as E,i as q,f as z,a as B,t as I}from"./forceLayout-Da0svs-z.js";import{r as R}from"./onlyMobile-BKNU6acK.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-PeN622_I.js";function O(){R(function({width:s,height:a}){const u=F(()=>{const e=Array.from({length:400},(r,o)=>({index:o})),n=[];for(let r=0;r<20;++r)for(let o=0;o<20;++o)r>0&&n.push({source:(r-1)*20+o,target:r*20+o}),o>0&&n.push({source:r*20+(o-1),target:r*20+o});return{nodes:e,links:n}}),k=g(u.nodes),h=g(u.links),l=g(void 0),i=D(t=>$({nodes:t?.nodes||m,links:t?.links||m,fromLinks:h.get(),fromNodes:k.get(),createForceNode(e,n,r){return _(e,2,n,E,C)},getNodeKey(e){return e.index},getSorceKey(e){return e.source},getTargetKey(e){return e.target},createFromKey(e){return{index:e}}})),c=N(q()),p=z({getStrength:f(1),getDistance:f(20),iterations:10}),S=B({getStrenth:f(-30)}),d=2;function v(){const t=i();I(d,c,t.nodes,e=>{p(t.links,d,e),S(t.nodes,d,e)})}T(b(()=>{v(),w()})),M(L.canvas({className:"touch-none",s_width(){return`${s()}px`},s_height(){return`${a()}px`}}),function({canvas:t}){y(()=>i().links,e=>{x({x:e.source.x.dSignal.get,y:e.source.y.dSignal.get,withPath:!0,draw({ctx:n,path:r}){r.moveTo(0,0),r.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),P(1,"#aaa")}})}),y(()=>i().nodes,e=>{x({x:e.x.dSignal.get,y:e.y.dSignal.get,onPointerDown(n){c.alphaTarget=.3,l.set(e),A({onMove(r){e.x.f=r.offsetX-s()/2,e.y.f=r.offsetY-a()/2},onEnd(r){c.alphaTarget=0,e.x.f=void 0,e.y.f=void 0,l.set(void 0)}},{element:t})},withPath:!0,draw(n){n.path.arc(0,0,6,0,2*Math.PI),K("#000"),n.ctx.fillText(`${e.value.index}`,3,-3)}})})},{beforeDraw(t){t.translate(s()/2,a()/2)}})})}export{O as default};
