import{f as h}from"./chunk-LSEVNFON-G8OzWBoO.js";import{aL as F,c,A as H,f as g,an as d,m as L,p as V,Q as w,R as k,U as E,C as f,bW as I,bp as M,aO as P,d as T,bX as W}from"./index-DzjyJcX9.js";import p from"./hookMeasureHeight-BSlWogcs.js";import{e as Y}from"./explain-55b8_AdP.js";import{m as _}from"./markdown-CMudKybz.js";import"./iconBase-DKriBYi6.js";import"./index-DFRpaVUm.js";function Q(){Y(()=>{_`
# 虚拟列表,自定义滚动

这个虚拟列表,每个item的高度不固定 未出现的高度依平均高度

自定义滚动,基于animateSignal动画,动画曲线是模仿flutter的Clamping算法,带有一定的弹性.
`});const b=F(1e3,a=>({id:a,color:h.color.rgb(),content:h.lorem.lines(),height:c(void 0)})),s=c(b),r=H(0),y=f.get(),v=f.get(100);g.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1",children(a){const l=c(0);p(a,()=>{l.set(a.clientHeight),d()});const u=L(()=>{const n=s.get();let e=0,t=0;for(let o=0;o<n.length;o++){const i=n[o].height.get();typeof i=="number"&&(e=e+i,t++)}return t?e/t:100});a.addEventListener("pointerdown",n=>{r.stop(),V(w.from(n,{getPage:k,scrollDelta(e,t){r.set(r.get()+e),d()},onFinish(e){return E({scroll:r,frictional:y.getFromVelocity(e),containerSize:l.get(),contentSize:u()*s.get().length,edgeConfig(t){return v.getFromVelocity(t).animationConfig()}})}}))});function x(n){const e=n.height.get();return typeof e=="number"?e:u()}const{paddingBegin:S,subList:C}=I(()=>W(s.get(),r.get(),l.get(),x));g.div({s_transform(){return`translateY(${-r.get()}px)`},s_paddingTop(){return S()+"px"},children(){M(function(n){const e=s.get(),[t,o]=C();console.log("range",t,o);for(let i=t;i<o;i++){const m=e[i];n(m.id,m)}},function(n,e){const t=g.div({s_background(){return e.getValue().color},children(){P(()=>e.getValue().id+"--"),g.input({className:"daisy-input daisy-input-xs"}),T.p().renderTextContent(()=>e.getValue().content)}});p(t,function(){e.getValue().height.set(t.clientHeight),d()})})}})}})}export{Q as default};
