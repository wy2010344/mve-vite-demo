import{z as T,c as A,aO as l}from"./index-BiAKiJb6.js";import{ArrayRender as E}from"./xmlRender-Cf3-X-tL.js";import k from"./task-VTpfoQ54.js";import x from"./indicator-BsMCYD9x.js";import C from"./columnBase-CZeMNCzH.js";import{TaskContext as D,ColumnContext as N}from"./context-Cgedm1kO.js";import"./cardBase-C6a53hfm.js";import"./mve-icon-DCWotxJD.js";import"./index-DZxvByzS.js";import"./iconBase-CduQK-mk.js";import"./type-DRAuYFMP.js";import"./chunk-KZPPZA2C-rvBpA5M9.js";function z({title:I,type:a}){const{dragId:g,tasks:n}=D.consume(),u=T(function(){return n.get().filter(e=>e.type==a)}),d=A(void 0);N.provide({type:a,getActive:d.get});function p(e){const i=Array.from(document.querySelectorAll(`[data-column="${a}"]`)),t=100,o=i.reduce((r,m)=>{const v=m.getBoundingClientRect(),f=e-(v.top+t/2);return f<0&&f>r.offset?{offset:f,element:m}:r},{offset:Number.NEGATIVE_INFINITY,element:i.at(-1)}).element?.dataset.before;return d.get()!=o&&d.set(o),o}return l.createElement(C,{type:a,title:I,tasks:n,getTasks:u,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move",p(e.clientY)},onDragLeave:e=>{d.set(void 0)},onDrop:e=>{const i=p(e.clientY),t=g.get();if(i!=t){const s=n.get().find(r=>r.id==t),o=s.type==a?s:{...s,type:a},c=n.get().filter(r=>r.id!=t);if(i=="")c.push(o);else{const r=c.findIndex(m=>m.id==i);c.splice(r,0,o)}n.set(c)}d.set(void 0)}},l.createElement(E,{getArray:u,getKey:e=>e.id,render:function(e,i,t){k({getTask:e,onDelete(s){n.set(n.get().filter(o=>o.id!=t))},onDragStart(s){g.set(t)}})}}),l.createElement(x,null))}export{z as default};
