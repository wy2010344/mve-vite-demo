import{f as m}from"./chunk-KZPPZA2C-rvBpA5M9.js";import{c as b,o as h,g as $,bu as z,h as x,f as t,r as E,an as w,a8 as P,a as S,b as y,bv as k,bw as A}from"./index-SfgOm-p3.js";const L=""+new URL("center-empty-eAu-yY-Z.png",import.meta.url).href,I=""+new URL("op-button-E0zflIeG.png",import.meta.url).href,R=""+new URL("center-arrow-7u2mPIyt.png",import.meta.url).href;function B(){const s=b(6),a=h(()=>$(s.get(),e=>({id:e,color:m.color.rgb(),amount:m.number.int(),symbol:m.animal.cat(),img:m.image.avatar()}))),l=h(()=>{const e=_(a(),r=>1);return D(e,r=>r.color)}),u=b(0),n=b(void 0),o=h(()=>d/a().length);function g(e){n.set(e);const r=(a.length-e.index)*o()-o()/2;T(r+10*d)}function p(){const e=n.get();e&&alert(`中奖为${a()[e.index].amount}`)}function f(){C()&&(u.set(0),setTimeout(()=>{const e=Math.floor(Math.random()*a.length);g({index:e})},2e3))}const{beginDraw:C,drawValue:v,onDrawEffect:N,setDistance:T}=z({beginConfig:k(200,1),endConfig:A(1),value:u,cycle:d,onFinish:p});x(v,function(e){if(e){const r=N(),c=S(function(i){r(i,c)});return c}}),t.div({className:"relative",children(){t.div({className:"absolute right-0 top-0",children(){const e=t.input({type:"range",min:2,max:9,value:s.get,step:1,onInput(r){s.set(Number(e.value))}})}}),t.img({className:"mx-auto",src:L,alt:"center-empty"}),t.div({className:"absolute w-[525px] h-[525px] left-[50%] translate-x-[-50%] top-[70px]",children(){t.div({className:"absolute inset-0 rounded-[50%]",s_rotate(){return`${u.get()+180}deg`},s_background:l,children(){E(a,function(c,i){t.div({className:`prize absolute top-0  h-[50%] 
    rotate-[var(--angel)] origin-[50%_bottom]
    left-[50%] translate-x-[-50%]`,css_angel(){return`${i()*o()+o()/2}deg`},children(){t.div({children(){w(c.amount)}}),t.div({children(){w(c.symbol)}})}})})}});let e=0;const r=P(0);x(u.get,c=>{const i=c%o();i>e&&i<o()/2?y(()=>{r.set(i)}):y(()=>{i>r.get()&&r.set(i),r.animateTo(0)}),e=i}),t.div({className:"arrow absolute left-[50%] translate-x-[-50%] top-[50%] translate-y-[-50%]",s_rotate(){return`${r.get()}deg`},children(){t.img({src:R})}})}}),t.button({className:"block mx-auto group relative",onClick:f,disabled:v,children(){t.img({src:I,className:"transition-all group-active:scale-y-50 origin-bottom"}),t.div({className:`absolute inset-0 flex items-start pt-[30px] justify-center text-white text-4xl
        transition-all group-active:scale-y-50 origin-bottom`,childrenType:"text",children:"Click"})}})}})}const d=360;function _(s,a){const l=s.reduce((n,o)=>n+a(o),0);return s.reduce((n,o)=>{const g=n.reduce((p,f)=>p+f.percent,0);return n.push({data:o,percent:a(o)/l,beforePercent:g}),n},[])}function D(s,a){const l=[];return s.forEach(n=>{l.push(`${a(n.data)} ${n.beforePercent*d}deg ${(n.beforePercent+n.percent)*d}deg`)}),`conic-gradient(${l.join(", ")})`}export{B as default};
