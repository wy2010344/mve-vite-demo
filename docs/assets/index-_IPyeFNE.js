import{c as E,L as Z,Y as h,m as _,M as G,W as J,H as N,w as O,N as ee,O as p,P as z,h as te,f as ne,l as V,Q as re,g as s,R as ae,k as se,a as w,T as k,U as T,V as ie,X as S,Z as oe,_ as le,B as I,$ as y,a0 as ce,a1 as L,a2 as X}from"./index-DSI5ljsY.js";import{S as q}from"./index--WBo1qrp.js";import{e as me}from"./explain-BMUvdocQ.js";import{a as de}from"./onlyMobile-_iKdez2M.js";import fe from"./hookTrackLayout-CQyBOy8u.js";import ue,{firstDayOfWeekIndex as v,WEEKTIMES as he,WEEKS as ye}from"./firstDayOfWeek-CB03lQN2.js";import{f as pe}from"./fixRightTop-CDKwd8gC.js";import{t as ge}from"./themeDropdown-C9eXtBPV.js";import xe from"./demoList-CysNCtaT.js";import{f as _e}from"./chunk-LSEVNFON-G8OzWBoO.js";import"./iconBase-C0LW6USm.js";import"./index-B9iVH0Zi.js";import"./index-cHHGad51.js";const P="select-cell";function Oe(){me(()=>{}),de(function({width:f},g){g&&pe(function(){ue(),ge()}),E(void 0);const r=E(h.fromDate(new Date),Z),m=_(n=>{const e=r.get();return new G(e.year,e.month,v.get())}),x=_(()=>{const n=r.get();return J.from(n.year,n.month,n.day,v.get())}),A=window;A.__date=r;const c=N(0);function d(){return f()/7}const u=_(()=>c.get()>=5*d()),M=N(0),W=O(()=>{const n=d(),e=n*5,a=ee(p(r.get()),v.get())-1;return z({0:0,[e]:-n*a},L)}),b=N(0);let Y=r.get();te(()=>b.onAnimation(),function(n){n||(Y.equals(r.get())||ne(()=>{u()?c.changeTo(d()*5,V({config:{zta:.7,omega0:20}})):c.changeTo(0,V({config:{zta:.7,omega0:20}}))}),Y=r.get())});function C(){return R.clientWidth}const D=re(M,C);D.hookCompare(x,function(n,e){return u()?n.cells[0].toNumber()-e.cells[0].toNumber():0}),D.hookCompare(m,function(n,e){return u()?0:n.toNumber()-e.toNumber()}),fe(r.get,P);const F=O(()=>{const n=d()*5;return z({0:d()*7,[n]:d()*2},L)}),R=s.div({s_height:"100%",s_overflow:"hidden",s_userSelect:"none",onTouchMove(n){n.preventDefault()},children(n){s.div({s_transform(){return`translateY(${-c.get()}px)`},className:"flex flex-col",s_minHeight(){return`calc(100% + ${f()}px * 5 / 7)`},plugins:[ae({container:n,scroll:c,direction:"y",targetSnap:oe([{beforeForce:.005,size:d()*5,afterForce:.005}])})],children(){s.div({className:"bg-base-100 relative z-10",s_display:"flex",s_alignItems:"stretch",s_transform(){return`translateY(${Math.max(c.get(),0)}px)`},children(){s.h1({className:"text-display-large",childrenType:"text",children(){return r.get().month}}),s.div({className:"flex flex-col items-start justify-center",children(){s.div({className:"text-title-large",childrenType:"text",children(){return r.get().year}}),s.div({className:"text-title-medium",childrenType:"text",children(){return`月 ${r.get().day}日`}})}})}}),s.div({s_zIndex:1,s_position:"relative",s_height(){return d()*7+"px"},children(){s.div({className:"bg-base-300",s_overflow:"hidden",s_height(){const e=c.get();return F(e)+"px"},s_transform(){return`translateY(${Math.max(c.get(),0)}px)`},onPointerDown:D.getOnPointerDown({direction:"x",callback(e,a){if(u()){const t=p(r.get());t.setTime(t.getTime()+e*he),e&&r.set(h.fromDate(t))}else{const t=e<0?m().lastMonth():m().nextMonth();r.get().day>t.days?r.set(h.from(t.year,t.month,t.days)):r.set(h.from(t.year,t.month,r.get().day))}}}),children(){s.div({s_position:"relative",s_transform(){return`translateX(${-M.get()}px)`},children(){se(u,function(){w(k(()=>{const e=x();return[e.beforeWeek(),e,e.nextWeek()]},T),function(e,a){B(e,a)})},function(){w(k(()=>{const e=m();return[e.lastMonth(),e,e.nextMonth()]},T),function(e,a){K(e,a)})})}})}})}}),s.div({className:" flex-1",data_a:"99",plugins:[ie({direction:"x",scroll:b,getValue:r.get,getSize:C,compare(e,a){const t=p(a).valueOf(),o=p(e).valueOf()-t;let l=0;return o>=X?l=1:o<=-864e5&&(l=-1),l},callback(e){const a=p(r.get());a.setTime(a.getTime()+e*X),r.set(h.fromDate(a))}})],children(){s.div({className:"relative",s_transform(){return`translateX(${-b.get()}px)`},children(){w(k(()=>{const e=r.get();return[e.beforeDay(),e,e.nextDay()]},T),function(e,a){S.div({attrs(t){const i=a();i!=1&&(t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(i-1)*100}%)`)},children(){xe(_e.number.int({max:17,min:15}))}})})}})}})}})}});function K(n,e){function a(){const t=r.get(),i=n;return t.year==i.year&&t.month==i.month}return S.div({attrs(t){const i=e();if(i==1){const o=c.get();t.s_transform=` translateY(${W(o)}px)`}else t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(i-1)*100}%)`},children(){$(()=>{const t=c.get();return`translateY(${-W(t)}px)`}),s.div({children(){for(let t=0;t<6;t++)s.div({className:"flex items-center justify-center relative",children(){for(let i=0;i<7;i++){const o=n.fullDayOf(i,t);let l=n;o.type=="last"?l=n.lastMonth():o.type=="next"&&(l=n.nextMonth()),H(i,{year:l.year,month:l.month,day:o.day});const Q=q.fromYmd(l.year,l.month,o.day).getLunarDay(),U=_(()=>o.type=="this"&&a()&&r.get().day==o.day);j({day:o.day,onClick(){r.set(h.from(l.year,l.month,o.day))},lunarDay:Q,selected:U,hide(){return u()?!1:o.type!="this"}})}}})}})}})}function $(n){s.div({className:"bg-base-300 relative z-10",s_display:"flex",s_alignItems:"center",s_justifyContent:"space-between",s_transform:n,children(){for(let e=0;e<7;e++)s.div({className:"flex-1 aspect-square flex items-center justify-center",childrenType:"text",children(){return ye[m().weekDay(e)]}})}})}function B(n,e){S.div({attrs(a){a.className="self-start",e()!=1&&(a.s_position="absolute",a.s_inset=0,a.s_transform=`translateX(${(e()-1)*100}%)`)},children(){$(),s.div({className:"flex items-center justify-center relative",children(){for(let a=0;a<7;a++){const t=n.cells[a];H(a,t);const o=q.fromYmd(t.year,t.month,t.day).getLunarDay();j({hide(){return!1},day:t.day,lunarDay:o,selected(){return ce(t,r.get())},onClick(){r.set(t)}})}}})}})}})}function H(f,g){f==0&&s.div({className:"absolute left-0 text-label-small",childrenType:"text",children(){return le(p(g),v.get())}})}function j({day:f,lunarDay:g,hide:r,selected:m,onClick:x}){s.div({s_flex:1,s_aspectRatio:1,s_display:"flex",s_flexDirection:"column",s_alignItems:"center",s_justifyContent:"center",className(){return r()?y` opacity-30`:""},onClick:x,children(){s.div({s_aspectRatio:1,s_display:"grid",s_placeItems:"center",s_position:"relative",children(){s.div({id(){return m()?P:""},className(){return I(y`absolute inset-0  rounded-full z-0`,m()&&y`bg-primary`)}}),s.span({s_position:"relative",className(){return I(m()?y`text-primary-content`:y`text-base-content`,y`transition-all`)},childrenType:"text",children:f})}}),s.div({s_fontSize:"10px",childrenType:"text",className:"text-neutral-500",children:g.getName()})}})}export{Oe as default};
