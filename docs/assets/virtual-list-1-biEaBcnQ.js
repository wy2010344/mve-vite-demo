import{f as S}from"./chunk-LSEVNFON-G8OzWBoO.js";import{c as b,b as C,H as E,g as v,v as F,ak as z,am as H,C as R,at as p,h as V,bA as L,y as M,i as P,f as k}from"./index-DSI5ljsY.js";function B(){const x=b(C(1e3,u=>{const l=b(void 0);return{id:u,color:S.color.rgb(),height:l}})),a=E(0),D=R.get();v.div({className:"touch-none w-full h-[80%] overflow-hidden",children(u){u.addEventListener("pointerdown",l=>{a.stop(),F(z.from(l,{getPage:H,scrollDelta(c,d){a.set(a.get()+c),p()},onFinish(c){return a.change(D.getFromVelocity(c).animationConfig()).then(d=>{})}}))}),v.div({s_transform(){return`translateY(${-a.get()}px)`},children(){const l=b(0),c=b(1);let d;V(()=>{const i=l.get(),t=c.get(),f=x.get(),h=a.get();if(h<0){if(typeof d=="number")return;let o=!1,e=t,n=0;for(let g=i;g<t;g++){const y=f[g].height.get();if(typeof y>"u")return;n=n+y,o||n>u.clientHeight&&(o=!0,e=g+1)}let r=!1;e!=t&&(r=!0);const s=Math.max(i-1,0);if(s>-1&&(r=!0),!r)return;k(()=>{i>0&&(l.set(s),d=s),c.set(e),p()})}else{let o=!1,e=0,n=i,r=0;for(let m=i;m<t;m++){const w=f[m].height.get();if(typeof w>"u")return;r=r+w,o||r>h&&(o=!0,n=m,e=r-w)}let s=!1;i!=n&&(s=!0);let g=t;if(r-e<u.clientHeight&&(s=!0,g=Math.min(t+1,f.length)),g<=f.length&&(s=!0),e&&(s=!0),!s)return;k(()=>{l.set(n),c.set(g),a.silentDiff(-e),p()})}}),L(function(i){const t=l.get(),f=c.get(),h=x.get(),o=h.length;for(let e=t;e<f&&e<o;e++){const n=h[e];i(e,n)}},function(i,t){const f=S.number.int({min:30,max:80}),h=v.div({className:"flex items-center justify-center",s_height:f+"px",s_background(){return t.getValue().color},children(){M`${t.getValue().id}`,v.input()}}),o=new ResizeObserver(e=>{const n=e[0].borderBoxSize[0].blockSize;d==i&&(a.silentDiff(n),d=void 0),t.getValue().height.set(n),p()});o.observe(h),P(()=>{o.disconnect()})})}})}})}export{B as default};
