import{f as l}from"./chunk-KZPPZA2C-rvBpA5M9.js";import{g as x,c as s,f as i,a1 as c,o as S,aS as $,aT as H,k as d,ao as v,m as C,aU as L}from"./index-Dxu4lnfn.js";import m from"./hookMeasureHeight-B4FvRfIT.js";import{e as V}from"./explain-D8Q2xsip.js";import{m as T}from"./markdown-BxE2fTyT.js";import{dynamidHeightWithData as w,forEachSub as y}from"./dynamicHeight-CjzS5SYK.js";import{O as E}from"./index-CT0uQ99y.js";import"./iconBase-BD6ICo6R.js";import"./index-B7X7HqI_.js";import"./canvasRender-CK3mhhFQ.js";import"./_commonjsHelpers-CqkleIqs.js";function Y(){V(()=>{T`
# 虚拟列表,自定义滚动

这个虚拟列表,每个 item 的高度不固定 未出现的高度依平均高度

自定义滚动,基于 animateSignal 动画,动画曲线是模仿 flutter 的 Clamping 算法,带有一定的弹性.
    `});const h=x(1e3,e=>({id:e,color:l.color.rgb(),content:l.lorem.lines(),height:s(void 0)})),r=s(h),{getHeight:u,averageHeight:f}=w(r.get,function(e){return e.height.get()});i.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1",children(e){const n=s(0);m(e,()=>{n.set(e.clientHeight),c()});const g=E.hookGet("y",e,{maxScroll:S(()=>f()*r.get().length-n.get())}),{paddingBegin:p,subList:b}=$(()=>L(r.get(),g.get(),n.get(),u));i.div({s_transform(){return`translateY(${-g.get()}px)`},s_paddingTop(){return`${p()}px`},children(){H(y(r.get,t=>t.id,b),function(t,o){t==0&&(console.log("init",`${t}-abc`),d(()=>{console.log("destroy",`${t}-abc`)}));const a=i.div({id:`key--${t}`,s_background(){return o.getValue().color},children(){v(()=>`${o.getValue().id}--${o.getIndex()}`),i.input({className:"daisy-input daisy-input-xs"}),C.p().renderTextContent(()=>o.getValue().content),t==0&&(console.log("initxx",`${t}-abc`),d(()=>{console.log("destroyxx",`${t}-abc`)}))}});m(a,function(){a.clientHeight&&(o.getValue().height.set(a.clientHeight),c())})})}})}})}export{Y as default};
