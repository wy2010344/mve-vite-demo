import{c as h,b as w,f as n,m as b}from"./index-Bn6QTqXa.js";import{panel as N}from"./WindowManager-BXcB3eQp.js";import"./index-kFouXtHG.js";import"./index-XVZQUbQ5.js";import"./canvasRender-DlxfwZGY.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-DJ5LxReq.js";import"./iconBase-UU481Axx.js";import"./index-BxY9dVzG.js";const u=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7","#a29bfe"],S=N(function(M){return{title:"粒子画板",icon:"✨",width:800,height:600,children(){const l=h([]),d=h(!1),m=h(0),f=h(.5),c=h(5);let r,a,x;function g(e,i){const t=Math.random()*Math.PI*2,s=Math.random()*5+2;return{x:e,y:i,vx:Math.cos(t)*s,vy:Math.sin(t)*s-5,life:1,maxLife:Math.random()*60+60,size:Math.random()*4+2,color:u[Math.floor(Math.random()*u.length)]}}function y(){const i=l.get().map(t=>({...t,x:t.x+t.vx,y:t.y+t.vy,vy:t.vy+f.get(),vx:t.vx*.99,life:t.life-1/t.maxLife})).filter(t=>t.life>0&&t.y<r.height+50);l.set(i),m.set(i.length)}function v(){!a||!r||(a.fillStyle="rgba(0, 0, 0, 0.1)",a.fillRect(0,0,r.width,r.height),l.get().forEach(e=>{a.globalAlpha=e.life,a.fillStyle=e.color,a.beginPath(),a.arc(e.x,e.y,e.size,0,Math.PI*2),a.fill(),a.shadowBlur=10,a.shadowColor=e.color,a.fill(),a.shadowBlur=0}),a.globalAlpha=1)}function p(){y(),v(),x=requestAnimationFrame(p)}return w(()=>(r&&(r.width=r.offsetWidth,r.height=r.offsetHeight,a=r.getContext("2d"),p()),()=>{x&&cancelAnimationFrame(x)})),n.div({className:"w-full h-full flex flex-col bg-gray-900",children(){n.div({className:"h-16 bg-gray-800 border-b border-gray-700 flex items-center px-4 gap-6",children(){n.div({className:"text-white text-sm",children(){n.span({className:"text-gray-400",childrenType:"text",children:"粒子数: "}),n.span({className:"font-bold text-green-400",childrenType:"text",children(){return`${m.get()}`}})}}),n.div({className:"flex items-center gap-2",children(){n.label({className:"text-white text-sm",childrenType:"text",children:"重力:"}),n.input({type:"range",min:"0",max:"2",step:"0.1",value(){return`${f.get()}`},onInput(e){f.set(parseFloat(e.target.value))},className:"w-32"}),n.span({className:"text-white text-xs w-8",childrenType:"text",children(){return f.get().toFixed(1)}})}}),n.div({className:"flex items-center gap-2",children(){n.label({className:"text-white text-sm",childrenType:"text",children:"生成速率:"}),n.input({type:"range",min:"1",max:"20",step:"1",value(){return`${c.get()}`},onInput(e){c.set(parseInt(e.target.value))},className:"w-32"}),n.span({className:"text-white text-xs w-8",childrenType:"text",children(){return`${c.get()}`}})}}),n.button({className:"px-4 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm",childrenType:"text",children:"清空",onClick(){l.set([])}})}}),r=b.canvas({className:"flex-1 cursor-crosshair",onPointerDown(e){d.set(!0);const i=r.getBoundingClientRect(),t=e.clientX-i.left,s=e.clientY-i.top;for(let o=0;o<c.get();o++)l.set([...l.get(),g(t,s)])},onPointerMove(e){if(!d.get())return;const i=r.getBoundingClientRect(),t=e.clientX-i.left,s=e.clientY-i.top;for(let o=0;o<c.get();o++)l.set([...l.get(),g(t,s)])},onPointerUp(){d.set(!1)},onPointerLeave(){d.set(!1)}}).render(),n.div({className:"absolute top-20 left-1/2 -translate-x-1/2 text-white/50 text-sm pointer-events-none",s_opacity(){return m.get()===0?1:0},s_transition:"opacity 0.5s",childrenType:"text",children:"点击或拖拽鼠标创建粒子效果"})}})}}});export{S as ParticleApp};
