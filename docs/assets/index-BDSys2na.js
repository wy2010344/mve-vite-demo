import{f as m}from"./chunk-LSEVNFON-G8OzWBoO.js";import{c as b,A as h,k,P,d as v,f as t,b as S,Q as y,R as z,g as A,i as C,T as E,U as _}from"./index-CnmbM-dR.js";import D from"./center-empty-Ds57-hQi.js";import $ from"./op-button-Blslf85J.js";import I from"./center-arrow-26pddLzE.js";function q(){const s=b(6),a=h(()=>k(s.get(),e=>({id:e,color:m.color.rgb(),amount:m.number.int(),symbol:m.animal.cat(),img:m.image.avatar()}))),l=h(()=>{const e=L(a(),r=>1);return R(e,r=>r.color)}),d=b(0),n=b(void 0),o=h(()=>u/a().length);function g(e){n.set(e);const r=(a.length-e.index)*o()-o()/2;T(r+10*u)}function p(){const e=n.get();e&&alert("中奖为"+a()[e.index].amount)}function f(){N()&&(d.set(0),setTimeout(()=>{const e=Math.floor(Math.random()*a.length);g({index:e})},2e3))}const{beginDraw:N,drawValue:x,onDrawEffect:w,setDistance:T}=P({beginConfig:E(200,1),endConfig:_(1),value:d,cycle:u,onFinish:p});v(x,function(e){if(e){const r=w(),c=A(function(i){r(i,c)});return c}}),t.div({className:"relative",children(){t.div({className:"absolute right-0 top-0",children(){const e=t.input({type:"range",min:2,max:9,value:s.get,step:1,onInput(r){s.set(Number(e.value))}})}}),t.img({className:"mx-auto",src:D,alt:"center-empty"}),t.div({className:"absolute w-[525px] h-[525px] left-[50%] translate-x-[-50%] top-[70px]",children(){t.div({className:"absolute inset-0 rounded-[50%]",s_rotate(){return d.get()+180+"deg"},s_background:l,children(){S(a,function(c,i){t.div({className:`prize absolute top-0  h-[50%] 
    rotate-[var(--angel)] origin-[50%_bottom]
    left-[50%] translate-x-[-50%]`,css_angel(){return i()*o()+o()/2+"deg"},children(){t.div({children(){y(c.amount)}}),t.div({children(){y(c.symbol)}})}})})}});let e=0;const r=z(0);v(d.get,c=>{const i=c%o();i>e&&i<o()/2?C(()=>{r.set(i)}):C(()=>{i>r.get()&&r.set(i),r.animateTo(0)}),e=i}),t.div({className:"arrow absolute left-[50%] translate-x-[-50%] top-[50%] translate-y-[-50%]",s_rotate(){return r.get()+"deg"},children(){t.img({src:I})}})}}),t.button({className:"block mx-auto group relative",onClick:f,disabled:x,children(){t.img({src:$,className:"transition-all group-active:scale-y-50 origin-bottom"}),t.div({className:`absolute inset-0 flex items-start pt-[30px] justify-center text-white text-4xl
        transition-all group-active:scale-y-50 origin-bottom`,childrenType:"text",children:"Click"})}})}})}const u=360;function L(s,a){const l=s.reduce((n,o)=>n+a(o),0);return s.reduce((n,o)=>{const g=n.reduce((p,f)=>p+f.percent,0);return n.push({data:o,percent:a(o)/l,beforePercent:g}),n},[])}function R(s,a){const l=[];return s.forEach(n=>{l.push(`${a(n.data)} ${n.beforePercent*u}deg ${(n.beforePercent+n.percent)*u}deg`)}),`conic-gradient(${l.join(", ")})`}export{q as default};
