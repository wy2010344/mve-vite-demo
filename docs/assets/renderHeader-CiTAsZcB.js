import{m as g,M as V,W as $,g as o,H as I,T as S,k as F,Y as h,Q as O,aC as P,a as y,h as q,al as d,B as L,$ as b,U as N,V as k,e as j,z,ak as w,F as B}from"./index-BdTCZeBf.js";import H from"./hookTrackLayout-COQ3QauL.js";import{firstDayOfWeekIndex as v,WEEKTIMES as U}from"./firstDayOfWeek-Bj2uIjxk.js";import X from"./renderCalendar-CJRVWYqq.js";import{topContext as K}from"./context-6btoLEU3.js";import{I as Q}from"./index-BpO55ZWe.js";import R from"./renderWeekday-D8B-crFL.js";import{selectShadowCell as _}from"./renderCell-By3Tp8Fx.js";import"./index--WBo1qrp.js";import"./iconBase-C9j_FKPc.js";B.get();function ie(r,M){const{showYearMonth:C,yearMonthScrollY:T,calendarScrollY:s,calendarClose:W,showCalendar:c,today:m}=K.consume();H(r.get,_);const f=g(a=>{const i=r.get();return new V(i.year,i.month,v.get())}),p=g(()=>{const a=r.get();return $.from(a.year,a.month,a.day,v.get())});o.div({className:"relative",onPointerDown(a){s.onAnimation()||(C()?T.pointerEventListner(a):s.pointerEventListner(a))},children(){const a=I(0),i=S(a,A);i.hookCompare(p,function(t,e){return c()?0:t.cells[0].toNumber()-e.cells[0].toNumber()}),i.hookCompare(f,function(t,e){return c()?t.toNumber()-e.toNumber():0});function A(){return Y.clientWidth}const Y=o.div({className:"overflow-hidden  bg-base-300 touch-none",onPointerDown:i.getOnPointerDown({direction:"x",callback(t,e){if(c()){const n=t<0?f().lastMonth():f().nextMonth();r.get().day>n.days?r.set(h.from(n.year,n.month,n.days)):r.set(h.from(n.year,n.month,r.get().day))}else{const n=O(r.get());n.setTime(n.getTime()+t*U),t&&r.set(h.fromDate(n))}}}),children(){o.div({className:"relative",s_transform(){return`translateX(${-a.get()}px)`},children(){F(c,function(){y(N(()=>{const t=f();return[t.lastMonth(),t,t.nextMonth()]},k),function(t,e){X(t,e,s,r,M)})},function(){y(N(()=>{const t=p();return[t.beforeWeek(),t,t.nextWeek()]},k),function(t,e){R(t,e,r)})})}})}});o.div({className:"w-full h-11 flex justify-between items-center [padding-inline:18px] bg-base-100 z-10",children(){o.div({className:"flex items-center gap-1",children(){const t=P(()=>{const e=m().toNumber(),n=r.get().toNumber();return e!=n?[1]:j});y(t,function(e){const n=o.button({className:"daisy-btn daisy-btn-xs daisy-btn-circle",onClick(){r.set(m())},children(){Q()}});q((l=z)=>{const u=e.step(),E=m().toNumber(),D=r.get().toNumber(),x=Math.sign(D-E);return u==l.step&&x==l.dir?l:{step:u,dir:x}},function({step:l,dir:u}){l=="enter"?w(n,{rotateY:u>0?[90,0]:[90,180]}).then(e.resolve):l=="exiting"&&w(n,{rotateY:u>0?[0,90]:[180,90]}).then(e.resolve)})}),o.h1({className(){const e=m(),n=r.get();return L("text-2xl text-base-content font-bold",e.equals(n)?"text-2xl":e.year==n.year?"text-xl":"text-lg",s.onAnimation()?b`cursor-not-allowed`:b`cursor-pointer`)},childrenType:"text",children(){const e=r.get();return m().year!=e.year?`${e.year}-${d(e.month,2)}-${d(e.day,2)}`:`${d(e.month,2)}-${d(e.day,2)}`},onClick(){s.onAnimation()||(c()?W():s.animateTo(0))}})}}),o.div({className:"text-base-content",children(){o.span({className:"mr-[0.125em] text-2xl",childrenType:"text",children:"Â¥"}),o.span({className:"text-2xl",childrenType:"text",children:"23"}),o.sup({className:"opacity-50 text-[0.75em] -top-[0.75em]",childrenType:"text",children:".00"})}})}})}})}export{ie as default};
