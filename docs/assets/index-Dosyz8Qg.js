import{f as r,m as d,w,P as c,aM as l}from"./index-Bn6QTqXa.js";import{map as f,initializeMap as u}from"./Map-CAXm7abD.js";import{animateVehicles as g}from"./animateVehicles-To6lYkl3.js";import{score as h,player as o,queueMove as i,position as m,movesQueue as b}from"./Player-B9bPJrcr.js";import{animatePlayer as x}from"./animatePlayer-BGcvqjmH.js";import{finished as p,hitTest as y}from"./hitTest-Bc8xwfDk.js";import{r as k,T}from"./hookThreeView-39R6aYSF.js";import{cb as v,bL as z,cc as N}from"./three.core-DinwzvY0.js";import"./Grass-CNtWdSCt.js";import"./constants-D9wMxaBn.js";import"./Three-7jWfd2As.js";import"./Road-Dv5VEPiD.js";import"./Car-1OyPBdg-.js";import"./Wheel-IKxXasDW.js";import"./Truck-vmHnIiTQ.js";import"./generateRows-DQnyrBzS.js";import"./endsUpInValidPosition-BtmYEHDo.js";import"./calculateFinalPosition-DP2hh8aV.js";import"./three.module-CG7OlevV.js";function B(){r.div({s_fontFamily:'"Press Start 2P", cursive',children(){const e=k({camera:C(),args:{alpha:!0,antialias:!0},width:c.width,height:c.height,render(t){l(o),l(f),u(),l(new v);const s=L();o.add(s),s.target=o;const{hookAnimationLoop:n,camera:a}=T.consume();o.add(a),n(()=>{g(),x(),y()})}});e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,r.div({childrenType:"text",children:h.get,className:"absolute top-5 left-5 text-white text-[2em]"}),r.div({className:"absolute min-w-full min-h-full top-0 flex items-center justify-center",s_visibility(){return p.get()?"visible":"hidden"},children(){r.div({className:"flex flex-col items-center bg-white p-5",children(){d.h1().renderText`Game Over`,r.p({children(){w`Your score:`,d.span().renderTextContent(h.get)}}),d.button({className:"bg-red-400 pt-5 pb-5 pl-10 pr-10",onClick(){p.set(!1),o.position.x=0,o.position.y=0,o.children[0].position.z=0,m.currentRow=0,m.currentTile=0,b.length=0}}).renderText`Retry`}})}}),r.div({className:"absolute min-w-full bottom-5  flex items-end justify-center",children(){r.div({className:"grid grid-cols-[50px_50px_50px] gap-[10px]",children(){window.addEventListener("keydown",t=>{t.key==="ArrowUp"?(t.preventDefault(),i("forward")):t.key==="ArrowDown"?(t.preventDefault(),i("backward")):t.key==="ArrowLeft"?(t.preventDefault(),i("left")):t.key==="ArrowRight"&&(t.preventDefault(),i("right"))}),r.button({className:"w-full h-[40px] bg-white border-1 border-gray-100 shadow-2xl [grid-column:1/-1]",childrenType:"text",children:"▲",onClick(){i("forward")}}),r.button({className:"w-full h-[40px] bg-white border-1 border-gray-100 shadow-2xl",childrenType:"text",children:"◀",onClick(){i("left")}}),r.button({className:"w-full h-[40px] bg-white border-1 border-gray-100 shadow-2xl",childrenType:"text",children:"▼",onClick(){i("backward")}}),r.button({className:"w-full h-[40px] bg-white border-1 border-gray-100 shadow-2xl",childrenType:"text",children:"▶",onClick(){i("right")}})}})}})}})}function C(){const t=window.innerWidth/window.innerHeight,s=t<1?300:300*t,n=t<1?300/t:300,a=new z(s/-2,s/2,n/2,n/-2,100,900);return a.up.set(0,0,1),a.position.set(300,-300,300),a.lookAt(0,0,0),a}function L(){const e=new N;return e.position.set(-100,-100,200),e.up.set(0,0,1),e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,e.shadow.camera.up.set(0,0,1),e.shadow.camera.left=-400,e.shadow.camera.right=400,e.shadow.camera.top=400,e.shadow.camera.bottom=-400,e.shadow.camera.near=50,e.shadow.camera.far=400,e}export{B as default};
