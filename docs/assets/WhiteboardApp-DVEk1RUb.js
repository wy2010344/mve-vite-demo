import{c,b as u,f as t,m as y}from"./index-SfgOm-p3.js";import{panel as w}from"./WindowManager-CNIQp0k9.js";import"./index-BBmTqfCf.js";import"./index-PeN622_I.js";import"./canvasRender-DwJvwbpB-BWU3cVJm.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-DFXa7QPV.js";import"./iconBase-BQ1OgeWz.js";import"./index-BxY9dVzG.js";const N=["#000000","#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"],b=[{id:"pen",icon:"âœï¸",name:"ç”»ç¬”"},{id:"eraser",icon:"ðŸ§¹",name:"æ©¡çš®"},{id:"clear",icon:"ðŸ—‘ï¸",name:"æ¸…ç©º"}],O=w(function(C){return{title:"åä½œç™½æ¿",icon:"ðŸŽ¨",width:900,height:650,children(){const f=c([]),a=c([]),d=c(!1),g=c("#000000"),o=c(3),s=c("pen"),h=c([{id:"1",name:"Alice",color:"#ff6b6b",cursor:null},{id:"2",name:"Bob",color:"#4ecdc4",cursor:null}]);let n,r;function p(e,i){d.set(!0),a.set([{x:e,y:i}])}function x(e,i){d.get()&&(a.set([...a.get(),{x:e,y:i}]),l())}function m(){d.get()&&(a.get().length>0&&f.set([...f.get(),{points:a.get(),color:s.get()==="eraser"?"#ffffff":g.get(),width:s.get()==="eraser"?o.get()*3:o.get(),tool:s.get()}]),a.set([]),d.set(!1),l())}function l(){!r||!n||(r.fillStyle="#ffffff",r.fillRect(0,0,n.width,n.height),[...f.get(),{points:a.get(),color:s.get()==="eraser"?"#ffffff":g.get(),width:s.get()==="eraser"?o.get()*3:o.get(),tool:s.get()}].filter(e=>e.points.length>0).forEach(e=>{r.strokeStyle=e.color,r.lineWidth=e.width,r.lineCap="round",r.lineJoin="round",r.beginPath(),r.moveTo(e.points[0].x,e.points[0].y),e.points.forEach(i=>{r.lineTo(i.x,i.y)}),r.stroke()}),h.get().forEach(e=>{e.cursor&&(r.fillStyle=e.color,r.beginPath(),r.arc(e.cursor.x,e.cursor.y,5,0,Math.PI*2),r.fill(),r.fillStyle=e.color,r.font="12px sans-serif",r.fillText(e.name,e.cursor.x+10,e.cursor.y-10))}))}return u(()=>{if(!n)return;const e=setInterval(()=>{const i=h.get().map(v=>({...v,cursor:Math.random()>.3?{x:Math.random()*n.width,y:Math.random()*n.height}:null}));h.set(i),l()},2e3);return()=>clearInterval(e)}),u(()=>{n&&(n.width=n.offsetWidth,n.height=n.offsetHeight,r=n.getContext("2d"),l())}),t.div({className:"w-full h-full flex flex-col bg-gray-100",children(){t.div({className:"h-16 bg-white border-b border-gray-300 flex items-center px-4 gap-6",children(){t.div({className:"flex gap-2",children(){b.forEach(e=>{t.button({className:"px-3 py-2 rounded hover:bg-gray-100 transition-colors",s_backgroundColor(){return s.get()===e.id?"#e5e7eb":""},onClick(){e.id==="clear"?(f.set([]),l()):s.set(e.id)},children(){t.div({className:"text-2xl",childrenType:"text",children:e.icon}),t.div({className:"text-xs text-gray-600",childrenType:"text",children:e.name})}})})}}),t.div({className:"w-px h-8 bg-gray-300"}),t.div({className:"flex gap-2",children(){N.forEach(e=>{t.button({className:"w-8 h-8 rounded-full border-2 hover:scale-110 transition-transform",s_backgroundColor:e,s_borderColor(){return g.get()===e?"#000":"#ccc"},onClick(){g.set(e),s.set("pen")}})})}}),t.div({className:"w-px h-8 bg-gray-300"}),t.div({className:"flex items-center gap-2",children(){t.span({className:"text-sm text-gray-600",childrenType:"text",children:"ç²—ç»†:"}),t.input({type:"range",min:"1",max:"20",value(){return`${o.get()}`},onInput(e){o.set(parseInt(e.target.value))},className:"w-32"}),t.div({className:"w-8 h-8 rounded-full bg-gray-800",s_width(){return`${o.get()*2}px`},s_height(){return`${o.get()*2}px`}})}}),t.div({className:"flex-1"}),t.div({className:"flex items-center gap-2",children(){t.span({className:"text-sm text-gray-600",childrenType:"text",children:"åœ¨çº¿:"}),h.get().forEach(e=>{t.div({className:"flex items-center gap-1",children(){t.div({className:"w-3 h-3 rounded-full",s_backgroundColor:e.color}),t.span({className:"text-xs text-gray-600",childrenType:"text",children:e.name})}})})}})}}),n=y.canvas({className:"flex-1 cursor-crosshair",onPointerDown(e){const i=n.getBoundingClientRect();p(e.clientX-i.left,e.clientY-i.top)},onPointerMove(e){const i=n.getBoundingClientRect();x(e.clientX-i.left,e.clientY-i.top)},onPointerUp:m,onPointerLeave:m}).render()}})}}});export{O as WhiteboardApp};
