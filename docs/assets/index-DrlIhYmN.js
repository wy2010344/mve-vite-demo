import{f as g}from"./chunk-LSEVNFON-G8OzWBoO.js";import{b as v,c as l,H as S,g as n,at as c,m as y,v as C,ak as F,am as H,aj as V,C as m,bI as L,bA as k,G as w,bJ as _}from"./index-DSI5ljsY.js";import{e as E}from"./explain-BMUvdocQ.js";import{m as N}from"./markdown-Bbieit4V.js";import M from"./hookMeasureHeight-Dor_OfE7.js";import{forEachSubReverse as P}from"./dynamicHeight-DTwhw47W.js";import"./iconBase-C0LW6USm.js";import"./index-B9iVH0Zi.js";function D(){E(()=>{N`
# 虚拟列表,自定义滚动,自底向顶滚动

这个虚拟列表,需要每条记录提供自己的高度,这个高度是预先于dom渲染存在的.

自定义滚动,基于animateSignal动画,动画曲线是模仿flutter的Clamping算法,带有一定的弹性.
`});const u=v(1e3,o=>({id:o,color:g.color.rgb(),height:g.number.int({min:30,max:80})})),a=l(u),r=S(0),d=m.get(),h=m.get(100);n.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1 relative",children(o){const s=l(0);M(o,()=>{s.set(o.clientHeight),c()});const p=y(()=>{const t=a.get();let e=0;for(let i=0;i<t.length;i++)e=e+t[i].height;return e});o.addEventListener("pointerdown",t=>{r.stop(),C(F.from(t,{getPage:H,scrollDelta(e,i){r.set(r.get()+e),c()},opposite:!0,onFinish(e){return V({scroll:r,frictional:d.getFromVelocity(e),containerSize:s.get(),contentSize:p(),edgeConfig(i){return h.getFromVelocity(i).animationConfig()}})}}))});function f(t){return t.height}const{paddingBegin:b,subList:x}=L(()=>_(a.get(),r.get(),s.get(),f));n.div({className:"absolute w-full",s_bottom(){return-r.get()+"px"},s_paddingBottom(){return b()+"px"},children(){k(P(a.get,t=>t.id,x),function(t,e){n.div({className:"flex items-center justify-center min-h-0",s_height(){return e.getValue().height+"px"},s_maxHeight(){return e.getValue().height+"px"},s_background(){return e.getValue().color},children(){w(()=>e.getValue().id+"--"),n.input({className:"daisy-input daisy-input-xs"})}})})}})}})}export{D as default};
