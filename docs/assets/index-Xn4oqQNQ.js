import{f as g,w as h,c as l,b1 as d,z as x,aW as v,aH as D,Q as u,aZ as b,av as w}from"./index-B26XVUiJ.js";import{a as y}from"./index-BxY9dVzG.js";const c=l(void 0),{createListContainer:N}=v({getDragData:c.get,setDragData:c.set,changeIndexAnimate(e,t,i){y(e,{[t]:[i,0]})},onDragFinish(e,t){if(t&&(t.accept="move")){const i=e.targetPlaceholder;if(!i)throw"no preview placeholder";const a=e.from.get().filter(o=>o!=e.id);if(e.from!=i.list)i.list.set(i.list.get().toSpliced(i.index(),0,e.id));else{const o=i.beforeId();if(o){const p=a.indexOf(o);a.splice(p,0,e.id)}else a.push(e.id)}e.from.set(a)}e.onDropEnd.set(!0),w()}});function I(){const e=l([0,1,2,l([3,4,5,6])]);g.div({className:"w-full h-full",children(){f(e),h(c.get,t=>{t&&f(t.id,{className:"pointer-events-none opacity-90 fixed",s_position:"fixed",s_width:`${t.width}px`,s_height:`${t.height}px`,s_top(){return`${t.dragY.get()-t.y}px`},s_transformOrigin(){return`${t.x}px ${t.y}px`}})})}})}function f(e,t,i){if(typeof e=="number")return g.div({...t,onPointerDown:i,className:d("h-10 bg-blue-300",t?.className),children:e});{const a=x(()=>e.get().filter(n=>{const r=c.get();return!(r&&n==r.id&&!r.onDropEnd.get())})),{plugin:o,renderChildren:p}=N({accept(n){return"move"},direction:"y",getList:a,getId:D,createDragData(n,r,s){return{...b(n,s),id:r,activeContainer:l(null),dragX:u(0),dragY:u(0),onDropEnd:l(!1),from:e}},preview(n,r){const s=f(r.id,{s_opacity:0,s_backgroundColor:"yellow"});r.targetPlaceholder={index:n,element:s,list:e,beforeId(){return a()[n()]}}}});return g.div({...t,plugin(n){o(n),t?.plugin?.(n)},className:d("flex flex-col gap-1 items-stretch p-4 relative border-green-700 border-2",t?.className),children(n){g.div({onPointerDown(r){i?.(r,n)},className:"h-5 bg-gray-300"}),p(function({key:r,plugin:s,onPointerDown:m}){f(r,{plugin:s,className(){return c.get()?.id==r?"opacity-0 pointer-events-none":""}},m)})}})}}export{I as default};
