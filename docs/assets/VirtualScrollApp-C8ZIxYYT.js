import{c as g,o as v,f as e,m as w,b as H}from"./index-Dxu4lnfn.js";import{panel as M}from"./WindowManager-BeVA7m6z.js";import"./index-DTVsSBOz.js";import"./index-CT0uQ99y.js";import"./canvasRender-CK3mhhFQ.js";import"./_commonjsHelpers-CqkleIqs.js";import"./index-D2NKKKQE.js";import"./iconBase-BD6ICo6R.js";import"./index-BxY9dVzG.js";function N(b){return Array.from({length:b},(p,i)=>({id:i,title:`Item ${i+1}`,content:`è¿™æ˜¯ç¬¬ ${i+1} æ¡æ•°æ®ã€‚${Math.random()>.5?"å†…å®¹è¾ƒçŸ­ã€‚":"è¿™æ˜¯ä¸€æ®µæ¯”è¾ƒé•¿çš„å†…å®¹ï¼Œç”¨æ¥æµ‹è¯•åŠ¨æ€é«˜åº¦çš„è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œåˆ—è¡¨é¡¹çš„é«˜åº¦å¾€å¾€æ˜¯ä¸å›ºå®šçš„ï¼Œè¿™ç»™è™šæ‹Ÿæ»šåŠ¨çš„å®ç°å¸¦æ¥äº†å¾ˆå¤§æŒ‘æˆ˜ã€‚æˆ‘ä»¬éœ€è¦åœ¨æ»šåŠ¨æ—¶åŠ¨æ€è®¡ç®—æ¯ä¸ªé¡¹çš„é«˜åº¦ï¼Œå¹¶ä¸”ä¿æŒæ»šåŠ¨ä½ç½®çš„å‡†ç¡®æ€§ã€‚"}`}))}const O=M(function(b){return{title:"è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨",icon:"ğŸ“œ",width:600,height:700,children(){const p=g(1e4),i=g(N(1e4)),d=g(0),T=g(600),o=g(new Map),u=5,x=80,I=v(()=>{const t=o.get();let n=0;for(let r=0;r<i.get().length;r++)n+=t.get(r)||x;return n}),m=v(()=>{const t=d.get(),n=T.get(),r=o.get();let s=0,c=0;for(let l=0;l<i.get().length;l++){const a=r.get(l)||x;if(c+a>t){s=Math.max(0,l-u);break}c+=a}let h=s;c=0;for(let l=s;l<i.get().length;l++){const a=r.get(l)||x;if(c+=a,c>n+t-f(s)){h=Math.min(i.get().length-1,l+u);break}}return{startIndex:s,endIndex:h}});function f(t){const n=o.get();let r=0;for(let s=0;s<t;s++)r+=n.get(s)||x;return r}function $(t,n){const r=new Map(o.get());r.get(t)!==n&&(r.set(t,n),o.set(r))}function y(t){const n=f(t);d.set(n)}e.div({className:"w-full h-full flex flex-col bg-gray-50",children(){e.div({className:"h-16 bg-white border-b border-gray-200 flex items-center px-4 gap-4",children(){e.div({className:"text-sm text-gray-600",children(){e.span({childrenType:"text",children:"æ€»æ•°æ®é‡: "}),e.span({className:"font-bold text-blue-600",childrenType:"text",children(){return`${p.get().toLocaleString()}`}}),e.span({className:"ml-4",childrenType:"text",children:"å¯è§èŒƒå›´: "}),e.span({className:"font-bold text-green-600",childrenType:"text",children(){const{startIndex:t,endIndex:n}=m();return`${t} - ${n}`}})}}),e.div({className:"flex-1"}),e.button({className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",childrenType:"text",children:"è·³åˆ°ä¸­é—´",onClick(){y(Math.floor(i.get().length/2))}}),e.button({className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",childrenType:"text",children:"è·³åˆ°åº•éƒ¨",onClick(){y(i.get().length-1)}}),e.button({className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",childrenType:"text",children:"é‡æ–°ç”Ÿæˆ",onClick(){const t=p.get();i.set(N(t)),o.set(new Map),d.set(0)}})}}),e.div({className:"flex-1 overflow-auto relative",onScroll(t){d.set(t.target.scrollTop)},children(){e.div({s_height(){return`${I()}px`},s_position:"relative",children(){e.div({s_position:"absolute",s_top(){return`${f(m().startIndex)}px`},s_left:"0",s_right:"0",children(){const{startIndex:t,endIndex:n}=m();i.get().slice(t,n+1).forEach((s,c)=>{const h=t+c,l=w.div({className:"bg-white border-b border-gray-200 p-4 hover:bg-gray-50 transition-colors"}).render(()=>{e.div({className:"font-semibold text-gray-900 mb-2",childrenType:"text",children:s.title}),e.div({className:"text-gray-700 text-sm",childrenType:"text",children:s.content}),e.div({className:"text-xs text-gray-600 mt-2",childrenType:"text",children:`Index: ${h} | ID: ${s.id}`})});H(()=>{const a=l.offsetHeight;a>0&&$(h,a)})})}})}})}}),e.div({className:"h-10 bg-gray-800 text-white text-xs flex items-center px-4 gap-6",children(){e.div({children(){e.span({className:"text-gray-400",childrenType:"text",children:"æ¸²æŸ“é¡¹æ•°: "}),e.span({className:"font-bold",childrenType:"text",children(){const{startIndex:t,endIndex:n}=m();return`${n-t+1}`}})}}),e.div({children(){e.span({className:"text-gray-400",childrenType:"text",children:"å·²æµ‹é‡é«˜åº¦: "}),e.span({className:"font-bold",childrenType:"text",children(){return`${o.get().size}`}})}}),e.div({children(){e.span({className:"text-gray-400",childrenType:"text",children:"æ»šåŠ¨ä½ç½®: "}),e.span({className:"font-bold",childrenType:"text",children(){return`${Math.round(d.get())}px`}})}})}})}})}}});export{O as VirtualScrollApp};
