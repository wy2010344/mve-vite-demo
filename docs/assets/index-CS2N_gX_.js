import{L as G,c as O,M as J,Y as h,m as v,N as ee,O as w,W as te,P as ne,Q as ae,H as I,w as L,h as re,f as se,R as ie,T as oe,g as s,k as le,a as N,U as k,V as p,X as ce,Z as me,_ as S,$ as V,a0 as de,a1 as z,a2 as T,a3 as fe,B as X,a4 as y,a5 as ue,a6 as he,a7 as q,a8 as H}from"./index-8-4crGqb.js";import{e as ye}from"./explain-B8ioMTCc.js";import{a as pe}from"./onlyMobile-BU9F0UiM.js";import{f as ge}from"./fixRightTop-cxK4ptVy.js";import{t as xe}from"./themeDropdown-DRlpUNdX.js";import _e from"./demoList-B4id26zX.js";import{f as ve}from"./chunk-LSEVNFON-G8OzWBoO.js";import"./index-DAylT_W6.js";const F="select-cell";function We(){ye(()=>{}),pe(function({width:f},g){g&&ge(function(){G(),xe()}),O(void 0);const r=O(h.fromDate(new Date),J),m=v(n=>{const i=r.get();return new ee(i.year,i.month,w.get())}),x=v(()=>{const n=r.get();return te.from(n.year,n.month,n.day,w.get())}),A=window;A.__date=r;const l=new ne("y",{maxScroll(){return M.get()},targetSnap:ae([{beforeForce:1,size:d()*5,afterForce:1}])}),M=l.measureMaxScroll();function d(){return f()/7}const u=v(()=>l.get()>=5*d()),W=I(0),Y=L(()=>{const n=d(),i=n*5,e=ue(p(r.get()),w.get())-1;return z({0:0,[i]:-n*e},q)}),D=I(0);let E=r.get();re(()=>D.onAnimation(),function(n){n||(E.equals(r.get())||se(()=>{u()?l.animateTo(d()*5):l.animateTo(0)}),E=r.get())});function C(){return K.clientWidth}const b=ie(W,C);b.hookCompare(x,function(n,i){return u()?n.cells[0].toNumber()-i.cells[0].toNumber():0}),b.hookCompare(m,function(n,i){return u()?0:n.toNumber()-i.toNumber()}),oe(r.get,F);const R=L(()=>{const n=d()*5;return z({0:d()*7,[n]:d()*2},q)}),K=s.div({s_height:"100%",s_overflow:"hidden",s_userSelect:"none",onTouchMove(n){n.preventDefault()},onWheel:l.wheelEventListener,onPointerDown:l.pointerEventListner,children(n){const i=s.div({s_transform(){return`translateY(${-l.get()}px)`},className:"flex flex-col",s_minHeight(){return`calc(100% + ${f()}px * 5 / 7)`},children(){s.div({className:"bg-base-100 relative z-10",s_display:"flex",s_alignItems:"stretch",s_transform(){return`translateY(${Math.max(l.get(),0)}px)`},children(){s.h1({className:"text-display-large",childrenType:"text",children(){return r.get().month}}),s.div({className:"flex flex-col items-start justify-center",children(){s.div({className:"text-title-large",childrenType:"text",children(){return r.get().year}}),s.div({className:"text-title-medium",childrenType:"text",children(){return`月 ${r.get().day}日`}})}})}}),s.div({s_zIndex:1,s_position:"relative",s_height(){return d()*7+"px"},children(){s.div({className:"bg-base-300",s_overflow:"hidden",s_height(){const e=l.get();return R(e)+"px"},s_transform(){return`translateY(${Math.max(l.get(),0)}px)`},onPointerDown:b.getOnPointerDown({direction:"x",callback(e,t){if(u()){const a=p(r.get());a.setTime(a.getTime()+e*ce),e&&r.set(h.fromDate(a))}else{const a=e<0?m().lastMonth():m().nextMonth();r.get().day>a.days?r.set(h.from(a.year,a.month,a.days)):r.set(h.from(a.year,a.month,r.get().day))}}}),children(){s.div({s_position:"relative",s_transform(){return`translateX(${-W.get()}px)`},children(){le(u,function(){N(k(()=>{const e=x();return[e.beforeWeek(),e,e.nextWeek()]},T),function(e,t){Q(e,t)})},function(){N(k(()=>{const e=m();return[e.lastMonth(),e,e.nextMonth()]},T),function(e,t){B(e,t)})})}})}})}}),s.div({className:" flex-1",data_a:"99",plugins:[me({direction:"x",scroll:D,getValue:r.get,getSize:C,compare(e,t){const a=p(t).valueOf(),c=p(e).valueOf()-a;let _=0;return c>=H?_=1:c<=-864e5&&(_=-1),_},callback(e){const t=p(r.get());t.setTime(t.getTime()+e*H),r.set(h.fromDate(t))}})],children(){s.div({className:"relative",s_transform(){return`translateX(${-D.get()}px)`},children(){N(k(()=>{const e=r.get();return[e.beforeDay(),e,e.nextDay()]},T),function(e,t){S.div({attrs(a){const o=t();o!=1&&(a.s_position="absolute",a.s_inset=0,a.s_transform=`translateX(${(o-1)*100}%)`)},children(){_e(ve.number.int({max:17,min:15}))}})})}})}})}});M.hookInit(n,i)}});function B(n,i){function e(){const t=r.get(),a=n;return t.year==a.year&&t.month==a.month}return S.div({attrs(t){const a=i();if(a==1){const o=l.get();t.s_transform=` translateY(${Y(o)}px)`}else t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(a-1)*100}%)`},children(){$(()=>{const t=l.get();return`translateY(${-Y(t)}px)`}),s.div({children(){for(let t=0;t<6;t++)s.div({className:"flex items-center justify-center relative",children(){for(let a=0;a<7;a++){const o=n.fullDayOf(a,t);let c=n;o.type=="last"?c=n.lastMonth():o.type=="next"&&(c=n.nextMonth()),j(a,{year:c.year,month:c.month,day:o.day});const U=V.fromYmd(c.year,c.month,o.day).getLunarDay(),Z=v(()=>o.type=="this"&&e()&&r.get().day==o.day);P({day:o.day,onClick(){r.set(h.from(c.year,c.month,o.day))},lunarDay:U,selected:Z,hide(){return u()?!1:o.type!="this"}})}}})}})}})}function $(n){s.div({className:"bg-base-300 relative z-10",s_display:"flex",s_alignItems:"center",s_justifyContent:"space-between",s_transform:n,children(){for(let i=0;i<7;i++)s.div({className:"flex-1 aspect-square flex items-center justify-center",childrenType:"text",children(){return de[m().weekDay(i)]}})}})}function Q(n,i){S.div({attrs(e){e.className="self-start",i()!=1&&(e.s_position="absolute",e.s_inset=0,e.s_transform=`translateX(${(i()-1)*100}%)`)},children(){$(),s.div({className:"flex items-center justify-center relative",children(){for(let e=0;e<7;e++){const t=n.cells[e];j(e,t);const o=V.fromYmd(t.year,t.month,t.day).getLunarDay();P({hide(){return!1},day:t.day,lunarDay:o,selected(){return he(t,r.get())},onClick(){r.set(t)}})}}})}})}})}function j(f,g){f==0&&s.div({className:"absolute left-0 text-label-small",childrenType:"text",children(){return fe(p(g),w.get())}})}function P({day:f,lunarDay:g,hide:r,selected:m,onClick:x}){s.div({s_flex:1,s_aspectRatio:1,s_display:"flex",s_flexDirection:"column",s_alignItems:"center",s_justifyContent:"center",className(){return r()?y` opacity-30`:""},onClick:x,children(){s.div({s_aspectRatio:1,s_display:"grid",s_placeItems:"center",s_position:"relative",children(){s.div({id(){return m()?F:""},className(){return X(y`absolute inset-0  rounded-full z-0`,m()&&y`bg-primary`)}}),s.span({s_position:"relative",className(){return X(m()?y`text-primary-content`:y`text-base-content`,y`transition-all`)},childrenType:"text",children:f})}}),s.div({s_fontSize:"10px",childrenType:"text",className:"text-neutral-500",children:g.getName()})}})}export{We as default};
