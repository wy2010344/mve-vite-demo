import{g as r,d,y as w,ai as h,ax as l}from"./index-8-4crGqb.js";import{map as u,initializeMap as f}from"./Map-CYkh1FAL.js";import{animateVehicles as g}from"./animateVehicles-CMcIIy-w.js";import{score as c,player as o,queueMove as i,position as m,movesQueue as x}from"./Player-CdEdZCM1.js";import{animatePlayer as b}from"./animatePlayer-r1u4YjJ1.js";import{finished as p,hitTest as y}from"./hitTest-y_u2oHt5.js";import{r as k,T}from"./hookThreeView-7Mjc7RqX.js";import{A as v,c0 as z,D as N}from"./three.core-IZwRyLr5.js";import"./Grass-D94HOHke.js";import"./constants-D9wMxaBn.js";import"./Three-DORzRoVO.js";import"./Road-CBDd-7dN.js";import"./Car-Cqd5vzn5.js";import"./Wheel-D2dfaNrt.js";import"./Truck-DGmdOD13.js";import"./generateRows-BDC8dXrR.js";import"./endsUpInValidPosition-DGOMm7pj.js";import"./calculateFinalPosition-DP2hh8aV.js";import"./three.module-EYrWAVy6.js";function B(){r.div({s_fontFamily:'"Press Start 2P", cursive',children(){const e=k({camera:A(),args:{alpha:!0,antialias:!0},width:h.width,height:h.height,render(t){l(o),l(u),f(),l(new v);const s=C();o.add(s),s.target=o;const{hookAnimationLoop:n,camera:a}=T.consume();o.add(a),n(()=>{g(),b(),y()})}});e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!0,r.div({childrenType:"text",children:c.get,className:"absolute top-5 left-5 text-white text-[2em]"}),r.div({className:"absolute min-w-full min-h-full top-0 flex items-center justify-center",s_visibility(){return p.get()?"visible":"hidden"},children(){r.div({className:"flex flex-col items-center bg-white p-5",children(){d.h1().renderText`Game Over`,r.p({children(){w`Your score:`,d.span().renderTextContent(c.get)}}),d.button({className:"bg-red-400 pt-5 pb-5 pl-10 pr-10",onClick(){p.set(!1),o.position.x=0,o.position.y=0,o.children[0].position.z=0,m.currentRow=0,m.currentTile=0,x.length=0}}).renderText`Retry`}})}}),r.div({className:"absolute min-w-full bottom-5  flex items-end justify-center",children(){r.div({className:"grid grid-cols-[50px_50px_50px] gap-[10px]",children(){window.addEventListener("keydown",t=>{t.key==="ArrowUp"?(t.preventDefault(),i("forward")):t.key==="ArrowDown"?(t.preventDefault(),i("backward")):t.key==="ArrowLeft"?(t.preventDefault(),i("left")):t.key==="ArrowRight"&&(t.preventDefault(),i("right"))}),r.button({className:"w-full h-[40px] bg-white border-1 border-gray-100 shadow-2xl [grid-column:1/-1]",childrenType:"text",children:"▲",onClick(){i("forward")}}),r.button({className:"w-full h-[40px] bg-white border-1 border-gray-100 shadow-2xl",childrenType:"text",children:"◀",onClick(){i("left")}}),r.button({className:"w-full h-[40px] bg-white border-1 border-gray-100 shadow-2xl",childrenType:"text",children:"▼",onClick(){i("backward")}}),r.button({className:"w-full h-[40px] bg-white border-1 border-gray-100 shadow-2xl",childrenType:"text",children:"▶",onClick(){i("right")}})}})}})}})}function A(){const t=window.innerWidth/window.innerHeight,s=t<1?300:300*t,n=t<1?300/t:300,a=new z(s/-2,s/2,n/2,n/-2,100,900);return a.up.set(0,0,1),a.position.set(300,-300,300),a.lookAt(0,0,0),a}function C(){const e=new N;return e.position.set(-100,-100,200),e.up.set(0,0,1),e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,e.shadow.camera.up.set(0,0,1),e.shadow.camera.left=-400,e.shadow.camera.right=400,e.shadow.camera.top=400,e.shadow.camera.bottom=-400,e.shadow.camera.near=50,e.shadow.camera.far=400,e}export{B as default};
