import{ab as v,c as u,q as D,e as y,a5 as F,ac as d,a1 as N,a6 as T,a7 as h,t as w,b as m,u as l,p as A}from"./index-C09L67qZ.js";import{m as L,i as M,e as P,d as K,c as q,f as C,a as E,t as z}from"./forceLayout-BPinnqDe.js";import{r as B}from"./onlyMobile-Dkk4_pv8.js";function Y(){B(function({width:o,height:i}){const g=v(()=>{const e=Array.from({length:400},(r,n)=>({index:n})),a=[];for(let r=0;r<20;++r)for(let n=0;n<20;++n)r>0&&a.push({source:(r-1)*20+n,target:r*20+n}),n>0&&a.push({source:r*20+(n-1),target:r*20+n});return{nodes:e,links:a}}),x=u(g.nodes),k=u(g.links),f=u(void 0),c=D(t=>L({nodes:(t==null?void 0:t.nodes)||y,links:(t==null?void 0:t.links)||y,fromLinks:k.get(),fromNodes:x.get(),createForceNode(e,a,r){return M(e,2,a,K,P)},getNodeKey(e){return e.index},getSorceKey(e){return e.source},getTargetKey(e){return e.target},createFromKey(e){return{index:e}}})),s=F(q()),p=C({getStrength:d(1),getDistance:d(20),iterations:10}),S=E({getStrenth:d(-30)});function b(){const t=c();z(s,t.nodes,e=>{p(t.links,s.nDim,e),S(t.nodes,s.nDim,e)})}N(T(()=>{b(),h()})),w({className:"touch-none",width:o,height:i},function({canvas:t}){m(()=>c().links,e=>{l({x(){return e.source.x.dSignal.get()+o()/2},y(){return e.source.y.dSignal.get()+i()/2},withPath:!0,draw(a,r){return r.moveTo(0,0),r.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),{operates:[{type:"stroke",style:"#aaa",width:1}]}}})}),m(()=>c().nodes,e=>{l({x(){return e.x.dSignal.get()+o()/2},y(){return e.y.dSignal.get()+i()/2},onPointerDown(a){s.alphaTarget=.3,f.set(e),A({onMove(r){e.x.f=r.offsetX-o()/2,e.y.f=r.offsetY-i()/2},onEnd(r){s.alphaTarget=0,e.x.f=void 0,e.y.f=void 0,f.set(void 0)}},t)},withPath:!0,draw(a,r){return r.arc(0,0,6,0,2*Math.PI),{operates:[{type:"fill",style:"#000"},{type:"draw",callback(n){n.fillText(e.value.index+"",3,-3)}}]}}})})},{beforeDraw(t){}})})}export{Y as default};
