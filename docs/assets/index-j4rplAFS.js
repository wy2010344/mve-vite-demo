import{f as d}from"./chunk-LSEVNFON-G8OzWBoO.js";import{aL as C,c as m,A as F,f as o,an as u,m as L,p as V,Q as H,R as w,U as _,C as h,bW as k,bp as E,aO as I,bX as M}from"./index-DzjyJcX9.js";import{e as N}from"./explain-55b8_AdP.js";import{m as P}from"./markdown-CMudKybz.js";import W from"./hookMeasureHeight-BSlWogcs.js";import"./iconBase-DKriBYi6.js";import"./index-DFRpaVUm.js";function G(){N(()=>{P`
# 虚拟列表,自定义滚动

这个虚拟列表,需要每条记录提供自己的高度,这个高度是预先于dom渲染存在的.

自定义滚动,基于animateSignal动画,动画曲线是模仿flutter的Clamping算法,带有一定的弹性.
`});const f=C(1e3,i=>({id:i,color:d.color.rgb(),height:d.number.int({min:30,max:80})})),a=m(f),r=F(0),p=h.get(),b=h.get(100);o.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1",children(i){const s=m(0);W(i,()=>{s.set(i.clientHeight),u()});const x=L(()=>{const t=a.get();let e=0;for(let n=0;n<t.length;n++)e=e+t[n].height;return e});i.addEventListener("pointerdown",t=>{r.stop(),V(H.from(t,{getPage:w,scrollDelta(e,n){r.set(r.get()+e),u()},onFinish(e){return _({scroll:r,frictional:p.getFromVelocity(e),containerSize:s.get(),contentSize:x(),edgeConfig(n){return b.getFromVelocity(n).animationConfig()}})}}))});function y(t){return t.height}const{paddingBegin:S,subList:v}=k(()=>M(a.get(),r.get(),s.get(),y));o.div({s_transform(){return`translateY(${-r.get()}px)`},s_paddingTop(){return S()+"px"},children(){E(function(t){const e=a.get(),[n,l]=v();console.log("range",n,l);for(let g=n;g<l;g++){const c=e[g];t(c.id,c)}},function(t,e){o.div({className:"flex items-center justify-center min-h-0",s_height(){return e.getValue().height+"px"},s_maxHeight(){return e.getValue().height+"px"},s_background(){return e.getValue().color},children(){I(()=>e.getValue().id+"--"),o.input({className:"daisy-input daisy-input-xs"})}})})}})}})}export{G as default};
