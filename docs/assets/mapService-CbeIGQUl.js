const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-B6vebJDs.js","./_commonjsHelpers-CqkleIqs.js"])))=>i.map(i=>d[i]);
import{e as l,ak as p}from"./index-Dxu4lnfn.js";class d{map=null;constructor(o){this.map=o}static async initMap(o,i,a){window._AMapSecurityConfig={securityJsCode:"811146c1dedbe9a85efd6941649c3c2f"},await u();const e=new window.AMap.Map(o,{center:i,zoom:a,resizeEnable:!0});return e.plugin("AMap.Geolocation",()=>{const r=new window.AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB"});e.addControl(r)}),e}searchPlace(o,i){return new Promise(a=>{this.map.plugin("AMap.AutoComplete",()=>{new window.AMap.AutoComplete({city:i}).search(o,(r,s)=>{if(r==="complete"&&s.tips){const c=s.tips.map(t=>({id:t.id,name:t.name,address:t.district+t.address,dropdown:!0,position:t.location?[t.location.lng,t.location.lat]:null}));a(c)}else a(l)})})})}locateCurrentPosition(){return new Promise(o=>{this.map.plugin("AMap.Geolocation",()=>{new window.AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4}).getCurrentPosition((a,e)=>{a==="complete"&&e.position?o([e.position.lng,e.position.lat]):o(null)})})})}setCenter(o){this.map.setCenter(o)}setZoom(o){this.map.setZoom(o)}destroy(){this.map.destroy()}}async function u(){window.AMap||await p(()=>import("./index-B6vebJDs.js").then(n=>n.i),__vite__mapDeps([0,1]),import.meta.url).then(n=>n.load({key:"03df49f09390a61d18f9e85389487e8e",version:"2.0",plugins:["AMap.Geolocation","AMap.AutoComplete","AMap.PlaceSearch"]}))}export{d as MapService};
