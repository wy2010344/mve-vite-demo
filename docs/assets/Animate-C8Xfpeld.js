const q=Date.now||function(){return+new Date},a=60,m=1e3,r={};let j=1;function x(s){const o=r[s]!=null;return o&&(r[s]=null),o}function M(s,o,d,l,p){const u=q();let F=u,t=0,i=0;const n=j++,f=function(A){const c=A!==!0,e=q();if(!r[n]||o&&!o(n)){r[n]=null,d?.(a-i/((e-u)/m),n,!1);return}if(c){const h=Math.round((e-F)/(m/a))-1;for(let w=0;w<Math.min(h,4);w++)f(!0),i++}l&&(t=(e-u)/l,t>1&&(t=1));const D=p?p(t):t;(s(D,e,c)===!1||t===1)&&c?(r[n]=null,d?.(a-i/((e-u)/m),n,t===1||l==null)):c&&(F=e,requestAnimationFrame(f))};return r[n]=!0,requestAnimationFrame(f),n}export{M as start,x as stop};
