import{aw as F,c as g,z as D,e as y,ar as N,ax as f,v as T,g as b,av as w,l as A,b as m,m as x,u as L,t as M,E as P,f as K}from"./index-BeB-7kZt.js";import{m as E,c as _,e as $,d as z,i as C,f as q,a as B,t as I}from"./forceLayout-BgrISgEq.js";import{r as R}from"./onlyMobile-l-FGsgL-.js";function G(){R(function({width:s,height:a}){const u=F(()=>{const e=Array.from({length:400},(t,o)=>({index:o})),n=[];for(let t=0;t<20;++t)for(let o=0;o<20;++o)t>0&&n.push({source:(t-1)*20+o,target:t*20+o}),o>0&&n.push({source:t*20+(o-1),target:t*20+o});return{nodes:e,links:n}}),k=g(u.nodes),h=g(u.links),l=g(void 0),i=D(r=>E({nodes:r?.nodes||y,links:r?.links||y,fromLinks:h.get(),fromNodes:k.get(),createForceNode(e,n,t){return _(e,2,n,z,$)},getNodeKey(e){return e.index},getSorceKey(e){return e.source},getTargetKey(e){return e.target},createFromKey(e){return{index:e}}})),c=N(C()),S=q({getStrength:f(1),getDistance:f(20),iterations:10}),v=B({getStrenth:f(-30)}),d=2;function p(){const r=i();I(d,c,r.nodes,e=>{S(r.links,d,e),v(r.nodes,d,e)})}T(b(()=>{p(),w()})),A(K.canvas({className:"touch-none",s_width(){return`${s()}px`},s_height(){return`${a()}px`}}),function({canvas:r}){m(()=>i().links,e=>{x({x:e.source.x.dSignal.get,y:e.source.y.dSignal.get,withPath:!0,draw({ctx:n,path:t}){t.moveTo(0,0),t.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),L(1,"#aaa")}})}),m(()=>i().nodes,e=>{x({x:e.x.dSignal.get,y:e.y.dSignal.get,onPointerDown(n){c.alphaTarget=.3,l.set(e),P({onMove(t){e.x.f=t.offsetX-s()/2,e.y.f=t.offsetY-a()/2},onEnd(t){c.alphaTarget=0,e.x.f=void 0,e.y.f=void 0,l.set(void 0)}},{element:r})},withPath:!0,draw(n){n.path.arc(0,0,6,0,2*Math.PI),M("#000"),n.ctx.fillText(`${e.value.index}`,3,-3)}})})},{beforeDraw(r){r.translate(s()/2,a()/2)}})})}export{G as default};
