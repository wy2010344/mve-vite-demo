import{g}from"./index-Bn6QTqXa.js";const u=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd"];function I(n){return g(n,i=>({id:i,x:Math.random()*400+50,y:Math.random()*200+50,vx:(Math.random()-.5)*8,vy:(Math.random()-.5)*8,radius:Math.random()*15+10,color:u[i%u.length],selected:!1,trail:[]}))}function b(n,i,o){const{gravity:m,bounce:r,containerWidth:l,containerHeight:h}=i;return n.map(f=>{const a={...f};return a.x+=a.vx,a.y+=a.vy,a.vy+=m,a.x-a.radius<=0&&(a.x=a.radius,a.vx*=-r),a.x+a.radius>=l&&(a.x=l-a.radius,a.vx*=-r),a.y-a.radius<=0&&(a.y=a.radius,a.vy*=-r),a.y+a.radius>=h&&(a.y=h-a.radius,a.vy*=-r),n.forEach(t=>{if(t.id!==f.id){const s=a.x-t.x,c=a.y-t.y,x=Math.sqrt(s*s+c*c),d=a.radius+t.radius;if(x<d){const e=Math.atan2(c,s),v=t.x+Math.cos(e)*d,M=t.y+Math.sin(e)*d;a.x=v,a.y=M;const y=Math.sqrt(a.vx*a.vx+a.vy*a.vy);a.vx=Math.cos(e)*y*.8,a.vy=Math.sin(e)*y*.8}}}),o?(a.trail.push({x:a.x,y:a.y,opacity:1}),a.trail.length>20&&a.trail.shift(),a.trail.forEach((t,s)=>{t.opacity=s/a.trail.length*.6})):a.trail=[],a})}class C{constructor(i,o){this.updateCallback=i,this.isPlayingGetter=o}animationId=null;start(){this.animationId||this.animate()}stop(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}animate=()=>{this.updateCallback(),this.isPlayingGetter()?this.animationId=requestAnimationFrame(this.animate):this.animationId=null}}export{C as AnimationManager,I as createBalls,b as updateBallPhysics};
