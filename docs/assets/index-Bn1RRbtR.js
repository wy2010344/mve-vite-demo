import{f as m}from"./chunk-LSEVNFON-G8OzWBoO.js";import{aL as C,c as d,A as F,f as i,an as u,m as L,p as V,Q as w,R as H,U as _,C as h,bW as k,bp as N,aO as E,bX as I}from"./index-DzjyJcX9.js";import{e as M}from"./explain-55b8_AdP.js";import{m as P}from"./markdown-CMudKybz.js";import W from"./hookMeasureHeight-BSlWogcs.js";import"./iconBase-DKriBYi6.js";import"./index-DFRpaVUm.js";function O(){M(()=>{P`
# 虚拟列表,自定义滚动,自底向顶滚动

这个虚拟列表,需要每条记录提供自己的高度,这个高度是预先于dom渲染存在的.

自定义滚动,基于animateSignal动画,动画曲线是模仿flutter的Clamping算法,带有一定的弹性.
`});const p=C(1e3,o=>({id:o,color:m.color.rgb(),height:m.number.int({min:30,max:80})})),a=d(p),r=F(0),f=h.get(),b=h.get(100);i.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1 relative",children(o){const s=d(0);W(o,()=>{s.set(o.clientHeight),u()});const x=L(()=>{const t=a.get();let e=0;for(let n=0;n<t.length;n++)e=e+t[n].height;return e});o.addEventListener("pointerdown",t=>{r.stop(),V(w.from(t,{getPage:H,scrollDelta(e,n){r.set(r.get()+e),u()},opposite:!0,onFinish(e){return _({scroll:r,frictional:f.getFromVelocity(e),containerSize:s.get(),contentSize:x(),edgeConfig(n){return b.getFromVelocity(n).animationConfig()}})}}))});function y(t){return t.height}const{paddingBegin:S,subList:v}=k(()=>I(a.get(),r.get(),s.get(),y));i.div({className:"absolute w-full",s_bottom(){return-r.get()+"px"},s_paddingBottom(){return S()+"px"},children(){N(function(t){const e=a.get(),[n,l]=v();console.log("range",n,l);for(let g=l;g>n;g--){const c=e[g-1];t(c.id,c)}},function(t,e){i.div({className:"flex items-center justify-center min-h-0",s_height(){return e.getValue().height+"px"},s_maxHeight(){return e.getValue().height+"px"},s_background(){return e.getValue().color},children(){E(()=>e.getValue().id+"--"),i.input({className:"daisy-input daisy-input-xs"})}})})}})}})}export{O as default};
