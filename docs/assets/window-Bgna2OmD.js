import{b1 as X,b2 as Y,b3 as $,b4 as R,b5 as v,f as n,b6 as A,au as x,b7 as H,aw as q,b8 as w,E as B,a6 as f}from"./index-BNMIKCZr.js";const{renderPop:G,createPop:b}=X();let z;window.addEventListener("pointerup",s=>z=s,!0);function j(s){return function(...i){function t(){return s(t,...i)}return s(t,...i)}}function J(s=Y){const i=s();return function(t,a){let o=i.get(t);if(o)return b(o.panel);{o=a(function(d){d?o?.closeOther():l.closeIt(null)}),i.set(t,o);const l=b(o.panel);return l.closeSet.add(()=>{i.delete(t)}),l}}}const K=j(function(s,i){const t=[];return{closeOther(){t.forEach(q)},panel(a){const o=$(),l=R(),d=z,{title:_,typeIcon:y,width:N,height:C,x:P,y:S,minHeight:I,minWidth:M,children:D,className:E,noCopy:W,titleControls:L,...k}=i(a),p=v({size:N,direction:"x",position:P??d?.pageX??0,minSize:M,getMaxSize(){return o.clientWidth}}),h=v({size:C,direction:"y",position:S??d?.pageY??0,minSize:I,getMaxSize(){return o.clientHeight}});function u(e){const c=w(p.onMove(e)),O=w(h.onMove(e));let m=e.point;document.body.style.userSelect="none";function g(r){c(r.pageX-m.pageX),O(r.pageY-m.pageY),m=r}B({onMove(r){g(r)},onEnd(r){g(r),document.body.style.userSelect=""}})}n.div({...k,onPointerDown(e){l()||a.setIndex(-1)},willRemove(e){return e.classList.remove("ds-animate-appear"),e.classList.add("ds-animate-disappear"),H(300)},className:A(E,"ds-animate-appear absolute  overflow-hidden ds-window flex flex-col"),s_left(){return`${p.position()}px`},s_top(){return`${h.position()}px`},s_width(){return`${p.size()}px`},s_height(){return`${h.size()}px`},s_zIndex:a.getIndex,children(){n.div({className:"ds-titlebar",children(){n.div({className:"ds-titlebar__content",children(){n.span({className:"ds-titlebar__icon",children:y}),n.span({className:"ds-titlebar__title ",children:_})},onPointerDown(e){u({action:"move",point:e})}}),n.div({className:"ds-titlebar__controls",children(){L?.(),W||n.button({className:"ds-control bg-green-500/80 hover:bg-green-400 text-black text-xs",children:"□",title:"克隆",onClick(){const e=s(),c=b(e.panel);c.closeSet.add(()=>{x(t,c.closeIt),x(t,e.closeOther)}),t.push(c.closeIt),t.push(e.closeOther)}}),n.button({className:"ds-control bg-red-500/80 hover:bg-red-400 text-white",children:"×",title:"关闭",onClick:a.closeIt})}})}}),D(),n.div({className:"ds-resize-handle ds-resize-handle--se",onPointerDown(e){u({action:"drag",point:e,bottom:!0,right:!0})}}),n.div({className:"ds-resize-handle ds-resize-handle--s",onPointerDown(e){u({action:"drag",point:e,bottom:!0})}}),n.div({className:"ds-resize-handle ds-resize-handle--e",onPointerDown(e){u({action:"drag",point:e,right:!0})}})}})}}}),Q=f`custom-scrollbar min-h-0 overflow-y-auto`,T=f`
                h-6 px-4 
                backdrop-blur-md 
                text-white text-sm 
                rounded-b-2xl shadow-inner`;export{J as cacheCreater,b as createWindow,Q as customScrollcss,j as instanceWithCopy,z as lastClientEvnet,K as panel,G as renderWindows,T as statusBarCss};
