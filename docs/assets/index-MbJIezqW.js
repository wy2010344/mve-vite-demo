import{aw as F,c as d,z as D,e as m,ar as N,ax as f,v as T,g as b,av as w,l as A,b as x,m as l,u as L,t as M,E as P,f as K}from"./index-D84f0y8o.js";import{m as E,c as _,e as z,d as C,i as q,f as B,a as I,t as R}from"./forceLayout-B04iL2ON.js";import{r as X}from"./onlyMobile-CT76tz7V.js";function H(){X(function({width:a,height:o}){const u=F(()=>{const e=Array.from({length:400},(t,s)=>({index:s})),n=[];for(let t=0;t<20;++t)for(let s=0;s<20;++s)t>0&&n.push({source:(t-1)*20+s,target:t*20+s}),s>0&&n.push({source:t*20+(s-1),target:t*20+s});return{nodes:e,links:n}}),k=d(u.nodes),h=d(u.links),y=d(void 0),i=D(r=>E({nodes:(r==null?void 0:r.nodes)||m,links:(r==null?void 0:r.links)||m,fromLinks:h.get(),fromNodes:k.get(),createForceNode(e,n,t){return _(e,2,n,C,z)},getNodeKey(e){return e.index},getSorceKey(e){return e.source},getTargetKey(e){return e.target},createFromKey(e){return{index:e}}})),c=N(q()),S=B({getStrength:f(1),getDistance:f(20),iterations:10}),v=I({getStrenth:f(-30)}),g=2;function p(){const r=i();R(g,c,r.nodes,e=>{S(r.links,g,e),v(r.nodes,g,e)})}T(b(()=>{p(),w()})),A(K.canvas({className:"touch-none",s_width(){return a()+"px"},s_height(){return o()+"px"}}),function({canvas:r}){x(()=>i().links,e=>{l({x:e.source.x.dSignal.get,y:e.source.y.dSignal.get,withPath:!0,draw({ctx:n,path:t}){t.moveTo(0,0),t.lineTo(e.target.x.d-e.source.x.d,e.target.y.d-e.source.y.d),L(1,"#aaa")}})}),x(()=>i().nodes,e=>{l({x:e.x.dSignal.get,y:e.y.dSignal.get,onPointerDown(n){c.alphaTarget=.3,y.set(e),P({onMove(t){e.x.f=t.offsetX-a()/2,e.y.f=t.offsetY-o()/2},onEnd(t){c.alphaTarget=0,e.x.f=void 0,e.y.f=void 0,y.set(void 0)}},{element:r})},withPath:!0,draw(n){n.path.arc(0,0,6,0,2*Math.PI),M("#000"),n.ctx.fillText(e.value.index+"",3,-3)}})})},{beforeDraw(r){r.translate(a()/2,o()/2)}})})}export{H as default};
