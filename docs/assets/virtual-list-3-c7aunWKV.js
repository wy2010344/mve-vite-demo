import{f as m}from"./chunk-LSEVNFON-G8OzWBoO.js";import{c as u,at as C,B as F,g as s,a7 as h,a1 as V,q as f,p as w,V as _,X as k,_ as L,C as p,aZ as H,aS as N,aN as z,$ as B}from"./index-C09L67qZ.js";import{e as E}from"./explain-B-rFNxaP.js";import{m as P}from"./markdown-01kIHTyE.js";import"./iconBase-CiSp5Y-1.js";import"./index-BDV14NvS.js";function j(){E(()=>{P`
# 虚拟列表,自定义滚动

这个虚拟列表,需要每条记录提供自己的高度,这个高度是预先于dom渲染存在的.

自定义滚动,基于animateSignal动画,动画曲线是模仿flutter的Clamping算法,带有一定的弹性.
`});const g=u(C(1e3,i=>({id:i,color:m.color.rgb(),height:m.number.int({min:30,max:80})}))),r=F(0),x=p.get(),b=p.get(100);s.div({className:"touch-none w-[90%] h-[90%] overflow-hidden border-red-100 border-1",children(i){const l=u(0),c=new ResizeObserver(function(t){l.set(i.clientHeight),h()});c.observe(i),V(()=>{c.disconnect()});const y=f(()=>{const t=g.get();let e=0;for(let n=0;n<t.length;n++)e=e+t[n].height;return e});i.addEventListener("pointerdown",t=>{w(_.from(t,{getPage:k,scrollDelta(e,n){r.set(r.getTarget()+e),h()},onFinish(e){return L({scroll:r,frictional:x.getFromVelocity(e),containerSize:l.get(),contentSize:y(),edgeConfig(n){return b.getFromVelocity(n).animationConfig()},edgeBackConfig:B})}}))});const d=f(()=>H(g.get(),r.get(),l.get(),t=>t.height));s.div({s_transform(){return`translateY(${-r.get()}px)`},s_paddingTop(){return d().paddingBegin+"px"},children(){N(function(t){const e=g.get(),{beginIndex:n,endIndex:v}=d();for(let o=n;o<v;o++){const S=e[o];t(S.id,e[o],function(T,a){s.div({className:"flex items-center justify-center min-h-0",s_height(){return a.getValue().height+"px"},s_maxHeight(){return a.getValue().height+"px"},s_background(){return a.getValue().color},children(){z(()=>a.getValue().id+"--"),s.input({className:"daisy-input daisy-input-xs"})}})})}})}})}})}export{j as default};
