import{c as O,L as G,Y as h,m as v,M as J,W as ee,O as te,N as ne,H as I,w as L,P as re,Q as p,R as V,h as ae,f as se,T as oe,g as s,k as ie,a as N,U as k,V as S,X as le,Z as T,_ as ce,B as z,$ as y,a0 as me,a1 as X,a2 as q}from"./index-BdTCZeBf.js";import{S as H}from"./index--WBo1qrp.js";import{e as de}from"./explain-Yn3lRy9J.js";import{a as fe}from"./onlyMobile-BPvrjsyr.js";import ue from"./hookTrackLayout-COQ3QauL.js";import he,{firstDayOfWeekIndex as w,WEEKTIMES as ye,WEEKS as pe}from"./firstDayOfWeek-Bj2uIjxk.js";import{f as ge}from"./fixRightTop-D_vbQmlu.js";import{t as xe}from"./themeDropdown-D2PF22xG.js";import _e from"./demoList-BU9GBSn4.js";import{f as ve}from"./chunk-LSEVNFON-G8OzWBoO.js";import"./iconBase-C9j_FKPc.js";import"./index-D--gOgnP.js";const A="select-cell";function $e(){de(()=>{}),fe(function({width:f},g){g&&ge(function(){he(),xe()}),O(void 0);const a=O(h.fromDate(new Date),G),m=v(n=>{const o=a.get();return new J(o.year,o.month,w.get())}),x=v(()=>{const n=a.get();return ee.from(n.year,n.month,n.day,w.get())}),F=window;F.__date=a;const l=new te("y",{maxScroll(){return M.get()},targetSnap:ne([{beforeForce:1,size:d()*5,afterForce:1}])}),M=l.measureMaxScroll();function d(){return f()/7}const u=v(()=>l.get()>=5*d()),W=I(0),Y=L(()=>{const n=d(),o=n*5,e=re(p(a.get()),w.get())-1;return V({0:0,[o]:-n*e},X)}),D=I(0);let E=a.get();ae(()=>D.onAnimation(),function(n){n||(E.equals(a.get())||se(()=>{u()?l.animateTo(d()*5):l.animateTo(0)}),E=a.get())});function C(){return K.clientWidth}const b=oe(W,C);b.hookCompare(x,function(n,o){return u()?n.cells[0].toNumber()-o.cells[0].toNumber():0}),b.hookCompare(m,function(n,o){return u()?0:n.toNumber()-o.toNumber()}),ue(a.get,A);const R=L(()=>{const n=d()*5;return V({0:d()*7,[n]:d()*2},X)}),K=s.div({s_height:"100%",s_overflow:"hidden",s_userSelect:"none",onTouchMove(n){n.preventDefault()},onWheel:l.wheelEventListener,onPointerDown:l.pointerEventListner,children(n){const o=s.div({s_transform(){return`translateY(${-l.get()}px)`},className:"flex flex-col",s_minHeight(){return`calc(100% + ${f()}px * 5 / 7)`},children(){s.div({className:"bg-base-100 relative z-10",s_display:"flex",s_alignItems:"stretch",s_transform(){return`translateY(${Math.max(l.get(),0)}px)`},children(){s.h1({className:"text-display-large",childrenType:"text",children(){return a.get().month}}),s.div({className:"flex flex-col items-start justify-center",children(){s.div({className:"text-title-large",childrenType:"text",children(){return a.get().year}}),s.div({className:"text-title-medium",childrenType:"text",children(){return`月 ${a.get().day}日`}})}})}}),s.div({s_zIndex:1,s_position:"relative",s_height(){return d()*7+"px"},children(){s.div({className:"bg-base-300",s_overflow:"hidden",s_height(){const e=l.get();return R(e)+"px"},s_transform(){return`translateY(${Math.max(l.get(),0)}px)`},onPointerDown:b.getOnPointerDown({direction:"x",callback(e,t){if(u()){const r=p(a.get());r.setTime(r.getTime()+e*ye),e&&a.set(h.fromDate(r))}else{const r=e<0?m().lastMonth():m().nextMonth();a.get().day>r.days?a.set(h.from(r.year,r.month,r.days)):a.set(h.from(r.year,r.month,a.get().day))}}}),children(){s.div({s_position:"relative",s_transform(){return`translateX(${-W.get()}px)`},children(){ie(u,function(){N(k(()=>{const e=x();return[e.beforeWeek(),e,e.nextWeek()]},S),function(e,t){Q(e,t)})},function(){N(k(()=>{const e=m();return[e.lastMonth(),e,e.nextMonth()]},S),function(e,t){B(e,t)})})}})}})}}),s.div({className:" flex-1",data_a:"99",plugins:[le({direction:"x",scroll:D,getValue:a.get,getSize:C,compare(e,t){const r=p(t).valueOf(),c=p(e).valueOf()-r;let _=0;return c>=q?_=1:c<=-864e5&&(_=-1),_},callback(e){const t=p(a.get());t.setTime(t.getTime()+e*q),a.set(h.fromDate(t))}})],children(){s.div({className:"relative",s_transform(){return`translateX(${-D.get()}px)`},children(){N(k(()=>{const e=a.get();return[e.beforeDay(),e,e.nextDay()]},S),function(e,t){T.div({attrs(r){const i=t();i!=1&&(r.s_position="absolute",r.s_inset=0,r.s_transform=`translateX(${(i-1)*100}%)`)},children(){_e(ve.number.int({max:17,min:15}))}})})}})}})}});M.hookInit(n,o)}});function B(n,o){function e(){const t=a.get(),r=n;return t.year==r.year&&t.month==r.month}return T.div({attrs(t){const r=o();if(r==1){const i=l.get();t.s_transform=` translateY(${Y(i)}px)`}else t.s_position="absolute",t.s_inset=0,t.s_transform=`translateX(${(r-1)*100}%)`},children(){$(()=>{const t=l.get();return`translateY(${-Y(t)}px)`}),s.div({children(){for(let t=0;t<6;t++)s.div({className:"flex items-center justify-center relative",children(){for(let r=0;r<7;r++){const i=n.fullDayOf(r,t);let c=n;i.type=="last"?c=n.lastMonth():i.type=="next"&&(c=n.nextMonth()),j(r,{year:c.year,month:c.month,day:i.day});const U=H.fromYmd(c.year,c.month,i.day).getLunarDay(),Z=v(()=>i.type=="this"&&e()&&a.get().day==i.day);P({day:i.day,onClick(){a.set(h.from(c.year,c.month,i.day))},lunarDay:U,selected:Z,hide(){return u()?!1:i.type!="this"}})}}})}})}})}function $(n){s.div({className:"bg-base-300 relative z-10",s_display:"flex",s_alignItems:"center",s_justifyContent:"space-between",s_transform:n,children(){for(let o=0;o<7;o++)s.div({className:"flex-1 aspect-square flex items-center justify-center",childrenType:"text",children(){return pe[m().weekDay(o)]}})}})}function Q(n,o){T.div({attrs(e){e.className="self-start",o()!=1&&(e.s_position="absolute",e.s_inset=0,e.s_transform=`translateX(${(o()-1)*100}%)`)},children(){$(),s.div({className:"flex items-center justify-center relative",children(){for(let e=0;e<7;e++){const t=n.cells[e];j(e,t);const i=H.fromYmd(t.year,t.month,t.day).getLunarDay();P({hide(){return!1},day:t.day,lunarDay:i,selected(){return me(t,a.get())},onClick(){a.set(t)}})}}})}})}})}function j(f,g){f==0&&s.div({className:"absolute left-0 text-label-small",childrenType:"text",children(){return ce(p(g),w.get())}})}function P({day:f,lunarDay:g,hide:a,selected:m,onClick:x}){s.div({s_flex:1,s_aspectRatio:1,s_display:"flex",s_flexDirection:"column",s_alignItems:"center",s_justifyContent:"center",className(){return a()?y` opacity-30`:""},onClick:x,children(){s.div({s_aspectRatio:1,s_display:"grid",s_placeItems:"center",s_position:"relative",children(){s.div({id(){return m()?A:""},className(){return z(y`absolute inset-0  rounded-full z-0`,m()&&y`bg-primary`)}}),s.span({s_position:"relative",className(){return z(m()?y`text-primary-content`:y`text-base-content`,y`transition-all`)},childrenType:"text",children:f})}}),s.div({s_fontSize:"10px",childrenType:"text",className:"text-neutral-500",children:g.getName()})}})}export{$e as default};
