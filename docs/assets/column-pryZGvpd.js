import{m as A,c as E,bd as l}from"./index-8-4crGqb.js";import{ArrayRender as k}from"./xmlRender-DpHHh9d-.js";import x from"./task-CcwxLf2Q.js";import C from"./indicator-DfT2N8SS.js";import D from"./columnBase-Dv2EFVeE.js";import{TaskContext as N,ColumnContext as b}from"./context-DaeB-73e.js";import"./cardBase-DigYx8dJ.js";import"./mve-icon-Cq61_dwU.js";import"./index-DDyGFxxM.js";import"./type-DRAuYFMP.js";import"./chunk-LSEVNFON-G8OzWBoO.js";function G({title:v,type:s}){const{dragId:g,tasks:n}=N.consume(),u=A(function(){return n.get().filter(e=>e.type==s)}),d=E(void 0);b.provide({type:s,getActive:d.get});function p(e){var r;const i=Array.from(document.querySelectorAll(`[data-column="${s}"]`)),t=100,o=(r=i.reduce((m,I)=>{const T=I.getBoundingClientRect(),f=e-(T.top+t/2);return f<0&&f>m.offset?{offset:f,element:I}:m},{offset:Number.NEGATIVE_INFINITY,element:i.at(-1)}).element)==null?void 0:r.dataset.before;return d.get()!=o&&d.set(o),o}return l.createElement(D,{type:s,title:v,tasks:n,getTasks:u,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move",p(e.clientY)},onDragLeave:e=>{d.set(void 0)},onDrop:e=>{const i=p(e.clientY),t=g.get();if(i!=t){const a=n.get().find(r=>r.id==t),o=a.type==s?a:{...a,type:s},c=n.get().filter(r=>r.id!=t);if(i=="")c.push(o);else{const r=c.findIndex(m=>m.id==i);c.splice(r,0,o)}n.set(c)}d.set(void 0)}},l.createElement(k,{getArray:u,getKey:e=>e.id,render:function(e,i,t){x({getTask:e,onDelete(a){n.set(n.get().filter(o=>o.id!=t))},onDragStart(a){g.set(t)}})}}),l.createElement(C,null))}export{G as default};
