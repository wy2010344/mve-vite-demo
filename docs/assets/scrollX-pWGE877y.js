var u=Object.defineProperty;var z=(o,t,e)=>t in o?u(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>z(o,typeof t!="symbol"?t+"":t,e);import{H as G,C as w,c as g,ai as d,i as C,aj as m,v as p,ak as v,al as x,am as y}from"./index-DSI5ljsY.js";class D{constructor(t,e){this.container=t,this.content=e}getContainerSize(){return this.container.clientWidth}getContentSize(){return this.content.offsetWidth}getDetail(t){return t.deltaX}}class F{constructor(t,e){this.container=t,this.content=e}getContainerSize(){return this.container.clientHeight}getContentSize(){return this.content.offsetHeight}getDetail(t){return t.deltaY}}function b(o){return function(t){c.hookGet(t,o)}}class c{constructor(t,e){s(this,"edgeSlow");s(this,"scroll");s(this,"scrollFactory");s(this,"getScroll");s(this,"directionGet");s(this,"scrollToEdge",t=>{if(this.config.nextScroll)return this.config.nextScroll.destination(t),!0});s(this,"destination",t=>{m({...this.config,scroll:this.scroll,frictional:this.scrollFactory.getFromVelocity(t),containerSize:this.directionGet.getContainerSize(),contentSize:this.directionGet.getContentSize(),scrollToEdge:this.scrollToEdge})});this.content=t,this.config=e,this.scroll=(e==null?void 0:e.scroll)||G(0),this.getScroll=this.scroll.get,this.scrollFactory=(e==null?void 0:e.factory)||w.get(),this.edgeSlow=this.config.edgeSlow||3;const i=this.config.container;this.config.direction=="x"?this.directionGet=new D(i,t):this.directionGet=new F(i,t),this.wheelScroll(),this.pointerScroll();const n=this,S=g(this.directionGet.getContainerSize()),f=g(this.directionGet.getContentSize()),r=new ResizeObserver(function(){const l=n.directionGet.getContainerSize(),a=n.directionGet.getContentSize(),h=d(l,a);n.scroll.getTarget()>h&&n.scroll.silentChangeTo(h),S.set(l),f.set(a)});r.observe(e.container),r.observe(t),C(()=>{r.disconnect()})}static hookGet(t,e){return new c(t,e)}wheelScroll(){let t=performance.now();this.config.container.addEventListener("wheel",e=>{const i=e.timeStamp-t,n=this.directionGet.getDetail(e);this.drag(n),this.destination(n/i),t=e.timeStamp})}drag(t){const i=this.scroll.get()+t,n=d(this.directionGet.getContainerSize(),this.directionGet.getContentSize());i<0||i>n?this.config.nextScroll?i<0?(this.scroll.set(0),this.config.nextScroll.drag(i)):(this.scroll.set(n),this.config.nextScroll.drag(i-n)):i<0?this.scroll.set(i/this.edgeSlow):this.scroll.set(n+(i-n)/this.edgeSlow):this.scroll.set(i)}pointerScroll(){const t=this;this.config.container.addEventListener("pointerdown",function(e){t.scroll.stop(),p(v.from(e,{getPage:t.config.direction=="x"?x:y,scrollDelta(i,n){t.drag(i)},onFinish:t.destination}))})}}export{c as OnScroll,b as pluginOnScroll};
