import{f as e,d as c,aF as x,c as h,aG as p,j as m}from"./index-Dxu4lnfn.js";import{h as y}from"./index-CT0uQ99y.js";import"./canvasRender-CK3mhhFQ.js";import"./_commonjsHelpers-CqkleIqs.js";function v(i,d){i.length>0&&e.div({className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-96 overflow-y-auto z-10",children(){i.forEach((t,n)=>{n>8||e.div({className:"p-3 hover:bg-gray-100 cursor-pointer transition-colors duration-150",onClick(){d(t)},children(){e.div({className:"font-medium text-gray-900",childrenType:"text",children:t.name}),e.div({className:"text-sm text-gray-600 truncate",childrenType:"text",children:t.address})}})})}})}function w(){e.div({className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 animate-pulse",children(){c.svg({className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children(){c.circle({className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"4"}),c.path({className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})}})}})}function k(){e.div({className:"absolute inset-0 flex items-center justify-center bg-white",children(){e.div({className:"text-center",children(){e.div({className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-2"}),e.p({className:"text-gray-600",childrenType:"text",children:"åœ°å›¾åŠ è½½ä¸­..."})}})}})}function T({map:i,marker:d,get:t,favoritePoints:n}){const a=new window.AMap.InfoWindow({offset:new window.AMap.Pixel(0,-30),closeWhenClickMap:!0,autoMove:!1}),u=x(a.Fy,function(){const s=h(t().remark||""),o=y();return o.plugin(a.dom),p(()=>[o.width(),o.height()],r=>{a.setSize(r)}),e.div({className:"text-gray-900",children(){e.div({className:"flex justify-between items-start mb-3",children(){e.h4({className:"m-0 text-gray-800 text-sm font-semibold",childrenType:"text",children(){return t().name||"æœªçŸ¥åœ°ç‚¹"}}),m(()=>t().favorite,function(){e.span({className:"ml-2 text-green-600 text-xs bg-green-50 px-2 py-1 rounded-md",childrenType:"text",children:"å·²æ”¶è—"})},function(){e.span({className:"ml-2 text-gray-500 text-xs bg-gray-50 px-2 py-1 rounded-md",childrenType:"text",children:"æœªæ”¶è—"})})}}),e.div({className:"mb-3 text-gray-600 text-xs leading-relaxed",children(){e.div({className:"flex items-center mb-2",children(){e.span({className:"text-blue-500 mr-2",childrenType:"text",children:"ðŸ“"}),e.span({className:"text-gray-600",childrenType:"text",children(){return`åœ°å€: ${t().address||"æš‚æ— åœ°å€ä¿¡æ¯"}`}})}}),e.div({className:"flex items-start mb-4",s_display(){return t().favorite?"flex":"none"},children(){e.span({className:"text-blue-500 mr-2 mt-1",childrenType:"text",children:"ðŸ“"}),e.div({className:"flex-1",children(){e.div({className:"font-medium text-gray-700 mb-1",childrenType:"text",children:"å¤‡æ³¨:"}),e.input({className:"w-full px-2 py-1 border border-gray-300 rounded text-xs text-gray-900",type:"text",value:s.get(),onInput(r){s.set(r.target.value)}})}})}})}}),e.div({className:"flex justify-end gap-2",children(){m(()=>t().favorite,function(){e.button({className:"bg-blue-500 text-white border-none px-3 py-1 rounded-md cursor-pointer text-xs transition-all duration-200",childrenType:"text",s_display(){return t().remark!=s.get()?"block":"none"},children:"ä¿å­˜å¤‡æ³¨",onClick(){const r=n.get().map(l=>l.address===t().address&&l.name===t().name?{...l,remark:s.get()}:l);n.set(r)}}),e.button({className:"bg-red-500 text-white border-none px-3 py-1 rounded-md cursor-pointer text-xs transition-all duration-200",childrenType:"text",children:"å–æ¶ˆæ”¶è—",onClick(){n.set(n.get().filter(r=>!(r.address==t().address&&r.name==t().name)))}})},function(){e.button({className:"bg-green-500 text-white border-none px-3 py-1 rounded-md cursor-pointer text-xs transition-all duration-200",childrenType:"text",children:"æ·»åŠ æ”¶è—",onClick(){const r={...t(),favorite:!0,remark:"",position:t().position||[0,0]};n.set(n.get().concat(r))}})})}})}})});return a.on("close",()=>{u()}),a.open(i,d.getPosition()),a}export{T as renderInfoWindow,w as renderLoadingIndicator,k as renderMapLoading,v as renderSearchResults};
