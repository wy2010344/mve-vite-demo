import{f}from"./chunk-LSEVNFON-G8OzWBoO.js";import{c,k as h,f as e,aw as d}from"./index-BS7P0FCu.js";import{i as m,f as u,c as g}from"./index-BVRdux9z.js";import{e as y}from"./explain-BgBz3LB6.js";import{m as x}from"./markdown-DRKAcgAs.js";import{f as v,a as b}from"./themeDropdown-DrEnW2NR.js";import"./canvasRender-DBtyO6_b.js";import"./iconBase-DTyvG6of.js";function Z(){v(function(){b()}),y(()=>{x`
# 文本编辑与特殊渲染
目前主要可用于类似于代码录入,对不同的token进行不同的渲染
    `});const n="rich-text-demo",s=localStorage.getItem(n),r=c(s?{currentIndex:0,history:[JSON.parse(s)]}:m("abc @john check this https://chatgpt.com and email me at test@example.com")),{current:l,renderContentEditable:t}=u(r);h(l,o=>{localStorage.setItem(n,JSON.stringify(o))});const i=c(!1);e.div({children(){e.button({className:"daisy-btn",childrenType:"text",onClick(){i.set(!i.get())},children(){return i.get()?"转为编辑":"转为只读"}}),t({render(o,p){return e.pre({...p,className:"prose daisy-prose",contentEditable(){return i.get()?!1:g},spellcheck:!1,children(){k(o).forEach(a=>{typeof a=="string"?d(a):a.type=="at"?e.span({className:"daisy-tooltip text-primary ",children(){e.div({className:"daisy-tooltip-content not-prose",children(){e.div({className:"daisy-card",children(){e.div({className:"daisy-avatar",children(){e.div({className:"ring-primary ring-offset-base-100 w-24 rounded-full ring ring-offset-2",children(){e.img({src:f.image.avatar()})}})}})}}),e.div({className:"animate-bounce text-orange-400 -rotate-10 text-2xl font-black",childrenType:"text",children:"Wow!"})}}),d(a.value)}}):a.type=="url"?e.a({href:a.value,childrenType:"text",target:"_blank",children:a.value}):a.type=="email"&&e.a({href:`mailto:${a.value}`,childrenType:"text",target:"_blank",children:a.value})})}})}})}})}function k(n){const s=/(@\w+)|([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})|(https?:\/\/[^\s]+)/g;let r=[],l=0,t;for(;(t=s.exec(n))!==null;)t.index>l&&r.push(n.slice(l,t.index)),t[1]?r.push({type:"at",value:t[1]}):t[2]?r.push({type:"email",value:t[2]}):t[3]&&r.push({type:"url",value:t[3]}),l=s.lastIndex;return l<n.length&&r.push(n.slice(l)),r}export{Z as default};
