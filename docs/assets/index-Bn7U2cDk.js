import{aw as u,c as v,o as D,f as k,av as w,l as y,j as C,ax as _,a1 as $,z as b,aq as E}from"./index-Bn6QTqXa.js";import{s as I,k as m,l as S}from"./index-XVZQUbQ5.js";import F from"./column-kxLXI442.js";import{taskContext as O}from"./context-DUQMGtbK.js";import T from"./cardBase-BzPRqOuU.js";import{a as z}from"./index-BxY9dVzG.js";import"./canvasRender-DlxfwZGY.js";import"./_commonjsHelpers-CqkleIqs.js";import"./columnBase-MrowlwXW.js";import"./type-DRAuYFMP.js";import"./chunk-KZPPZA2C-rvBpA5M9.js";import"./xmlRender-eBDP6nR8.js";import"./index-C2aBu1xv.js";import"./iconBase-UU481Axx.js";import"./mve-icon-2ZBqkA6T.js";function R({tasks:g,columns:l}){const n=u(g),r=v(void 0),i=D(()=>{const e=r.get();if(e)return n.get().find(a=>a.id==e.id)}),{getAccept:f,createListContainer:h}=I({getDragData:r.get,setDragData:r.set,changeIndexAnimate(e,a,s){z(e,{[a]:[s,0]})},onDragFinish(e,a){if(a&&a.accept=="move"){const s=i(),p=e.targetPlaceholder;if(!p)throw"";const c=p.getBeforeId(),x=n.set(function(t){t=[...t];const d={...s,type:p.type};if(_(t,o=>o.id==e.id),c){for(let o=0;o<t.length;o++)if(t[o].id==c){t.splice(o,0,d);break}}else t.push(d);return t});setTimeout(()=>{x.commit()},10*1e3)}e.onDropEnd.set(!0),$()}});O.provide({tasks:n,dragData:r,dragTask:i,createListContainer:h,getAccept:f}),k.div({plugin(e){S(e,{shouldMeasure:r.get,direction:"x"})},className:"flex gap-6 overflow-x-auto overflow-y-hidden pb-6 flex-1 relative",children(){l.map(e=>{w(()=>{m.renderChild(F(e))})}),y(r.get,e=>{e&&C(i,function(){m.renderChild(m.createElement(T,{selected:E,onDelete:b,getTask:i,className:"pointer-events-none opacity-90 fixed",s_zIndex:1e3,s_width:`${e.width}px`,s_height:`${e.height}px`,s_top:()=>`${e.dragY.get()-e.y}px`,s_left:()=>`${e.dragX.get()-e.x}px`,s_transformOrigin:`${e.x}px ${e.y}px`,s_rotate:()=>r.get()?.onDropEnd.get()?"0deg":"-15deg"}))})})}})}export{R as default};
