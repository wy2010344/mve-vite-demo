import{m as e,u as t,d as n,c as o}from"./vendor.38655c0c.js";function i(n,o,i){const r=t.mve.arrayModelOf([]);function c(){r.size()>0&&r.remove(0)}return n.WatchAfter(o,(function(e){if(e){const{path:[t,...n],query:o}=e,d=r.get(0);if(t){const e=i[t]||l;d==e?d.route({path:n,query:o}):(r.remove(0),r.push(e),e.route({path:n,query:o}))}else c()}else c()})),e(r,(function(e,t,n){return t.render(e)}))}function r(e){const n=t.mve.valueOf({path:[],query:{}});return{route:n,render:t=>e(t,n)}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const l=r((function(e,t){return n({type:"div",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"},children:[n({type:"div",text:"404"}),n({type:"div",text:()=>t().path.join("")}),n({type:"div",text(){const e=t();return JSON.stringify(e.query)}})]})}));function c(e){function t(t){return function(n){n=n||window.event,e.resize(n,t)}}const o=e.allow,i=o?function(){return o()?"":"none"}:"";return[n({type:"div",style:{display:i,width:"100%",height:"7px",position:"absolute",top:"-3px",left:"0",cursor:"n-resize"},event:{mousedown:t({t:!0})}}),n({type:"div",style:{display:i,width:"7px",height:"100%",position:"absolute",right:"-3px",top:"0",cursor:"e-resize"},event:{mousedown:t({r:!0})}}),n({type:"div",style:{display:i,width:"7px",height:"100%",position:"absolute",left:"-3px",top:"0",cursor:"w-resize"},event:{mousedown:t({l:!0})}}),n({type:"div",style:{display:i,width:"100%",height:"7px",position:"absolute",bottom:"-3px",left:"0",cursor:"s-resize"},event:{mousedown:t({b:!0})}}),n({type:"div",style:{display:i,width:"15px",height:"15px",position:"absolute",top:"-7px",left:"-7px",cursor:"nw-resize"},event:{mousedown:t({t:!0,l:!0})}}),n({type:"div",style:{display:i,width:"15px",height:"15px",position:"absolute",top:"-7px",right:"-7px",cursor:"ne-resize"},event:{mousedown:t({t:!0,r:!0})}}),n({type:"div",style:{display:i,width:"15px",height:"15px",position:"absolute",bottom:"-7px",left:"-7px",cursor:"sw-resize"},event:{mousedown:t({b:!0,l:!0})}}),n({type:"div",style:{display:i,width:"15px",height:"15px",position:"absolute",bottom:"-7px",right:"-7px",cursor:"se-resize"},event:{mousedown:t({b:!0,r:!0})}})]}function d(){document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none",document.body.style.mozUserSelect="none",document.body.style["user-select"]="none"}function u(){document.body.style.webkitUserSelect="",document.body.style.msUserSelect="",document.body.style.mozUserSelect="",document.body.style["user-select"]=""}function s(e,t,n){return e?t.clientX-n.clientX:t.clientY-n.clientY}function p(e){let t=!1;function n(n){t&&e.move(n)}function o(t){u(),e.up&&(t=t||window.event,e.up(t)),l()}function i(t){u(),e.leave&&(t=t||window.event,e.leave(t)),l()}let r=e.border;function l(){t=!1,v(r,"mousemove",n),v(r,"mouseup",o),v(r,"mouseleave",i)}return function(l){d(),l=l||window.event,r||(r=l.target),e.down&&e.down(l),t=!0,f(r,"mousemove",n),f(r,"mouseup",o),f(r,"mouseleave",i)}}function a(e){let t;const n=e.allow||function(){return!0},o=[];function i(t){t=t||window.event,e.cancel&&e.cancel(t),y(t),m(t)}return e.diff&&o.push((function(t,n,o){e.diff({x:t,y:n,e:o})})),e.diffX&&o.push((function(t,n){0!=t&&e.diffX(t)})),e.diffY&&o.push((function(t,n){0!=n&&e.diffY(n)})),p({border:e.border||document,down(n){n=n||window.event,t=n,e.init&&e.init(n),y(n),m(n)},move(e){if(n()){const n=(e=e||window.event).clientX-t.clientX,i=e.clientY-t.clientY;for(let t of o)t(n,i,e);t=e,y(e),m(e)}},up:i,leave:i})}function h(e){let t=null;const n=e.allow||function(){return!0},o={cancel(e){t=null,u(),v(i,"mousemove",o.move),v(i,"mouseup",o.cancel),v(i,"mouseleave",o.cancel)},move(o){if(n()){const n=t.event;o=o||window.event,t.event=o;const i=s(!0,o,n),r=s(!1,o,n);0!=i&&(t.dir.l&&(e.addLeft(i),e.addWidth(-i)),t.dir.r&&e.addWidth(i)),0!=r&&(t.dir.t&&(e.addTop(r),e.addHeight(-r)),t.dir.b&&e.addHeight(r))}}},i=e.border||document;return function(e,n){d(),t={event:e,dir:n},f(i,"mousemove",o.move),f(i,"mouseup",o.cancel),f(i,"mouseleave",o.cancel)}}function f(e,t,n){e.addEventListener(t,n)}function v(e,t,n){e.removeEventListener(t,n)}function y(e){e.preventDefault()}function m(e){e.stopPropagation()}function x(e){const o=t.mve.valueOrCall(e.hideClose),i=t.mve.valueOrCall(e.hideMax);return n({type:"div",style:{"background-image":"linear-gradient(180deg, #e6e6e6, #bab9ba)",cursor:"move","border-radius":"5px 5px 0 0","white-space":"nowrap",height:e.height-1+"px","line-height":e.height-1+"px","border-bottom":"1px solid #696969",display:"flex","align-items":"center"},event:{mousedown(t){e.move(t||window.event)}},children:[n({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"#1600ff","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#e4e0df",display:()=>o()?"none":"inline-block"},text:"X",event:{mousedown(e){e.stopPropagation()},click:e.closeClick}}),n({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"green","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#f2ff2f",display:()=>i()?"none":"inline-block"},text:()=>e.max()?"o":"O",event:{mousedown(e){e.stopPropagation(e)},click(){e.max(!e.max())}}}),n({type:"div",style:{"font-weight":"bold","text-indent"(){let e=0;return o()&&(e-=20),i()&&(e-=20),e+"px"},"font-size":"15px","text-align":"center",display:"inline",margin:"0 5px",color:"#645d61",flex:1,overflow:"hidden","text-overflow":"ellipsis"},text:e.title})]})}function w(e){return function(o){function i(){return d()?o.desktop.width():p()}function r(){return d()?o.desktop.height():f()}const l=e({panel:o,contentHeight:()=>r()-30,contentWidth:i}),d=l.max||t.mve.valueOf(!1),u=l.top||t.mve.valueOf(0),s=l.left||t.mve.valueOf(0),p=l.width||t.mve.valueOf(400),f=l.height||t.mve.valueOf(600);return n({type:"div",event:{mousedown:{capture:!0,handler:o.bringToFront}},style:{background:"white","border-radius":"5px",position:"absolute","z-index":()=>o.index()+"","box-shadow":"rgb(102, 102, 102) 0px 0px 20px 5px",top:()=>d()?"0px":u()+"px",left:()=>d()?"0px":s()+"px",width:()=>i()+"px",height:()=>r()+"px"},children:[x({title:l.title,height:30,move:a({diffX(e){s(s()+e)},diffY(e){u(u()+e)}}),hideClose:l.hideClose,max:d,hideMax:l.hideMax,closeClick:o.remove}),l.children,c({resize:h({addHeight(e){f(f()+e)},addLeft(e){s(s()+e)},addTop(e){u(u()+e)},addWidth(e){p(p()+e)}})})]})}}const g=w((function(e){return{children:[n({type:"div",style:{overflow:"auto",width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px"},children:[n({type:"div",text:"中在",style:{width:"800px",height:"900px"}})]})]}})),b=w((function(e){return{hideClose:!0,title:"首页",children:[n({type:"button",text:"首页",event:{click(){e.panel.add(g)}}})]}})),k=t.mve.valueOf(0),O=t.mve.valueOf(0);function z(){window.innerWidth!=k()&&k(window.innerWidth),window.innerHeight!=O()&&O(window.innerHeight)}window.addEventListener("resize",z),z();const C=r((function(o,i){const r=function(n){const o=t.mve.arrayModelOf([]),i=[];function r(e){const n={panel:e,index:t.mve.valueOf(i.length)};o.push(n),i.push(n)}return{add:r,render:e(o,(function(e,t,l){return t.panel({me:e,remove(){o.remove(l())},add:r,desktop:n,index:t.index,bringToFront(){const e=i.indexOf(t);if(e<i.length-1){i.push(t),i.splice(e,1);for(let t=e;t<i.length;t++)i[t].index(t)}}})}))}}({width:k,height:O});return r.add(b),n({type:"div",init(){},style:{width:"100%",height:"100%",position:"fixed",top:"0",left:"0"},children:r.render})}));const L=o("li");function M(o,i,r){const l=t.mve.valueOf(!1),c=t.mve.arrayModelOf([]);return n({type:"li",children:[n({type:"button",text:()=>l()?"-":"+",event:{click(){l(!l())}}}),n({type:"input"}),n({type:"button",text:"追加子节点",event:{click(){l(!0),c.push({})}}}),n({type:"ul",style:{display:()=>l()?"":"none"},children:e(c,M)})]})}const j={index:{title:"首页",route:r((function(e,t){return n({type:"ul",children:Object.keys(j).map((function(e){const t=j[e];return n({type:"li",children:[n({type:"a",attr:{href:"javascript:void(0)"},text:t.title,event:{click(){location.hash="#"+e}}})]})}))})}))},desktop:{title:"桌面",route:C},simpleAdd:{title:"简单的加法",route:r((function(e,o){return function(e){const o=t.mve.valueOf(0);return n({type:"button",init(){console.log("初始化")},destroy(){console.log("销毁")},text:()=>o()+"",event:{click(){o(o()+1)}}})}()}))},simpleTodo:{title:"简单的Todo",route:r((function(o,i){return function(o){const i=t.mve.arrayModelOf([]);let r;return[n({type:"input",init(e){r=e}}),n({type:"button",text:"添加",event:{click(){const e=r.value.trim();e?(i.unshift({content:t.mve.valueOf(e),complete:t.mve.valueOf(!1)}),r.value=""):alert("请输入内容")}}}),n({type:"style",text:`\n.${L}{\ndisplay:flex;\njustify-content:space-between;\n}\n\t\t\t`}),n({type:"ul",children:e(i,(function(e,t,o){let r;return n({type:"li",cls:L,children:[n({type:"input",init(e){r=e},attr:{type:"checkbox"},prop:{checked:t.complete},event:{change(e){t.complete(r.checked)}}}),n({type:"span",style:{"text-decoration":()=>t.complete()?"line-through":""},text:t.content}),n({type:"a",text:"x",attr:{href:"javascript:void(0)"},event:{click(){i.remove(o())}}})]})}))})]}()}))},todo:{title:"todo",route:r((function(o,i){return function(o){const i=t.mve.arrayModelOf([]);let r;return[n({type:"input",init(e){r=e}}),n({type:"button",text:"添加",event:{click(){const e=r.value.trim();e?(i.unshift({content:t.mve.valueOf(e),finish:t.mve.valueOf(!1)}),r.value=""):alert("请输入内容")}}}),n({type:"table",childrenReverse:!0,children:e(i,(function(e,t,o){return n({type:"tr",children:[n({type:"td",children:[n({type:"input",attr:{type:"checkbox"},prop:{checked:t.finish},event:{change(e){const n=e.target;t.finish(n.checked)}}})]}),n({type:"td",children:[n({type:"input",value:t.content,event:{change(e){const n=e.target,o=n.value.trim();o?t.content(o):n.value=t.content()}}})]}),n({type:"td",children:[n({type:"a",text:"删除",attr:{href:"javascript:void(0)"},event:{click(){i.remove(o())}}})]})]})}))})]}()}))},tree:{title:"tree",route:r((function(o,i){return function(o){const i=t.mve.arrayModelOf([]);return[n("tree"),n({type:"button",text:"追加根节点",event:{click(){i.push({})}}}),n({type:"ul",children:e(i,M)})]}()}))}},q=o("topArea"),E=t.mve.valueOf({path:[],query:{}}),S=n.root((function(e){const t={};return Object.entries(j).map((([e,n])=>{t[e]=n.route})),{type:"div",children:[n({type:"style",text:`\n\t\t\t\t.${q}{\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\ttop:0;\n\t\t\t\t\tleft:0;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight:100%\n\t\t\t\t}\n\t\t\t\t`}),i(e,E,t)]}}));function W(){const e=location.hash,t={},n=[];if(e){const[o,i]=e.split("?");o.slice(1).split("/").forEach((e=>{e&&n.push(e)})),i&&i.split("&").forEach((e=>{const[n,o]=e.split("="),i=t[n];i?i.push(o):t[n]=o}))}0==n.length&&n.push("index"),E({path:n,query:t})}window.addEventListener("hashchange",W),W(),document.body.appendChild(S.element),S.init&&S.init(),S.destroy&&window.addEventListener("unload",S.destroy);
