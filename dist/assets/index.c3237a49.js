var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i;"undefined"!=typeof require&&require;import{c as l,u as r,d as c,k as a,m as s,a as d,D as u,f as p,b as h,e as f,i as y,g as v,r as m,h as g,j as x,l as b,n as w,o as k,p as O,T as C,q as M,s as T,F as E,t as A,v as N,w as S}from"./vendor.008a0e5a.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const $={all:null,active:{b:"2"},complete:{c:"3"}},R=l((function(e,t){let n;const i=r.mve.valueOf(null),o=r.mve.arrayModelOf([]);function l(){return t.current()||"all"}e.WatchAfter((function(){const e=l();return o.filter((t=>"all"==e||("active"==e?!t.completed():"complete"==e?t.completed():void 0)))}),(function(e){o.forEach((e=>e.show(!1)));for(const t of e)t.show(!0)}));return c({type:"div",cls:"todo-app-main",children:[c({type:"div",cls:"todo-app-body",children:[c({type:"section",cls:"todoapp",children:[c({type:"header",cls:"header",children:[c({type:"h1",text:"todos"}),c({type:"input",cls:"new-todo",attr:{autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"},init(e){n=e},event:{keydown(e){if(a.ENTER(e)){const e=n.value.trim();if(e){const t={show:r.mve.valueOf(!0),title:r.mve.valueOf(e),completed:r.mve.valueOf(!1),state:r.mve.valueOf("init")};o.push(t),setTimeout((function(){t.state(null)})),n.value=""}}}}})]}),c({type:"section",cls:"main",children:[c({type:"input",id:"toggle-all",cls:"toggle-all",attr:{type:"checkbox"},event:{click(e){o.forEach((t=>{t.completed(e.target.checked)}))}}}),c({type:"label",attr:{for:"toggle-all"},text:"Mark all as complete"}),c({type:"ul",cls:"todo-list",children:[s(o,(function(e,t,n){let l,r;function s(){t.title(r.value.trim()),i(null)}return c({type:"li",cls(){const e=["todo"];return t.completed()&&e.push("completed"),t==i()&&e.push("editing"),e},style:{display:()=>t.show()?"":"none",left:()=>"destroy"==t.state()?"100%":"init"==t.state()?"-100%":"0",transition:"left 0.5s"},children:[c({type:"div",cls:"view",children:[c({type:"input",cls:"toggle",attr:{type:"checkbox"},init(e){l=e},prop:{checked:t.completed},event:{change(){t.completed(l.checked)}}}),c({type:"label",text:t.title,event:{dblclick(){i(t),r.focus()}}}),c({type:"button",cls:"destroy",event:{click(){t.state("destroy"),setTimeout((function(){o.remove(n())}),500)}}})]}),c({type:"input",cls:"edit",init(e){r=e},attr:{type:"text","todo-focus":()=>t==i()},value:t.title,event:{blur:s,keyup(e){a.ENTER(e)?s():"Escape"==e.key&&(i(null),r.value=t.title()),console.log(e)}}})]})}))]})]}),c({type:"footer",cls:"footer",children:[c({type:"span",cls:"todo-count",children:[c({type:"strong",text:()=>o.filter((e=>!e.completed())).length}),c({type:"span",text:" items left"})]}),c({type:"ul",cls:"filters",children:Object.entries($).map((([e,n])=>c({type:"li",children:[c({type:"a",cls:()=>l()==e?"selected":"",attr:{href:"javascript:void(0)"},text:e,event:{click(){t.go(e,n)}}})]})))}),c({type:"button",cls:"clear-completed",text:"Clear completed",style:{display:()=>o.filter((e=>e.completed())).length>0?"":"none"},event:{click(){o.removeWhere((e=>e.completed()))}}})]})]}),c({type:"fotter",cls:"info",children:[c({type:"p",text:"Double-click to edit a todo"}),c({type:"p",text:"written by wy2010344"}),c({type:"p",text:"Part of TodoMVC"})]})]})]})})),j={all:null,active:{b:"2"},complete:{c:"3"}},P=l((function(e,t){let n;const i=r.mve.valueOf(null),o=r.mve.arrayModelOf([]);function l(){return t.current()||"all"}e.WatchAfter((function(){const e=l();return o.filter((t=>"all"==e||("active"==e?!t.completed():"complete"==e?t.completed():void 0)))}),(function(e){o.forEach((e=>e.show(!1)));for(const t of e)t.show(!0)}));return d(u,{type:"div",cls:"todo-app-main"},d(u,{type:"div",cls:"todo-app-body"},d(u,{type:"section",cls:"todoapp"},d(u,{type:"header",cls:"header"},d(u,{type:"h1",text:"todos"}),d(u,{type:"input",cls:"new-todo",attr:{autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"},init:e=>{n=e},event:{keydown(e){if(a.ENTER(e)){const e=n.value.trim();if(e){const t={show:r.mve.valueOf(!0),title:r.mve.valueOf(e),completed:r.mve.valueOf(!1),state:r.mve.valueOf("init")};o.push(t),setTimeout((function(){t.state(null)})),n.value=""}}}}})),d(u,{type:"section",cls:"main"},d(u,{type:"input",id:"toggle-all",cls:"toggle-all",attr:{type:"checkbox"},event:{click(e){o.forEach((t=>{t.completed(e.target.checked)}))}}}),d(u,{type:"label",attr:{for:"toggle-all"},text:"Mark all as complete"}),d(u,{type:"ul",cls:"todo-list"},s(o,(function(e,t,n){let l,r;function c(){t.title(r.value.trim()),i(null)}return d(u,{type:"li",cls:()=>{const e=["todo"];return t.completed()&&e.push("completed"),t==i()&&e.push("editing"),e},style:{display:()=>t.show()?"":"none",left:()=>"destroy"==t.state()?"100%":"init"==t.state()?"-100%":"0",transition:"left 0.5s"}},d(u,{type:"div",cls:"view"},d(u,{type:"input",cls:"toggle",attr:{type:"checkbox"},init:e=>{l=e},prop:{checked:t.completed},event:{change(){t.completed(l.checked)}}}),d(u,{type:"label",text:t.title,event:{dblclick(){i(t),r.focus()}}}),d(u,{type:"button",cls:"destroy",event:{click(){t.state("destroy"),setTimeout((function(){console.log("删除",n()),o.remove(n())}),500)}}})),d(u,{type:"input",cls:"edit",init:e=>{r=e},attr:{type:"text","todo-focus":()=>t==i()},value:t.title,event:{blur:c,keyup(e){a.ENTER(e)?c():"Escape"==e.key&&(i(null),r.value=t.title()),console.log(e)}}}))})))),d(u,{type:"footer",cls:"footer"},d(u,{type:"span",cls:"todo-count"},d(u,{type:"strong",text:()=>o.filter((e=>!e.completed())).length})," items left"),d(u,{type:"ul",cls:"filters"},p({children:Object.entries(j).map((([e,n])=>d(u,{type:"li"},d(u,{type:"a",cls:()=>l()==e?"selected":"",attr:{href:"javascript:void(0)"},text:e,event:{click(){t.go(e,n)}}}))))})),d(u,{type:"button",cls:"clear-completed",text:"Clear completed",style:{display:()=>o.filter((e=>e.completed())).length>0?"":"none"},event:{click(){o.removeWhere((e=>e.completed()))}}}))),d(u,{type:"footer",cls:"info"},d(u,{type:"p",text:"Double-click to edit a todo"}),d(u,{type:"p",text:"written by wy2010344"}),d(u,{type:"p",text:"Part of TodoMVC"}))))}));function F(e){function t(t){return function(n){n=n||window.event,e.resize(n,t)}}const n=e.allow,i=n?function(){return n()?"":"none"}:"";return p({children:[c({type:"div",style:{display:i,width:"100%",height:"7px",position:"absolute",top:"-3px",left:"0",cursor:"n-resize"},event:{mousedown:t({t:!0})}}),c({type:"div",style:{display:i,width:"7px",height:"100%",position:"absolute",right:"-3px",top:"0",cursor:"e-resize"},event:{mousedown:t({r:!0})}}),c({type:"div",style:{display:i,width:"7px",height:"100%",position:"absolute",left:"-3px",top:"0",cursor:"w-resize"},event:{mousedown:t({l:!0})}}),c({type:"div",style:{display:i,width:"100%",height:"7px",position:"absolute",bottom:"-3px",left:"0",cursor:"s-resize"},event:{mousedown:t({b:!0})}}),c({type:"div",style:{display:i,width:"15px",height:"15px",position:"absolute",top:"-7px",left:"-7px",cursor:"nw-resize"},event:{mousedown:t({t:!0,l:!0})}}),c({type:"div",style:{display:i,width:"15px",height:"15px",position:"absolute",top:"-7px",right:"-7px",cursor:"ne-resize"},event:{mousedown:t({t:!0,r:!0})}}),c({type:"div",style:{display:i,width:"15px",height:"15px",position:"absolute",bottom:"-7px",left:"-7px",cursor:"sw-resize"},event:{mousedown:t({b:!0,l:!0})}}),c({type:"div",style:{display:i,width:"15px",height:"15px",position:"absolute",bottom:"-7px",right:"-7px",cursor:"se-resize"},event:{mousedown:t({b:!0,r:!0})}})]})}function W(){document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none",document.body.style.mozUserSelect="none",document.body.style["user-select"]="none"}function z(){document.body.style.webkitUserSelect="",document.body.style.msUserSelect="",document.body.style.mozUserSelect="",document.body.style["user-select"]=""}function q(e,t,n){return e?t.clientX-n.clientX:t.clientY-n.clientY}function I(e){let t=!1;function n(n){t&&e.move(n)}function i(t){z(),e.up&&(t=t||window.event,e.up(t)),r()}function o(t){z(),e.leave&&(t=t||window.event,e.leave(t)),r()}let l=e.border;function r(){t=!1,X(l,"mousemove",n),X(l,"mouseup",i),X(l,"mouseleave",o)}return function(r){W(),r=r||window.event,l||(l=r.target),e.down&&e.down(r),t=!0,_(l,"mousemove",n),_(l,"mouseup",i),_(l,"mouseleave",o)}}function L(e){let t;const n=e.allow||function(){return!0},i=[];function o(t){t=t||window.event,e.cancel&&e.cancel(t),H(t),B(t)}return e.diff&&i.push((function(t,n,i){e.diff({x:t,y:n,e:i})})),e.diffX&&i.push((function(t,n){0!=t&&e.diffX(t)})),e.diffY&&i.push((function(t,n){0!=n&&e.diffY(n)})),I({border:e.border||document,down(n){n=n||window.event,t=n,e.init&&e.init(n),H(n),B(n)},move(e){if(n()){const n=(e=e||window.event).clientX-t.clientX,o=e.clientY-t.clientY;for(let t of i)t(n,o,e);t=e,H(e),B(e)}},up:o,leave:o})}function D(e){let t=null;const n=r.mve.valueOrCall(e.forbidden),i={cancel(e){t=null,z(),X(o,"mousemove",i.move),X(o,"mouseup",i.cancel),X(o,"mouseleave",i.cancel)},move(i){if(!n()){const n=t.event;i=i||window.event,t.event=i;const o=q(!0,i,n),l=q(!1,i,n);0!=o&&(t.dir.l&&(e.addLeft(o),e.addWidth(-o)),t.dir.r&&e.addWidth(o)),0!=l&&(t.dir.t&&(e.addTop(l),e.addHeight(-l)),t.dir.b&&e.addHeight(l))}}},o=e.border||document;return function(e,n){W(),t={event:e,dir:n},_(o,"mousemove",i.move),_(o,"mouseup",i.cancel),_(o,"mouseleave",i.cancel)}}function _(e,t,n){e.addEventListener(t,n)}function X(e,t,n){e.removeEventListener(t,n)}function H(e){e.preventDefault()}function B(e){e.stopPropagation()}function V(e){const t=r.mve.valueOrCall(e.hideClose),n=r.mve.valueOrCall(e.hideMax),i=r.mve.valueOrCall(e.max);return c({type:"div",style:{"background-image":"linear-gradient(180deg, #e6e6e6, #bab9ba)",cursor:"move","border-radius":"5px 5px 0 0","white-space":"nowrap",height:e.height-1+"px","line-height":e.height-1+"px","border-bottom":"1px solid #696969",display:"flex","align-items":"center"},event:{mousedown(t){e.move(t||window.event)}},children:[c({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"#1600ff","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#e4e0df",display:()=>t()?"none":"inline-block"},text:"X",event:{mousedown(e){e.stopPropagation()},click:e.closeClick}}),c({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"green","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#f2ff2f",display:()=>n()?"none":"inline-block"},text:()=>i()?"o":"O",event:{mousedown(e){e.stopPropagation(e)},click(){e.maxClick()}}}),c({type:"div",style:{"font-weight":"bold","text-indent"(){let e=0;return t()&&(e-=20),n()&&(e-=20),e+"px"},"font-size":"15px","text-align":"center",display:"inline",margin:"0 5px",color:"#645d61",flex:1,overflow:"hidden","text-overflow":"ellipsis"},text:e.title})]})}function Y(e){return function(t){const n={width:()=>p.on()?p.width():l()?t.desktop.width():d(),height:()=>p.on()?p.height():l()?t.desktop.height():u(),top:()=>p.on()?p.top():l()?0:a(),left:()=>p.on()?p.left():l()?0:s()},i=e({panel:t,contentHeight:()=>n.height()-30,contentWidth:n.width}),o=r.mve.valueOrCall(i.noResize),l=i.max||r.mve.valueOf(!1),a=i.top||r.mve.valueOf(0),s=i.left||r.mve.valueOf(0),d=i.width||r.mve.valueOf(400),u=i.height||r.mve.valueOf(600),p={on:r.mve.valueOf(!0),left:r.mve.valueOf(s()),top:r.mve.valueOf(a()),width:r.mve.valueOf(0),height:r.mve.valueOf(0)};return c({type:"div",init(){h.targetAnimationOf({data:[{to:d(),value:p.width},{to:u(),value:p.height}],change:h.Animation.Cubic.easeIn,duration:300,end(){p.on(!1)}})},event:{mousedown:{capture:!0,handler:t.bringToFront}},style:{overflow:"hidden",background:"white","border-radius":"5px",position:"absolute","z-index":()=>t.index()+"","box-shadow":"rgb(102, 102, 102) 0px 0px 20px 5px",top:()=>n.top()+"px",left:()=>n.left()+"px",width:()=>n.width()+"px",height:()=>n.height()+"px"},children:[V({title:i.title,height:30,move:L({diffX(e){s(s()+e)},diffY(e){a(a()+e)}}),hideClose:i.hideClose,max:l,maxClick(){l()?h.targetAnimationOf({data:[{from:n.width(),to:d(),value:p.width},{from:n.height(),to:u(),value:p.height},{from:n.left(),to:s(),value:p.left},{from:n.top(),to:a(),value:p.top}],begin(){p.on(!0)},change:h.Animation.Cubic.easeIn,duration:300,end(){p.on(!1),l(!1)}}):h.targetAnimationOf({data:[{from:n.width(),to:t.desktop.width(),value:p.width},{from:n.height(),to:t.desktop.height(),value:p.height},{from:n.left(),to:0,value:p.left},{from:n.top(),to:0,value:p.top}],begin(){p.on(!0)},change:h.Animation.Cubic.easeIn,duration:300,end(){p.on(!1),l(!0)}})},hideMax:i.hideMax,closeClick(){p.left(n.left()),p.top(n.top()),h.targetAnimationOf({data:[{from:n.width(),to:0,value:p.width},{from:n.height(),to:0,value:p.height}],change:h.Animation.Cubic.easeOut,begin(){p.on(!0)},duration:300,end(){p.on(!1),t.remove()}})}}),i.content,F({resize:D({forbidden:o,addHeight(e){u(u()+e)},addLeft(e){s(s()+e)},addTop(e){a(a()+e)},addWidth(e){d(d()+e)}})})]})}}function J(e){return e&&"X"==e.who?"O":"X"}function K(e){function t(t){return function(e){return c({type:"button",cls:"square",style:{background:e.background},event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)},background:()=>e.point()==t?"gray":""})}function n(e){return c({type:"div",cls:"board-row",children:[t(e+0),t(e+1),t(e+2)]})}return c({type:"div",children:[n(0),n(3),n(6)]})}function U(e){const t=r.mve.arrayModelOf([]),n=r.mve.valueOf({square:Array(9).fill(null),stepNumber:-1});function i(e){const n=t.get(e.stepNumber+1);return e.square[n.point]=n.who,e.stepNumber++,e}function o(e){const n=t.get(e.stepNumber);return e.square[n.point]=null,e.stepNumber--,e}return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[K({point(){const e=n().stepNumber;return e<0?null:t.get(e).point},square:()=>n().square,click(e){const o=n(),l=o.stepNumber+1;for(;t.size()>l;)t.pop();const r=t.getLast();if(r&&r.winner||o.square[e])return;const c=J(r);t.push({who:c,point:e,winner:G(o.square,c,e)||(7==o.stepNumber?"FAIR":void 0)}),n(i(o))}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n().stepNumber);return e&&e.winner?`Winner: ${e.winner}`:`Next player: ${J(e)}`}}),c({type:"ol",children:[c({type:"li",children:[c({type:"button",text:"init",style:{color:()=>-1==n().stepNumber?"blue":""},event:{click(){const e=n();e.square.fill(null),e.stepNumber=-1,n(e)}}})]}),s(t,(function(e,t,l){return c({type:"li",children:[c({type:"button",style:{color:()=>l()==n().stepNumber?"blue":""},text:()=>`Go to move #${l()}`,event:{click(){let e=n();if(e.stepNumber<l()){for(;e.stepNumber<l();)e=i(e);n(e)}else if(e.stepNumber>l()){for(;e.stepNumber>l();)e=o(e);n(e)}}}})]})}))]})]})]})}function G(e,t,n){e[n]=t;const i=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let o=0;o<i.length;o++){const[l,r,c]=i[o];if(e[l]&&e[l]===e[r]&&e[l]===e[c])return e[n]=null,t}return e[n]=null,null}const Z=Object.keys(h.Animation);function Q(e,t){const n=r.mve.valueOf(Z[0]),i=r.mve.valueOf(null);function o(e){n(e);const o=h.Animation[e],l="function"==typeof o?o:Object.values(o)[0];i(l),t(l)}const l=y("select-animation"),a=y("select-animation-type"),s=e.Cache((function(){const e=h.Animation[n()];return"function"==typeof e?[]:Object.entries(e)}));return setTimeout((function(){o(Z[0])})),c({type:"div",init:()=>(console.log("初始化"),function(){console.log("销毁")}),children:[c({type:"div",children:[c({type:"h3",text:"内置动画类型"}),p({children:Z.map((function(e){return c({type:"span",children:[c({type:"input",attr:{type:"radio",name:l},prop:{checked:()=>n()==e},event:{click(){o(e)}}}),c({type:"label",text:e})]})}))}),c({type:"h3",text:"细分类型",style:{display:()=>0==s().length?"none":""}}),f(s,(function(e,n){return c({type:"span",children:[c({type:"input",attr:{type:"radio",name:a},prop:{checked:()=>i()==n[1]},event:{click(){const e=n[1];i(e),t(e)}}}),c({type:"label",text:n[0]})]})}))]})]})}function ee(e){let t,n;const i=r.mve.valueOf({start:0,c1:0,end:0,c2:0});return c({type:"div",init(){const e=t.getContext("2d");let o=-1,l=50,r=300,c=350,a=100,s=[{x:300,y:250},{x:100,y:150}];function d(){e.save(),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(l,r),e.bezierCurveTo(s[0].x,s[0].y,s[1].x,s[1].y,c,a),e.stroke(),e.restore(),e.save(),e.strokeStyle="hsla(30,50%,50%,1.0)",e.beginPath(),e.moveTo(l,r),e.lineTo(s[0].x,s[0].y),e.stroke(),e.beginPath(),e.arc(s[0].x,s[0].y,6,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.moveTo(c,a),e.lineTo(s[1].x,s[1].y),e.stroke(),e.beginPath(),e.arc(s[1].x,s[1].y,6,0,2*Math.PI,!1),e.stroke(),e.restore()}function u(){e.clearRect(0,0,t.width,t.height),function(t,n,i){e.save(),e.lineWidth=.5,e.strokeStyle=t;for(var o=n+.5;o<e.canvas.width;o+=n)e.beginPath(),e.moveTo(o,0),e.lineTo(o,e.canvas.height),e.stroke();for(o=i+.5;o<e.canvas.height;o+=i)e.beginPath(),e.moveTo(0,o),e.lineTo(e.canvas.width,o),e.stroke();e.restore()}("hsla(0,0%,80%,1.0)",10,10),e.save(),e.beginPath(),e.strokeStyle="hsl(200,50%,50%)",e.moveTo(50,100),e.lineTo(l,r),e.lineTo(350,300),e.lineTo(c,a),e.closePath(),e.stroke(),e.restore()}function p(){let e=i();e.start=r,e.c1=s[0].y,e.end=a,e.c2=s[1].y,i(e);var t=`function bezierFun(t,b,c,d){\n\t\tt = t/d;\n\t\tvar y = ${r}*Math.pow(1-t,3)+3*${s[0].y}*t*Math.pow(1-t,2)+3*${s[1].y}*Math.pow(t,2)*(1-t)+${a}*Math.pow(t,3);\n\t\treturn b+(300-y)/200*c;\n\t}`;n.value=t}function h(e,n){var i=t.getBoundingClientRect();return{x:e-i.left*(t.width/i.width),y:n-i.top*(t.height/i.height)}}u(),d(),p(),t.onmousedown=function(n){var i=h(n.clientX,n.clientY);s.forEach(((t,n)=>{if(e.beginPath(),e.arc(t.x,t.y,6,0,2*Math.PI,!1),e.isPointInPath(i.x,i.y))return o=n,!1})),t.onmousemove=function(e){s[o]=h(e.clientX,e.clientY),s[o].x=Math.max(10,s[o].x),s[o].x=Math.min(390,s[o].x),s[o].y=Math.max(10,s[o].y),s[o].y=Math.min(390,s[o].y),u(),d(),p()},t.onmouseup=function(e){t.onmousemove=null,t.onmouseup=null}}},children:[c({type:"canvas",init(e){t=e},attr:{width:"400",height:"400"},style:{cursor:"crosshair"}}),c({type:"button",text:"绘制",event:{click(){e(h.drawOfBezier3(i()))}}}),c({type:"textarea",init(e){n=e},style:{resize:"none",width:"400px",height:"100px",border:"none",padding:"0px",margin:"0px"}})]})}const te=Y((function(e){function t(t){t&&(e.panel.add(ie),ne.draw(t))}return{title:"动画演示",content:p({children:[c({type:"div",style:{width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px",overflow:"auto"},children:[Q(e.panel.me,t),ee(t)]})]})}})),ne=function(){let e,t,n=!1;return{draw(i){if(n)return;const o=[],l=t.createRadialGradient(0,0,0,0,0,15);l.addColorStop(0,"hsl(200,100%,85%)"),l.addColorStop(1,"hsl(200,100%,50%)"),t.clearRect(0,0,e.width,e.height),t.save(),t.beginPath(),t.strokeStyle="hsl(200,50%,50%)",t.moveTo(10,50),t.lineTo(10,350),t.lineTo(510,350),t.lineTo(510,50),t.closePath(),t.stroke(),t.restore(),h.animationOf({duration:1e3,max:300,call(e,n){o.push({x:.5*n,y:-e}),t.save(),t.translate(10,350),t.strokeStyle="hsl(30,100%,50%)",t.beginPath(),t.clearRect(0,-450,500,49),t.clearRect(0,-300,500,300),t.clearRect(0,1,500,50),t.moveTo(0,0),o.forEach((function(e,n){t.lineTo(e.x,e.y)})),t.stroke(),t.restore(),function(e){t.save(),t.clearRect(520,0,90,400),t.translate(540,350-e),t.fillStyle=l,t.beginPath(),t.arc(0,0,15,0,2*Math.PI,!1),t.fill(),t.restore()}(e)},change:i,end(){n=!1}})},canvas:c({type:"canvas",init:n=>(console.log("初始化1"),e=n,t=e.getContext("2d"),t.lineWidth=2,function(){console.log("销毁1")}),attr:{width:"600",height:"400"}})}}(),ie=Y((function(e){return{title:"动画面板",width:r.mve.valueOf(600),height:r.mve.valueOf(450),noResize:!0,hideMax:!0,content:ne.canvas}}));function oe(e){const t=r.mve.atomValueOf(100),n=r.mve.atomValueOf(200);return p({children:[c({type:"button",text:"向上滚动10px",event:{click(){t(t()+10)}}}),c({type:"span",text:()=>"scrollTop"+t()}),c({type:"button",text:"向左滚动10px",event:{click(){n(n()+10)}}}),c({type:"span",text:()=>"scrollLeft"+n()}),c({type:"div",init(e){console.log(e.scrollTop,e.scrollLeft)},style:{overflow:"auto",width:()=>"400px",height:()=>"500px"},prop:{scrollLeft:n,scrollTop:()=>t()},children:[c({type:"div",style:{width:"1000px",height:"900px"},children:[v({text:"演示初始化绑定scrollTop和scrollLeft。父容器需要固定。"}),c({type:"a",attr:{href:"https://gitee.com/wy2010344/mve-vite-demo/blob/master/src/desktop/index/初始绑定scrollTop或scrollLeft.ts"},text:"源码地址"})]})]})]})}function le(e,t){let n=0;return function(...i){clearTimeout(n),n=setTimeout((function(){e(...i)}),t)}}function re(e,t){const n=[];e.firstChild&&n.push(e.firstChild);for(var i=n.pop();i&&!t(i);)i.nextSibling&&n.push(i.nextSibling),i.firstChild&&n.push(i.firstChild),i=n.pop()}function ce(e){const t=window.getSelection(),n={start:0,end:0};return re(e,(function(e){if(e.nodeType==Node.TEXT_NODE){if(e==t.anchorNode){if(e==t.focusNode)return n.start+=t.anchorOffset,n.end+=t.focusOffset,n.dir=t.anchorOffset<=t.focusOffset?"->":"<-",!0;if(n.start+=t.anchorOffset,n.dir)return!0;n.dir="->"}else if(e==t.focusNode){if(n.end+=t.focusOffset,n.dir)return!0;n.dir="<-"}if(e.nodeType==Node.TEXT_NODE){var i=(e.nodeValue||"").length;"->"!=n.dir&&(n.start+=i),"<-"!=n.dir&&(n.end+=i)}}})),n}function ae(e,t){const n=window.getSelection();let i,o,l=0,r=0;const[c,a,s]=function(e){var t=e.dir,n=e.start,i=e.end;return t||(t="->"),n<0&&(n=0),i<0&&(i=0),"<-"==t&&([n,i]=[i,n]),[n,i,t]}(t);let d=0;return re(e,(function(e){if(e.nodeType!=Node.TEXT_NODE)return;const t=(e.nodeValue||"").length;if(d+t>=c&&(i||(i=e,l=c-d),d+t>=a))return o=e,r=a-d,!0;d+=t})),i||(i=e),o||(o=e),"<-"==s&&([i,l,o,r]=[o,r,i,l]),n.setBaseAndExtent(i,l,o,r),n}function se(e){e.preventDefault()}const de=(ue=navigator.userAgent,pe=ue.indexOf("Opera")>-1,he=ue.indexOf("compatible")>-1&&ue.indexOf("MSIE")>-1&&!pe,fe=ue.indexOf("Firefox")>-1,ye=ue.indexOf("Safari")>-1,ve=he?(new RegExp("MSIE (\\d+\\.\\d+);").test(ue),{type:"IE",version:parseFloat(RegExp.$1),documentMode:document.documentMode}):fe?{type:"FF"}:pe?{type:"Opera"}:ye?{type:"Safari"}:void 0,console.log(ve,navigator.userAgent),ve);var ue,pe,he,fe,ye,ve;const me={text:"FF"==de.type?"true":"plaintext-only"};function ge(e){return!(Te(e)||Ee(e)||a.META(e)||a.CONTROL(e)||a.ALT(e)||a.ARROWDOWN(e)||a.ARROWLEFT(e)||a.ARROWUP(e)||a.ARROWDOWN(e))}function xe(e){const t=window.getSelection().getRangeAt(0),n=document.createRange();return n.selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),n.toString()}function be(e){const t=window.getSelection().getRangeAt(0),n=document.createRange();return n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),n.toString()}function we(e,t=0){let n=t;for(;n<e.length&&/[ \t]/.test(e[n]);)n++;return[e.substring(t,n),t,n]}function ke(e){const t=e.lastIndexOf("\n")+1;return we(e,t)}function Oe(e,t,n,i){const o=Math.min(i.length,n.length);return o>0&&ae(e,{start:t,end:t+o}).deleteFromDocument(),o}function Ce(e,t,n,i){if(!n)return i;const o=e.innerHTML,l=ce(e),r=t[i];if(r&&r.html==o&&r.pos.start==l.start&&r.pos.end==l.end)return i;t[++i]={html:o,pos:l},t.splice(i+1);return i>300&&(i=300,t.splice(0,1)),i}function Me(e){return e.metaKey||e.ctrlKey}function Te(e){return Me(e)&&!e.shiftKey&&a.Z(e)}function Ee(e){return Me(e)&&e.shiftKey&&a.Z(e)}function Ae(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),document.execCommand("insertHTML",!1,e)}function Ne(e){e.tab=e.tab||"\t",e.indentOn=e.indentOn||/{$/,e.closePair=e.closePair||["()","[]","{}",'""',"''"];const l={tab:r.mve.valueOrCall(e.tab),indentOn:r.mve.valueOrCall(e.indentOn),spellcheck:r.mve.valueOrCall(e.spellcheck||!1),noClosing:r.mve.valueOrCall(e.noClosing),closePair:r.mve.valueOrCall(e.closePair),content:r.mve.valueOrCall(e.content||"")},s=e.selection||{start:0,end:0};let d;const u=le((function(){const t=ce(d);e.highlight(d,t),ae(d,t)}),30);let p=!1;const h=le((function(e){ge(e)&&(v=Ce(d,f,x,v),p=!1)}),300),f=[];let y,v=-1,x=!1;const b={getContent:()=>(null==d?void 0:d.textContent)||"",getSelection:()=>d?ce(d):s,setSelection(e){ae(d,e)}};function w(){e.callback&&e.callback(b.getContent())}const k=e.element||{type:"pre"};k.event=k.event||{};const O=k.event;var C,M;return m(O,"keydown",(function(t){return t.push((function(t){if(!t.defaultPrevented){if(y=b.getContent(),a.ENTER(t))!function(e,t,n,i){const o=xe(e),l=be(e),[r]=ke(o);let c=r;if(t.test(o)&&(c+=n),("FF"==de.type||c.length>0)&&(se(i),Ae("\n"+c)),c!=r&&"}"==l[0]){const t=ce(e);Ae("\n"+r),ae(e,t)}}(d,l.indentOn(),l.tab(),t);else if(a.TAB(t))!function(e,t,n){se(n);const i=window.getSelection().toString();if(i.length>0){const o=ce(e),l=xe(e),[r,c]=ke(l),a=i.split("\n");if(n.shiftKey){const n=l.substr(c)+a[0],[i]=we(n);let s=Oe(e,c,i,t),d=c+n.length+1-s;const u=Math.min(r.length,t.length);let p=s,h=1,f=a.length-1;for(;h<f;){const[n]=we(a[h]),i=Oe(e,d,n,t);d=d+a[h].length+1-i,p+=i,h++}if(0!=f){const n=be(e),i=a[f]+n.substr(0,n.indexOf("\n")),[o]=we(i);p+=Oe(e,d,o,t)}o.start<o.end?(o.start-=u,o.end-=p):(o.end-=u,o.start-=p),ae(e,o)}else{ae(e,{start:c,end:c}),Ae(t);let n=l.length+a[0].length+t.length+1,i=1;for(;i<a.length;)ae(e,{start:n,end:n}),Ae(t),n=n+a[i].length+t.length+1,i++;o.start<o.end?(o.start=o.start+t.length,o.end=o.end+t.length*a.length):(o.start=o.start+t.length*a.length,o.end=o.end+t.length),ae(e,o)}}else if(n.shiftKey){const n=xe(e),[i,o]=ke(n);if(i.length>0){const n=ce(e),l=Oe(e,o,i,t);n.start-=l,n.end-=l,ae(e,n)}}else Ae(t)}(d,l.tab(),t);else if(Te(t)){se(t),v--;const e=f[v];e&&(d.innerHTML=e.html,ae(d,e.pos)),v<0&&(v=0)}else if(Ee(t)){se(t),v++;const e=f[v];e&&(d.innerHTML=e.html,ae(d,e.pos)),v>=f.length&&v--}else e.noClosing||function(e,t,n){const i=xe(e),o=be(e);if("\\"!=i.substr(i.length-1))if(n.find((e=>e[1]==t.key))&&o.substr(0,1)==t.key){const n=ce(e);se(t),n.start=++n.end,ae(e,n)}else{const i=n.find((e=>e[0]==t.key));if(i){const n=ce(e);se(t),Ae(t.key+i[1]),n.start=++n.end,ae(e,n)}}}(d,t,l.closePair());ge(t)&&!p&&(v=Ce(d,f,x,v),p=!0)}})),t})),m(O,"keyup",(function(e){return e.unshift((function(e){e.defaultPrevented||e.isComposing||(y!=b.getContent()&&u(),h(e),w())})),e})),m(O,"focus",(function(e){return e.push((function(e){x=!0})),e})),m(O,"blur",(function(e){return e.push((function(e){x=!1})),e})),m(O,"paste",(function(t){return t.push((function(t){v=Ce(d,f,x,v),function(e,t,n){se(n);const i=(n.originalEvent||n).clipboardData.getData("text/plain"),o=ce(e);Ae(i),t(e,o),ae(e,{start:o.start+i.length,end:o.start+i.length})}(d,e.highlight,t),v=Ce(d,f,x,v),w()})),t})),g(k,(function(t){return t.push((function(t){d=t,b.setSelection(s),e.highlight(d,b.getSelection()),e.init&&e.init(b)})),t})),k.attr=((e,l)=>{for(var r in l||(l={}))n.call(l,r)&&o(e,r,l[r]);if(t)for(var r of t(l))i.call(l,r)&&o(e,r,l[r]);return e})({contentEditable:(C=e.readonly,M=function(e){return"function"==typeof e?function(){return e()?void 0:me.text}:e?void 0:me.text},M(C)),spellcheck:l.spellcheck},k.attr||{}),k.text=r.mve.delaySetAfter(l.content,(function(t,n){t!=b.getContent()&&(n(t),d&&e.highlight(d,b.getSelection()))})),c(k)}const Se="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/";function $e(e){Prism.highlightElement(e)}const Re=["","coy","dark","funky","okaidia","solarizedlight","tomorrow","twilight"],je=r.run((function(){const e="prismjs-theme",t=r.mve.valueOf(localStorage.getItem(e)||"");return function(){if(0==arguments.length)return t();{const n=arguments[0];n!=t()&&(t(n),localStorage.setItem(e,n))}}}));const Pe={parse:{name:"渲染",type:"div",attr:{},hightlight(e){e.querySelectorAll("pre code").forEach((function(e){$e(e)}))},render:e=>b(e)},lexed:{name:"语法树",type:"pre",attr:{class:"language-json"},hightlight(e){$e(e)},render:e=>JSON.stringify(b.lexer(e),null,2)}};function Fe(e){const t=r.mve.atomValueOf(""),n=function(t){return t.height=e.contentHeight()-30-10+"px",t.width=e.contentWidth()/2-10+"px",t.display="flex",t},i=r.mve.valueOf("parse");return c({type:"div",style:{width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px",display:"flex"},children:[c({type:"div",style:{flex:1,padding:"5px"},children:[c({type:"div",children:[v({text:"切换风格"}),c({type:"select",attr:{placeholder:"default"},value:je,children:Re.map((e=>c({type:"option",text:e,value:e}))),event:{change(e){je(e.target.value)}}})]}),c({type:"div",style:x(n),children:[Ne({content:"\n# Marked in Node.js\n\nRendered by **marked**.\n\n```js\nvar a=98\nfunction b(){\n}\n```\n\n\n\n",highlight(e,n){$e(e),t(e.innerText)},element:{type:"pre",style:{resize:"none",flex:1,overflow:"auto"},cls:"language-markdown"}})]})]}),c({type:"div",style:{flex:1,padding:"5px"},children:[c({type:"div",children:Object.entries(Pe).map((([e,t])=>c({type:"button",text:t.name,attr:{disabled:()=>i()==e||void 0},event:{click(){i(e)}}})))}),c({type:"div",style:x(n),children:Object.entries(Pe).map((([e,n])=>{let o;return c({type:n.type,init(e){o=e,n.hightlight(o)},attr:n.attr,prop:{innerHTML:r.mve.delaySetAfter((function(){return n.render(t())}),(function(e,t){t(e),o&&n.hightlight(o)}))},style:x((function(t){return t.display=e==i()?"":"none",t.flex=1,t.overflow="auto",t}))})}))})]})]})}class We{constructor(){var e;o(this,"symbol"!=typeof(e="children")?e+"":e,[])}static root(){return new We}append(e){this.children.push(e)}appendMany(e,t=""){const n=e.length-1;for(let i=0;i<e.length;i++)i!=n?this.children.push(e[i]+t):this.children.push(e[i])}appendChild(){const e=new We;return this.children.push(e),e}getLast(){return this.children[this.children.length-1]}refreshLast(e){this.children[this.children.length-1]=e}lastExistAdd(e){const t=this.getLast();t&&this.refreshLast(t+e)}print(e,t,n="  "){for(const i of this.children)i instanceof We?i.print(e,t+1,n):e.push(n.repeat(t)+i)}toFile(e="  "){const t=[];return this.print(t,0,e),t.join("\n")}}const ze=w.createMdxAstCompiler();function qe(e){return ze.parse(e)}function Ie(e,t){const n=e.type;if("mdxjsEsm"==n)t.append(e.value);else if("heading"==n){t.append("{");const n=t.appendChild();n.append('type:"heading",'),n.append(`depth:${e.depth},`),_e(e,n),t.append("},")}else if("mdxFlowExpression"==n)t.append(e.value);else if("code"==n){t.append("{");const n=t.appendChild();n.append('type:"code",'),e.lang&&n.append(`lang:"${e.lang}",`),e.meta&&n.append(`meta:"${e.meta}",`),n.append(`value:${JSON.stringify(e.value)},`),t.append("},")}else if("inlineCode"==n){t.append("{");const n=t.appendChild();n.append('type:"inlineCode",'),n.append(`value:${JSON.stringify(e.value)},`),t.append("},")}else if("paragraph"==n){t.append("{");const n=t.appendChild();n.append('type:"paragraph",'),_e(e,n),t.append("},")}else if(n.startsWith("mdxJsx"))De(e,t);else if("text"==n){t.append("{");const n=t.appendChild();n.append('type:"text",'),n.append(`value:${JSON.stringify(e.value)},`),t.append("},")}else if("list"==n){t.append("{");const n=t.appendChild();n.append('type:"list",'),n.append(`ordered:${e.ordered},`),n.append(`start:${e.start},`),n.append(`spread:${e.spread},`),_e(e,n),t.append("},")}else if("listItem"==n){t.append("{");const n=t.appendChild();if(n.append('type:"listItem",'),n.append(`spread:${e.spread},`),n.append(`checked:${e.checked},`),e.children&&e.children.length>0){const t=e.children[0];"paragraph"==t.type&&_e(t,n);for(let i=1;i<e.children.length;i++)_e(e.children[i],n)}else console.warn("children不准确",e);t.append("},")}else if("strong"==n){t.append("{");const n=t.appendChild();n.append('type:"strong",'),_e(e,n),t.append("},")}else if("thematicBreak"==n){t.append("{");t.appendChild().append('type:"thematicBreak",'),t.append("},")}else if("image"==n){t.append("{");const n=t.appendChild();n.append('type:"image",'),e.title&&n.append(`title:${e.title},`),e.url&&n.append(`url:${e.url},`),e.alt&&n.append(`alt:${e.alt},`),t.append("},")}else if("link"==n){t.append("{");const n=t.appendChild();n.append('type:"link",'),e.title&&n.append(`title:${e.title},`),e.url&&n.append(`url:${e.url},`),_e(e,n),t.append("},")}else console.warn("顶层不知道类型",e)}function Le(e){const t=[];for(const n of e){const{name:e,value:i}=n;i?"string"==typeof i?t.push(`${e}=${JSON.stringify(i)}`):t.push(`${e}={${i.value}}`):t.push(e)}return t.join(" ")}function De(e,t){const n=e.type;if(n.startsWith("mdxJsx")){const n=e.name;if(e.children&&0!=e.children.length){t.append(`<${n} ${Le(e.attributes)}>`);Xe(e,t.appendChild()),t.append(`</${n}>`)}else t.append(`<${n} ${Le(e.attributes)}/>`)}else"text"==n?t.append(e.value):"mdxTextExpression"==n?t.append(`{${e.value}}`):"paragraph"==n?Xe(e,t):console.warn("XML不知道类型",e)}function _e(e,t){if("children"in e){const n=e.children;if(n){t.append("children:[");for(const e of n)Ie(e,t.appendChild());t.append("],")}}}function Xe(e,t){if("children"in e){const n=e.children;if(n)for(const e of n)De(e,t.appendChild())}}function He(e){if(delete e.position,"children"in e){const t=e.children;if(Array.isArray(t))for(const e of t)He(e)}}function Be(e){const t={lexed:{name:"语法树",hightlight(e){$e(e)},parse(e){try{const t=qe(e);return n()&&He(t),JSON.stringify(t,null,2)}catch(t){return t+""}},render:e=>c({type:"pre",cls:"language-json",init:e.init,style:e.style,text:e.content})},generate:{name:"自定义生成",hightlight(e){$e(e)},parse(e){try{return function(e){const t=qe(e),n=We.root();n.append("[");const i=t.children;if(i)for(const o of i)Ie(o,n);return n.append("]"),n.toFile()}(e)}catch(t){return t+""}},render:e=>c({type:"pre",cls:"language-tsx",init:e.init,style:e.style,text:e.content})}},n=r.mve.valueOf(!0),i=r.mve.atomValueOf(""),o=function(t){return t.height=e.contentHeight()-30-10+"px",t.width=e.contentWidth()/2-10+"px",t.display="flex",t},l=r.mve.valueOf("lexed");return d(u,{type:"div",style:{width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px",display:"flex"}},d(u,{type:"div",style:{flex:1,padding:"5px"}},d(u,{type:"div"},"切换风格",d(u,{type:"select",attr:{placeholder:"default"},value:je,event:{change(e){je(e.target.value)}}},Re.map((e=>d(u,{type:"option"},e))))),d(u,{type:"div"},d(u,{type:"div",style:x(o)},Ne({content:'\n# Marked in Node.js\n\nRendered by **marked**.\n\n```js\nvar a=98\nfunction b(){\n}\n```\n\n{/*这是注释*/}\n\n\n<Div a="9" b={34 + 9} c={{}} d> {/*45*/} afewf </Div>\n\n',highlight(e,t){$e(e),i(e.innerText)},element:{type:"pre",style:{resize:"none",flex:1,overflow:"auto"},cls:"language-md"}})))),d(u,{type:"div",style:{flex:1,padding:"5px"}},d(u,{type:"div"},p({children:Object.entries(t).map((([e,t])=>d(u,{type:"button",text:t.name,attr:{disabled:()=>l()==e||void 0},event:{click(){l(e)}}})))}),"移除位置",d(u,{type:"input",attr:{type:"checkbox"},prop:{checked:n},event:{change(e){n(e.target.checked)}}})),d(u,{type:"div",style:x(o)},p({children:Object.entries(t).map((([e,t])=>{let n;return t.render({init(e){n=e,t.hightlight(n)},style:x((function(t){return t.display=e==l()?"":"none",t.flex=1,t.overflow="auto",t})),content:r.mve.delaySetAfter((function(){return t.parse(i())}),(function(e,i){i(e),n&&t.hightlight(n)}))})}))}))))}const Ve=Y((function(e){return{hideClose:!0,title:"首页",content:p({children:[c({type:"button",text:"tictactoe",event:{click(t){e.panel.add(Y((function(e){return{title:"tictactoe",left:r.mve.valueOf(t.clientX),top:r.mve.valueOf(t.clientY),content:U(e.panel.me)}})))}}}),c({type:"button",text:"动画效果",event:{click(t){e.panel.add(te)}}}),c({type:"button",text:"初始绑定scrollTop或scrollLeft",event:{click(t){e.panel.add(Y((function(e){return{title:"tictactoe",noResize:!0,hideMax:!0,left:r.mve.valueOf(t.clientX),top:r.mve.valueOf(t.clientY),content:oe()}})))}}}),c({type:"button",text:"marked示例",event:{click(t){e.panel.add(Ye("marked示例",t,Fe))}}}),c({type:"button",text:"mdx示例",event:{click(t){e.panel.add(Ye("mdx示例",t,Be))}}})]})}}));function Ye(e,t,n){return Y((function(i){return{title:e,width:r.mve.valueOf(800),height:r.mve.valueOf(600),left:r.mve.valueOf(t.clientX),top:r.mve.valueOf(t.clientY),content:n(i)}}))}const Je=r.mve.valueOf(0),Ke=r.mve.valueOf(0);function Ue(){window.innerWidth!=Je()&&Je(window.innerWidth),window.innerHeight!=Ke()&&Ke(window.innerHeight)}window.addEventListener("resize",Ue),Ue();const Ge=l((function(e,t){const n=function(e){const t=r.mve.arrayModelOf([]),n=[];function i(e){for(let t=e;t<n.length;t++)n[t].index(t)}function o(e){const t=n.indexOf(e);t>-1&&(n.push(e),n.splice(t,1),i(t))}function l(e){const i=t.findRow((t=>t.panel==e));if(i)o(i);else{const i=r.mve.valueOf(t.size()),o={panel:e,index:i};n.push(o),t.push(o)}}return{add:l,render:s(t,(function(r,c,a){return c.panel({me:r,remove(){const e=c.index();n.splice(e,1),t.remove(a()),i(e)},add:l,desktop:e,index:c.index,bringToFront(){o(c)}})}))}}({width:Je,height:Ke});return n.add(Ve),c({type:"div",init(){},style:{width:"100%",height:"100%",position:"fixed",top:"0",left:"0"},children:[n.render]})}));const Ze=k("li");function Qe(e,t,n,i){let o;return c({type:"li",cls:Ze,init:()=>(console.log("初始化",n.content()),function(){console.log("销毁",n.content())}),children:[c({type:"input",init(e){o=e},attr:{type:"checkbox"},prop:{checked:n.complete},event:{change(e){n.complete(o.checked)}}}),c({type:"span",style:{"text-decoration":()=>n.complete()?"line-through":""},text:n.content}),c({type:"a",text:"x",attr:{href:"javascript:void(0)"},event:{click(){e.remove(i())}}})]})}function et(e){return O(e,(function(t,n,i){return Qe(e,0,n,i)}))}function tt(e){return s(e,(function(t,n,i){return Qe(e,0,n,i)}))}function nt(e,t,n){const i=r.mve.valueOf(!1),o=r.mve.arrayModelOf([]);return c({type:"li",children:[c({type:"button",text:()=>i()?"-":"+",event:{click(){i(!i())}}}),c({type:"input"}),c({type:"button",text:"追加子节点",event:{click(){i(!0),o.push({})}}}),c({type:"ul",style:{display:()=>i()?"":"none"},children:[s(o,nt)]})]})}function it(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[i,o,l]=t[n];if(e[i]&&e[i]===e[o]&&e[i]===e[l])return e[i]}return null}function ot(e){function t(t){return function(e){return c({type:"button",cls:"square",event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)}})}return c({type:"div",children:[c({type:"div",cls:"board-row",children:[t(0),t(1),t(2)]}),c({type:"div",cls:"board-row",children:[t(3),t(4),t(5)]}),c({type:"div",cls:"board-row",children:[t(6),t(7),t(8)]})]})}function lt(e){function t(t){return function(e){return c({type:"button",cls:"square",style:{background:e.background},event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)},background:()=>e.point()==t?"gray":""})}return c({type:"div",children:[c({type:"div",cls:"board-row",children:[t(0),t(1),t(2)]}),c({type:"div",cls:"board-row",children:[t(3),t(4),t(5)]}),c({type:"div",cls:"board-row",children:[t(6),t(7),t(8)]})]})}function rt(e,...t){return d(u,{type:"li"},e.title,c({type:"ul",children:t}))}function ct(e){return d(u,{type:"li"},d(C,null,e.title),d(at,{url:e.url}))}function at(e){return d(u,{type:"a",attr:{href:e.url}},e.url)}const st=["asc","desc","none"];function dt(e){let t,n;return p({children:[c({type:"input",init(e){t=e}}),c({type:"select",init(e){n=e},children:st.map((e=>c({type:"option",text:e,value:e})))}),c({type:"button",text:"开始搜索",event:{click(){const i=Date.now(),o=t.value,l=n.value;console.log(o,l),e(o,l),console.log("消耗时间",Date.now()-i)}}})]})}const ut=[];for(let Nt=0;Nt<300;Nt++)ut.push(Math.floor(1e4*Math.random()));function pt(e){return function(t){const n=r.mve.arrayModelOf(ut.map(((e,t)=>({index:t,show:r.mve.valueOf(!0),order:r.mve.valueOf(0),value:e})))),i=r.mve.valueOf("");return c({type:"div",children:[dt((function(t,i){e(t,i,n)})),c({type:"input",attr:{placeholder:"transition如 all 1s"},event:{change(e){const t=e.target.value;i(t)}}}),c({type:"div",style:{display:"flex","flex-direction":"column","font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:[s(n,(function(e,t,n){return c({type:"div",style:{display:()=>t.show()?"flex":"none","justify-content":"space-around",order:t.order,transition:i},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:t.value})]})}))]})]})}}function ht(e,t,n){for(let i=0;i<e.length;i++)if(n(t.value,e[i].value))return e.splice(i,0,t);e.push(t)}function ft(e,t){return e<t}function yt(e,t){return e>t}const vt=pt((function(e,t,n){const i=[];n.forEach((n=>{(n.value+"").startsWith(e)?(n.show(!0),"none"==t?n.order(0):ht(i,n,"asc"==t?ft:yt)):n.show(!1)})),i.forEach(((e,t)=>e.order(t)))}));function mt(e,t,n,i,o){const l=r.mve.valueOf(!1),a=r.mve.arrayModelOf([]);function d(){return o()&&l()}return p({children:[c({type:"tr",style:{display:()=>o()?"":"none"},children:[c({type:"td",children:[c({type:"button",style:{width:"25px","margin-left":20*i+"px",visibility:()=>0==a.size()?"hidden":""},text:()=>l()?"-":"+",event:{click(){l(!l())}}}),c({type:"span",text:()=>"第"+(i+1)+"层"+(n()+1)+"元素"})]}),c({type:"td",text:"第二列"}),c({type:"td",children:[c({type:"button",text:"追加1",event:{click(){l(!0),a.push({})}}})]}),c({type:"td",children:[c({type:"button",text:"前加1",event:{click(){l(!0),a.unshift({})}}})]})]}),s(a,(function(e,t,n){return mt(e,t,n,i+1,d)}))]})}function gt(e){const t=r.mve.arrayModelOf([{},{},{}]);return c({type:"div",children:[c({type:"table",attr:{border:1},children:[s(t,(function(e,t,n){return mt(0,0,n,0,(()=>!0))}))]})]})}function xt(e,t){for(let n=e;n<t.size();n++)if(t.get(n).show())return n;return-1}function bt(e,t){let n=xt(0,t);for(let i=0;i<e.length;i++){const o=e[i];if(t.get(n)==o)n++;else{const e=t.indexOf(o,n);if(e<n&&console.log("不应该出现的错误"),t.move(e,n),n=xt(n+1,t),n<0)return void console.log("不应该出现的错误")}}}const wt=pt((function(e,t,n){const i=n.filter((t=>(t.value+"").startsWith(e)?(t.show(!0),!0):(t.show(!1),!1)));"asc"==t?(i.sort((function(e,t){return e.value-t.value})),bt(i,n)):"desc"==t&&(i.sort((function(e,t){return t.value-e.value})),bt(i,n)),console.log("执行完成")}));function kt(e,...t){return c({type:"a",attr:{href:e.link?e.href:"#"+e.href,target:e.link?"_blank":null},children:N(e.children,t)})}function Ot(e,t=1){return c({type:"ul",children:e.map((e=>c({type:"li",children:[c({type:"h"+t,children:[A(e.title)]}),c({type:"span",children:[A(e.summary||"")]}),Ot(e.children||[],t+1)]})))})}const Ct=l((function(e,t){return T(e,t,{index:Mt,desktop:Ge,simpleAdd:l((function(e,t){return function(e){const t=r.mve.valueOf(0);return c({type:"button",init:()=>(console.log("初始化"),function(){console.log("销毁")}),text:()=>t()+"",event:{click(){t(t()+1)}}})}()})),simpleTodo:l((function(e,t){return function(e){const t=r.mve.arrayModelOf([{content:r.mve.valueOf("ddd"),complete:r.mve.valueOf(!1)},{content:r.mve.valueOf("aaa"),complete:r.mve.valueOf(!0)},{content:r.mve.valueOf("ccc"),complete:r.mve.valueOf(!1)}]);let n;return p({children:[c({type:"input",init(e){n=e}}),c({type:"button",text:"添加",event:{click(){const e=n.value.trim();e?(t.unshift({content:r.mve.valueOf(e),complete:r.mve.valueOf(!1)}),n.value=""):alert("请输入内容")}}}),c({type:"style",text:`\n\t.${Ze}{\n\tdisplay:flex;\n\tjustify-content:space-between;\n\t}\n\t\t\t\t`}),c({type:"ul",children:[c({type:"li",text:"前面一条"}),tt(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试局部反转"}),c({type:"ul",children:[c({type:"li",text:"前面一条"}),et(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试全局反转"}),c({type:"ul",childrenReverse:!0,children:[c({type:"li",text:"前面一条"}),tt(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试交替"}),c({type:"ul",childrenReverse:!0,children:[c({type:"li",text:"前面一条"}),tt(t),c({type:"li",text:"中间一条"}),et(t),c({type:"li",text:"后面一条"})]})]})}()})),todo:l((function(e,t){return function(e){const t=r.mve.ArrayModel.of();let n;return p({children:[c({type:"input",init(e){n=e}}),c({type:"button",text:"添加",event:{click(){const e=n.value.trim();e?(t.unshift({content:r.mve.valueOf(e),finish:r.mve.valueOf(!1)}),n.value=""):alert("请输入内容")}}}),c({type:"table",childrenReverse:!0,children:[s(t,(function(e,n,i){return c({type:"tr",children:[c({type:"td",children:[c({type:"input",attr:{type:"checkbox"},prop:{checked:n.finish},event:{change(e){const t=e.target;n.finish(t.checked)}}})]}),c({type:"td",children:[c({type:"input",value:n.content,event:{change(e){const t=e.target,i=t.value.trim();i?n.content(i):t.value=n.content()}}})]}),c({type:"td",children:[c({type:"a",text:"删除",attr:{href:"javascript:void(0)"},event:{click(){t.remove(i())}}})]})]})}))]})]})}()})),tree:l((function(e,t){return function(e){const t=r.mve.arrayModelOf([]);return p({children:[v({text:"tree"}),c({type:"button",text:"追加根节点",event:{click(){t.push({})}}}),c({type:"ul",children:[s(t,nt)]})]})}()})),todoMVC:R,ask:P,tic_tac_toe:l((function(e){return function(e){const t=r.mve.arrayModelOf([{squares:Array(9).fill(null),xIsNext:!0}]),n=r.mve.valueOf(0);return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[ot({square:()=>t.get(n()).squares,click(e){const i=n()+1;for(;t.size()>i;)t.pop();const o=t.get(n()),l=o.squares.slice();it(l)||l[e]||(l[e]=o.xIsNext?"X":"O",t.push({squares:l,xIsNext:!o.xIsNext}),n(n()+1))}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n()),i=it(e.squares);return i?`Winner: ${i}`:"Next player: "+(e.xIsNext?"X":"O")}}),c({type:"ol",children:[s(t,(function(e,t,i){return c({type:"li",children:[c({type:"button",text:()=>i()?`Go to move #${i()}`:"Go to game start",event:{click(){n(i())}}})]})}))]})]})]})}()})),tic_tac_toe_simplify:l((function(e){return function(e){const t=r.mve.arrayModelOf([{squares:Array(9).fill(null),xIsNext:!0,point:-1}]),n=r.mve.valueOf(0);return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[lt({point:()=>t.get(n()).point,square:()=>t.get(n()).squares,click(e){const i=n()+1;for(;t.size()>i;)t.pop();const o=t.get(n()),l=o.squares.slice();if(o.winner||l[e])return;l[e]=o.xIsNext?"X":"O";const r=function(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[i,o,l]=t[n];if(e[i]&&e[i]===e[o]&&e[i]===e[l])return e[i]}return null}(l)||(9==t.size()?"FAIR":null);t.push({squares:l,xIsNext:!o.xIsNext,point:e,winner:r}),n(n()+1)}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n()),i=e.winner;return i?`Winner: ${i}`:"Next player: "+(e.xIsNext?"X":"O")}}),c({type:"ol",children:[s(t,(function(e,t,i){return c({type:"li",children:[c({type:"button",style:{color:()=>i()==n()?"blue":""},text:()=>i()?`Go to move #${i()}`:"Go to game start",event:{click(){n(i())}}})]})}))]})]})]})}()})),tic_tac_toe_my_style:l((function(e){return U()})),sortAndFilterFlexOrder:l((function(e){return vt(e)})),sortAndFilterMove:l((function(e){return wt(e)})),sortAndFilterFilterChildren:l((function(e){return function(e){const t=r.mve.valueOf(ut.map(((e,t)=>({index:t,value:e})))),n=r.mve.valueOf({filter:"",sort:"none"});return c({type:"div",children:[dt((function(e,t){n({filter:e,sort:t})})),c({type:"div",style:{"font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:[f((function(){const e=n(),i=t().filter((t=>(t.value+"").startsWith(e.filter)));return"none"==e.sort?i:"asc"==e.sort?i.sort((function(e,t){return e.value-t.value})):"desc"==e.sort?i.sort((function(e,t){return t.value-e.value})):void 0}),(function(e,t,n){return c({type:"div",style:{display:"flex","justify-content":"space-around"},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:t.value})]})}))]})]})}()})),sortAndFilterFilterCacheChildren:l((function(e){return function(e){const t=r.mve.valueOf(ut.map(((e,t)=>({index:t,value:e})))),n=r.mve.valueOf({filter:"",sort:"none"});return c({type:"div",children:[dt((function(e,t){n({filter:e,sort:t})})),c({type:"div",style:{"font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:[M((function(){const e=n(),i=t().filter((t=>(t.value+"").startsWith(e.filter)));return"none"==e.sort?i:"asc"==e.sort?i.sort((function(e,t){return e.value-t.value})):"desc"==e.sort?i.sort((function(e,t){return t.value-e.value})):void 0}),(function(e,t,n){return c({type:"div",style:{display:"flex","justify-content":"space-around"},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:()=>t().value})]})}))]})]})}()})),sameRootTree:l(gt)})}))([]),Mt=l((function(e,t){return c({type:"div",children:[Ot([{title:d(kt,{href:Ct.href("desktop",{})},"桌面系统"),summary:d(E,null,"一个桌面、窗口组件系统示例")},{title:d(kt,{href:"https://wy2010344.gitee.io/vite-vue-ant-design-learn/",link:!0},"vue3+ant-design-vue+tsx的后台管理网站"),summary:d(E,null,"跟随github项目实现，移除对covue和covue-lib的依赖。待补全")},{title:d(kt,{href:"https://gitee.com/wy2010344/article",link:!0},"个人文章收集"),summary:d(E,null,"一些个人文章，不一定完成")},{title:d(kt,{href:Ct.href("sameRootTree",{})},"同级表格树"),summary:d(E,null,"使用Table来完成的树结构，数据结构是树，在DOM上是表格")},{title:d(kt,{href:Ct.href("todo",{})},"一个简单的todo"),summary:d(E,null,"配合文章的示例《",d(kt,{href:"https://juejin.cn/post/7003976837860704287",link:!0},"mve：从一个简单的todo开始——使用vite"),"》")},{title:d(kt,{href:Ct.href("simpleTodo",{})},"一个测试的todo"),summary:d(E,null,"以前写的一个todo，测试modelChildrenReverse和childrenReverse")},{title:d(kt,{href:Ct.href("todoMVC/all",{})},"todoMVC"),summary:d(E,null,"tastejs的todomvc。tastejs的todomvc是一个帮助你选择前端框架的方案示例",d(u,{type:"br"}),d(kt,{href:"https://todomvc.com/",link:!0},"https://todomvc.com/")),children:[{title:d(kt,{href:Ct.href("ask/all",{})},"todoMVC"),summary:d(E,null,"其实跟上面一样，只是路由模块化，使在不同路由下")}]},{title:d(kt,{href:Ct.href("tic_tac_toe",{})},"井字棋tic-tac-toe"),summary:d(E,null,"react教程《",d(kt,{href:"https://react.docschina.org/tutorial/tutorial.html",link:!0},"入门教程: 认识 React"),"》在mve下的实现"),children:[{title:d(kt,{href:Ct.href("tic_tac_toe_simplify",{})},"简化思路")},{title:d(kt,{href:Ct.href("tic_tac_toe_my_style",{})},"undo-redo思路"),summary:d(E,null,"不是很赞成react每次全局副本，难道用户每次点击数据库就要全量备份一次？历史记录应该记录操作栈，进而可以undo-redo")}]},{title:"mve-过滤排序解决方案",children:[{title:d(kt,{href:Ct.href("sortAndFilterFlexOrder",{})},"modelChildren+flex+order方案"),summary:d(E,null,"仍然用ArrayModel+modelChildren复用DOM元素，巧妙地使用flex的order来作排序")},{title:d(kt,{href:Ct.href("sortAndFilterMove",{})},"modelChildren+move方案"),summary:d(E,null,"使用ArrayModel+modelChildren复用DOM元素，但使用ArrayModel::move来调整顺序")},{title:d(kt,{href:Ct.href("sortAndFilterFilterChildren",{})},"filterChildren方案"),summary:d(E,null,"使用filterChildren观察生成的列表，每次重新生成，无法复用DOM元素")},{title:d(kt,{href:Ct.href("sortAndFilterFilterCacheChildren",{})},"filterCacheChildren方案"),summary:d(E,null,"使用filterCacheChildren观察生成列表，就地复用DOM元素")}]}]),c({type:"hr"}),d(u,{type:"div"},d(u,{type:"div"},"欢迎使用小议的mve。它包含mve-core与mve-dom两部分，前一部分与dom无关，可自定义其它引擎，后一部分是mve-core在dom上的简单桥接。"),d(u,{type:"h3"},"git地址"),d(u,{type:"ul"},d(ct,{title:"当前项目源码地址",url:"https://gitee.com/wy2010344/mve-vite-demo.git"}),d(ct,{title:"当前项目源码演示地址",url:"https://wy2010344.gitee.io/mve-vite-demo/"}),d(ct,{title:"文章包地址",url:"https://gitee.com/wy2010344/article.git"}),d(rt,{title:d(C,null,"mve-core")},d(ct,{title:"gitee",url:"https://gitee.com/wy2010344/npm_mve.git"}),d(ct,{title:"github",url:"https://github.com/wy2010344/npm_mve.git"})),d(rt,{title:d(C,null,"mve-dom")},d(ct,{title:"gitee",url:"https://gitee.com/wy2010344/npm_mve-DOM.git"}),d(ct,{title:"github",url:"https://github.com/wy2010344/npm_mve-DOM.git"}))),d(u,{type:"h3"},"特点"),d(u,{type:"ul"},p({children:["过程式（函数式）基因，比react更早。作者避免在ts/js中使用class/this等概念。","无组件概念，完全使用编程语言本身的模块(函数)复用。","基础模型只有mve.Value<T>和mve.ArrayModel<T>，构建出庞大的页面逻辑。","界面布局使用纯ts/js，不引入复杂的xml，更高效地复用。","mvvm对属性节点针对性更新(受vue启发)，性能高。并创新地发现使用mve.ArrayModel<T>与界面片段一一对应(支持同级嵌套)，不使用虚拟DOM与任何形式的享元复用，和异步更新。","区分与DOM引擎无关的核心模块，可用于其它自定义引擎。并提供简单的dom桥接模块。","开放可定制自己的mve使用方式。"].map((e=>d(u,{type:"li",text:e})))})),d(u,{type:"div",style:{"text-align":"center"}},"创作不易，如果给你带来帮助，欢迎给作者打赏。",d(u,{type:"h4"},"微信"),d(u,{type:"img",attr:{src:"https://wy2010344.gitee.io/article/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81-small.png"}}),d(u,{type:"h4"},"支付宝"),d(u,{type:"img",attr:{src:"https://wy2010344.gitee.io/article/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81-small.png"}})))]})})),Tt=k("topArea"),Et=c.root((function(e){return{type:"div",children:[p({children:[c({type:"link",attr:{href(){const e=je();return`${Se}themes/prism${""==e?"":`-${e}`}.css`},rel:"stylesheet"}}),c({type:"script",attr:{src:`${Se}components/prism-core.min.js`}}),c({type:"script",attr:{src:`${Se}plugins/autoloader/prism-autoloader.min.js`}})]}),c({type:"style",text:`\n\t\t\t\t.${Tt}{\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\ttop:0;\n\t\t\t\t\tleft:0;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight:100%\n\t\t\t\t}\n\t\t\t\t`}),Ct.render(e)]}}));S(Ct),document.body.appendChild(Et.element);const At=r.orRun(Et.init);At&&window.addEventListener("unload",At);
