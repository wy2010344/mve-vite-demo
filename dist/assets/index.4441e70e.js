var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;"undefined"!=typeof require&&require;import{c as r,u as l,d as c,k as a,m as s,f as u,i as d,r as p,a as h,b as f,e as v,g as y,h as m,j as g,l as x,n as b}from"./vendor.3d98ef97.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const w={all:null,active:{b:"2"},complete:{c:"3"}},O=r((function(e,t){let n;const o=l.mve.valueOf(null),i=l.mve.arrayModelOf([]);function r(){return t.current()||"all"}e.WatchAfter((function(){const e=r();return i.filter((t=>"all"==e||("active"==e?!t.completed():"complete"==e?t.completed():void 0)))}),(function(e){i.forEach((e=>e.show(!1)));for(const t of e)t.show(!0)}));return c({type:"div",cls:"todo-app-main",children:[c({type:"div",cls:"todo-app-body",children:[c({type:"section",cls:"todoapp",children:[c({type:"header",cls:"header",children:[c({type:"h1",text:"todos"}),c({type:"input",cls:"new-todo",attr:{autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"},init(e){n=e},event:{keydown(e){if(a.ENTER(e)){const e=n.value.trim();if(e){const t={show:l.mve.valueOf(!0),title:l.mve.valueOf(e),completed:l.mve.valueOf(!1),state:l.mve.valueOf("init")};i.push(t),setTimeout((function(){t.state(null)})),n.value=""}}}}})]}),c({type:"section",cls:"main",children:[c({type:"input",id:"toggle-all",cls:"toggle-all",attr:{type:"checkbox"},event:{click(e){i.forEach((t=>{t.completed(e.target.checked)}))}}}),c({type:"label",attr:{for:"toggle-all"},text:"Mark all as complete"}),c({type:"ul",cls:"todo-list",children:s(i,(function(e,t,n){let r,l;function s(){t.title(l.value.trim()),o(null)}return c({type:"li",cls(){const e=["todo"];return t.completed()&&e.push("completed"),t==o()&&e.push("editing"),e.join(" ")},style:{display:()=>t.show()?"":"none",left:()=>"destroy"==t.state()?"100%":"init"==t.state()?"-100%":"0",transition:"left 0.5s"},children:[c({type:"div",cls:"view",children:[c({type:"input",cls:"toggle",attr:{type:"checkbox"},init(e){r=e},prop:{checked:t.completed},event:{change(){t.completed(r.checked)}}}),c({type:"label",text:t.title,event:{dblclick(){o(t),l.focus()}}}),c({type:"button",cls:"destroy",event:{click(){t.state("destroy"),setTimeout((function(){i.remove(n())}),500)}}})]}),c({type:"input",cls:"edit",init(e){l=e},attr:{type:"text","todo-focus":()=>t==o()},value:t.title,event:{blur:s,keyup(e){a.ENTER(e)?s():"Escape"==e.key&&(o(null),l.value=t.title()),console.log(e)}}})]})}))})]}),c({type:"footer",cls:"footer",children:[c({type:"span",cls:"todo-count",children:[c({type:"strong",text:()=>i.filter((e=>!e.completed())).length}),c({type:"span",text:" items left"})]}),c({type:"ul",cls:"filters",children:Object.entries(w).map((([e,n])=>[c({type:"li",children:[c({type:"a",cls:()=>r()==e?"selected":"",attr:{href:"javascript:void(0)"},text:e,event:{click(){t.go(e,n)}}})]})]))}),c({type:"button",cls:"clear-completed",text:"Clear completed",style:{display:()=>i.filter((e=>e.completed())).length>0?"":"none"},event:{click(){i.removeWhere((e=>e.completed()))}}})]})]}),c({type:"fotter",cls:"info",children:[c({type:"p",text:"Double-click to edit a todo"}),c({type:"p",text:"written by wy2010344"}),c({type:"p",text:"Part of TodoMVC"})]})]})]})}));function k(e){function t(t){return function(n){n=n||window.event,e.resize(n,t)}}const n=e.allow,o=n?function(){return n()?"":"none"}:"";return[c({type:"div",style:{display:o,width:"100%",height:"7px",position:"absolute",top:"-3px",left:"0",cursor:"n-resize"},event:{mousedown:t({t:!0})}}),c({type:"div",style:{display:o,width:"7px",height:"100%",position:"absolute",right:"-3px",top:"0",cursor:"e-resize"},event:{mousedown:t({r:!0})}}),c({type:"div",style:{display:o,width:"7px",height:"100%",position:"absolute",left:"-3px",top:"0",cursor:"w-resize"},event:{mousedown:t({l:!0})}}),c({type:"div",style:{display:o,width:"100%",height:"7px",position:"absolute",bottom:"-3px",left:"0",cursor:"s-resize"},event:{mousedown:t({b:!0})}}),c({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",top:"-7px",left:"-7px",cursor:"nw-resize"},event:{mousedown:t({t:!0,l:!0})}}),c({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",top:"-7px",right:"-7px",cursor:"ne-resize"},event:{mousedown:t({t:!0,r:!0})}}),c({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",bottom:"-7px",left:"-7px",cursor:"sw-resize"},event:{mousedown:t({b:!0,l:!0})}}),c({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",bottom:"-7px",right:"-7px",cursor:"se-resize"},event:{mousedown:t({b:!0,r:!0})}})]}function M(){document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none",document.body.style.mozUserSelect="none",document.body.style["user-select"]="none"}function C(){document.body.style.webkitUserSelect="",document.body.style.msUserSelect="",document.body.style.mozUserSelect="",document.body.style["user-select"]=""}function T(e,t,n){return e?t.clientX-n.clientX:t.clientY-n.clientY}function I(e){let t=!1;function n(n){t&&e.move(n)}function o(t){C(),e.up&&(t=t||window.event,e.up(t)),l()}function i(t){C(),e.leave&&(t=t||window.event,e.leave(t)),l()}let r=e.border;function l(){t=!1,P(r,"mousemove",n),P(r,"mouseup",o),P(r,"mouseleave",i)}return function(l){M(),l=l||window.event,r||(r=l.target),e.down&&e.down(l),t=!0,A(r,"mousemove",n),A(r,"mouseup",o),A(r,"mouseleave",i)}}function E(e){let t;const n=e.allow||function(){return!0},o=[];function i(t){t=t||window.event,e.cancel&&e.cancel(t),S(t),R(t)}return e.diff&&o.push((function(t,n,o){e.diff({x:t,y:n,e:o})})),e.diffX&&o.push((function(t,n){0!=t&&e.diffX(t)})),e.diffY&&o.push((function(t,n){0!=n&&e.diffY(n)})),I({border:e.border||document,down(n){n=n||window.event,t=n,e.init&&e.init(n),S(n),R(n)},move(e){if(n()){const n=(e=e||window.event).clientX-t.clientX,i=e.clientY-t.clientY;for(let t of o)t(n,i,e);t=e,S(e),R(e)}},up:i,leave:i})}function N(e){let t=null;const n=l.mve.valueOrCall(e.forbidden),o={cancel(e){t=null,C(),P(i,"mousemove",o.move),P(i,"mouseup",o.cancel),P(i,"mouseleave",o.cancel)},move(o){if(!n()){const n=t.event;o=o||window.event,t.event=o;const i=T(!0,o,n),r=T(!1,o,n);0!=i&&(t.dir.l&&(e.addLeft(i),e.addWidth(-i)),t.dir.r&&e.addWidth(i)),0!=r&&(t.dir.t&&(e.addTop(r),e.addHeight(-r)),t.dir.b&&e.addHeight(r))}}},i=e.border||document;return function(e,n){M(),t={event:e,dir:n},A(i,"mousemove",o.move),A(i,"mouseup",o.cancel),A(i,"mouseleave",o.cancel)}}function A(e,t,n){e.addEventListener(t,n)}function P(e,t,n){e.removeEventListener(t,n)}function S(e){e.preventDefault()}function R(e){e.stopPropagation()}function q(e){const t=l.mve.valueOrCall(e.hideClose),n=l.mve.valueOrCall(e.hideMax),o=l.mve.valueOrCall(e.max);return c({type:"div",style:{"background-image":"linear-gradient(180deg, #e6e6e6, #bab9ba)",cursor:"move","border-radius":"5px 5px 0 0","white-space":"nowrap",height:e.height-1+"px","line-height":e.height-1+"px","border-bottom":"1px solid #696969",display:"flex","align-items":"center"},event:{mousedown(t){e.move(t||window.event)}},children:[c({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"#1600ff","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#e4e0df",display:()=>t()?"none":"inline-block"},text:"X",event:{mousedown(e){e.stopPropagation()},click:e.closeClick}}),c({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"green","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#f2ff2f",display:()=>n()?"none":"inline-block"},text:()=>o()?"o":"O",event:{mousedown(e){e.stopPropagation(e)},click(){e.maxClick()}}}),c({type:"div",style:{"font-weight":"bold","text-indent"(){let e=0;return t()&&(e-=20),n()&&(e-=20),e+"px"},"font-size":"15px","text-align":"center",display:"inline",margin:"0 5px",color:"#645d61",flex:1,overflow:"hidden","text-overflow":"ellipsis"},text:e.title})]})}function j(e){const t=Array.isArray(e.data)?e.data:[e.data];for(const i of t)"from"in i?i.value(i.from):i.from=i.value(),i.update=i.update||function(e,t,n){return(t-e)*n+e};const n=e.duration||1e3,o=e.change||z.Linear;e.begin&&e.begin(),F({duration:n,max:1,call(e,n){for(const o of t)o.value(o.update(o.from,o.to,e))},change:o,end:e.end})}function F(e){let t=!1;const n=Date.now(),o=[];if(e.call&&o.push(e.call),e.diff){let t=0,n=0;o.push((function(o,i){e.diff(o-t,i-n),t=o,n=i}))}function i(e,t){for(let n of o)n(e,t)}return function o(){const r=Date.now()-n;if(r>e.duration)i(e.max,e.duration),e.end&&e.end();else{i(e.change(r,e.min||0,e.max,e.duration),r),t||requestAnimationFrame(o)}}(),function(){t=!0}}const z={Linear:function(e,t,n,o){return n*e/o+t},Quad:{easeIn:(e,t,n,o)=>n*(e/=o)*e+t,easeOut:(e,t,n,o)=>-n*(e/=o)*(e-2)+t,easeInOut:(e,t,n,o)=>(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},Cubic:{easeIn:(e,t,n,o)=>n*(e/=o)*e*e+t,easeOut:(e,t,n,o)=>n*((e=e/o-1)*e*e+1)+t,easeInOut:(e,t,n,o)=>(e/=o/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},Quart:{easeIn:(e,t,n,o)=>n*(e/=o)*e*e*e+t,easeOut:(e,t,n,o)=>-n*((e=e/o-1)*e*e*e-1)+t,easeInOut:(e,t,n,o)=>(e/=o/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},Quint:{easeIn:(e,t,n,o)=>n*(e/=o)*e*e*e*e+t,easeOut:(e,t,n,o)=>n*((e=e/o-1)*e*e*e*e+1)+t,easeInOut:(e,t,n,o)=>(e/=o/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},Sine:{easeIn:(e,t,n,o)=>-n*Math.cos(e/o*(Math.PI/2))+n+t,easeOut:(e,t,n,o)=>n*Math.sin(e/o*(Math.PI/2))+t,easeInOut:(e,t,n,o)=>-n/2*(Math.cos(Math.PI*e/o)-1)+t},Expo:{easeIn:(e,t,n,o)=>0==e?t:n*Math.pow(2,10*(e/o-1))+t,easeOut:(e,t,n,o)=>e==o?t+n:n*(1-Math.pow(2,-10*e/o))+t,easeInOut:(e,t,n,o)=>0==e?t:e==o?t+n:(e/=o/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},Circ:{easeIn:(e,t,n,o)=>-n*(Math.sqrt(1-(e/=o)*e)-1)+t,easeOut:(e,t,n,o)=>n*Math.sqrt(1-(e=e/o-1)*e)+t,easeInOut:(e,t,n,o)=>(e/=o/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},Elastic:{easeIn(e,t,n,o,i,r){var l;return 0==e?t:1==(e/=o)?t+n:(void 0===r&&(r=.3*o),!i||i<Math.abs(n)?(l=r/4,i=n):l=r/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*o-l)*(2*Math.PI)/r)+t)},easeOut(e,t,n,o,i,r){var l;return 0==e?t:1==(e/=o)?t+n:(void 0===r&&(r=.3*o),!i||i<Math.abs(n)?(i=n,l=r/4):l=r/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*o-l)*(2*Math.PI)/r)+n+t)},easeInOut(e,t,n,o,i,r){var l;return 0==e?t:2==(e/=o/2)?t+n:(void 0===r&&(r=o*(.3*1.5)),!i||i<Math.abs(n)?(i=n,l=r/4):l=r/(2*Math.PI)*Math.asin(n/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*o-l)*(2*Math.PI)/r)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*o-l)*(2*Math.PI)/r)*.5+n+t)}},Back:{easeIn:(e,t,n,o,i)=>(void 0===i&&(i=1.70158),n*(e/=o)*e*((i+1)*e-i)+t),easeOut:(e,t,n,o,i)=>(void 0===i&&(i=1.70158),n*((e=e/o-1)*e*((i+1)*e+i)+1)+t),easeInOut:(e,t,n,o,i)=>(void 0===i&&(i=1.70158),(e/=o/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t)},Bounce:function(){const e=function(e,t,n,o){return(e/=o)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},t=function(e,t,n,o){return n-z.Bounce.easeOut(o-e,0,n,o)+t};return{easeIn:t,easeInOut:function(n,o,i,r){return n<r/2?.5*t(2*n,0,i,r)+o:.5*e(2*n-r,0,i,r)+.5*i+o},easeOut:e}}()};function W(e){return function(t){const n={width:()=>p.on()?p.width():r()?t.desktop.width():u(),height:()=>p.on()?p.height():r()?t.desktop.height():d(),top:()=>p.on()?p.top():r()?0:a(),left:()=>p.on()?p.left():r()?0:s()},o=e({panel:t,contentHeight:()=>n.height()-30,contentWidth:n.width}),i=l.mve.valueOrCall(o.noResize),r=o.max||l.mve.valueOf(!1),a=o.top||l.mve.valueOf(0),s=o.left||l.mve.valueOf(0),u=o.width||l.mve.valueOf(400),d=o.height||l.mve.valueOf(600),p={on:l.mve.valueOf(!0),left:l.mve.valueOf(s()),top:l.mve.valueOf(a()),width:l.mve.valueOf(0),height:l.mve.valueOf(0)};return c({type:"div",init(){j({data:[{to:u(),value:p.width},{to:d(),value:p.height}],change:z.Cubic.easeIn,duration:300,end(){p.on(!1)}})},event:{mousedown:{capture:!0,handler:t.bringToFront}},style:{overflow:"hidden",background:"white","border-radius":"5px",position:"absolute","z-index":()=>t.index()+"","box-shadow":"rgb(102, 102, 102) 0px 0px 20px 5px",top:()=>n.top()+"px",left:()=>n.left()+"px",width:()=>n.width()+"px",height:()=>n.height()+"px"},children:[q({title:o.title,height:30,move:E({diffX(e){s(s()+e)},diffY(e){a(a()+e)}}),hideClose:o.hideClose,max:r,maxClick(){r()?j({data:[{from:n.width(),to:u(),value:p.width},{from:n.height(),to:d(),value:p.height},{from:n.left(),to:s(),value:p.left},{from:n.top(),to:a(),value:p.top}],begin(){p.on(!0)},change:z.Cubic.easeIn,duration:300,end(){p.on(!1),r(!1)}}):j({data:[{from:n.width(),to:t.desktop.width(),value:p.width},{from:n.height(),to:t.desktop.height(),value:p.height},{from:n.left(),to:0,value:p.left},{from:n.top(),to:0,value:p.top}],begin(){p.on(!0)},change:z.Cubic.easeIn,duration:300,end(){p.on(!1),r(!0)}})},hideMax:o.hideMax,closeClick(){p.left(n.left()),p.top(n.top()),j({data:[{from:n.width(),to:0,value:p.width},{from:n.height(),to:0,value:p.height}],change:z.Cubic.easeOut,begin(){p.on(!0)},duration:300,end(){p.on(!1),t.remove()}})}}),o.children,k({resize:N({forbidden:i,addHeight(e){d(d()+e)},addLeft(e){s(s()+e)},addTop(e){a(a()+e)},addWidth(e){u(u()+e)}})})]})}}function L(e){return e&&"X"==e.who?"O":"X"}function _(e){function t(t){return function(e){return c({type:"button",cls:"square",style:{background:e.background},event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)},background:()=>e.point()==t?"gray":""})}function n(e){return c({type:"div",cls:"board-row",children:[t(e+0),t(e+1),t(e+2)]})}return c({type:"div",children:[n(0),n(3),n(6)]})}function D(e){const t=l.mve.arrayModelOf([]),n=l.mve.valueOf({square:Array(9).fill(null),stepNumber:-1});function o(e){const n=t.get(e.stepNumber+1);return e.square[n.point]=n.who,e.stepNumber++,e}function i(e){const n=t.get(e.stepNumber);return e.square[n.point]=null,e.stepNumber--,e}return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[_({point(){const e=n().stepNumber;return e<0?null:t.get(e).point},square:()=>n().square,click(e){const i=n(),r=i.stepNumber+1;for(;t.size()>r;)t.pop();const l=t.getLast();if(l&&l.winner||i.square[e])return;const c=L(l);t.push({who:c,point:e,winner:X(i.square,c,e)||(7==i.stepNumber?"FAIR":void 0)}),n(o(i))}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n().stepNumber);return e&&e.winner?`Winner: ${e.winner}`:`Next player: ${L(e)}`}}),c({type:"ol",children:[c({type:"li",children:[c({type:"button",text:"init",style:{color:()=>-1==n().stepNumber?"blue":""},event:{click(){const e=n();e.square.fill(null),e.stepNumber=-1,n(e)}}})]}),s(t,(function(e,t,r){return c({type:"li",children:[c({type:"button",style:{color:()=>r()==n().stepNumber?"blue":""},text:()=>`Go to move #${r()}`,event:{click(){let e=n();if(e.stepNumber<r()){for(;e.stepNumber<r();)e=o(e);n(e)}else if(e.stepNumber>r()){for(;e.stepNumber>r();)e=i(e);n(e)}}}})]})}))]})]})]})}function X(e,t,n){e[n]=t;const o=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let i=0;i<o.length;i++){const[r,l,c]=o[i];if(e[r]&&e[r]===e[l]&&e[r]===e[c])return e[n]=null,t}return e[n]=null,null}const $=Object.keys(z);function B(e,t){const n=l.mve.valueOf($[0]),o=l.mve.valueOf(null);function i(e){n(e);const i=z[e],r="function"==typeof i?i:Object.values(i)[0];o(r),t(r)}const r=d("select-animation"),a=d("select-animation-type"),s=e.Cache((function(){const e=z[n()];return"function"==typeof e?[]:Object.entries(e)}));return setTimeout((function(){i($[0])})),c({type:"div",init:()=>(console.log("初始化"),function(){console.log("销毁")}),children:[c({type:"div",children:[c({type:"h3",text:"内置动画类型"}),$.map((function(e){return c({type:"span",children:[c({type:"input",attr:{type:"radio",name:r},prop:{checked:()=>n()==e},event:{click(){i(e)}}}),c({type:"label",text:e})]})})),c({type:"h3",text:"细分类型",style:{display:()=>0==s().length?"none":""}}),u(s,(function(e,n){return c({type:"span",children:[c({type:"input",attr:{type:"radio",name:a},prop:{checked:()=>o()==n[1]},event:{click(){const e=n[1];o(e),t(e)}}}),c({type:"label",text:n[0]})]})}))]})]})}function H(e){let t,n;const o=l.mve.valueOf({start:0,c1:0,end:0,c2:0});return c({type:"div",init(){const e=t.getContext("2d");let i=-1,r=50,l=300,c=350,a=100,s=[{x:300,y:250},{x:100,y:150}];function u(){e.save(),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(r,l),e.bezierCurveTo(s[0].x,s[0].y,s[1].x,s[1].y,c,a),e.stroke(),e.restore(),e.save(),e.strokeStyle="hsla(30,50%,50%,1.0)",e.beginPath(),e.moveTo(r,l),e.lineTo(s[0].x,s[0].y),e.stroke(),e.beginPath(),e.arc(s[0].x,s[0].y,6,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.moveTo(c,a),e.lineTo(s[1].x,s[1].y),e.stroke(),e.beginPath(),e.arc(s[1].x,s[1].y,6,0,2*Math.PI,!1),e.stroke(),e.restore()}function d(){e.clearRect(0,0,t.width,t.height),function(t,n,o){e.save(),e.lineWidth=.5,e.strokeStyle=t;for(var i=n+.5;i<e.canvas.width;i+=n)e.beginPath(),e.moveTo(i,0),e.lineTo(i,e.canvas.height),e.stroke();for(i=o+.5;i<e.canvas.height;i+=o)e.beginPath(),e.moveTo(0,i),e.lineTo(e.canvas.width,i),e.stroke();e.restore()}("hsla(0,0%,80%,1.0)",10,10),e.save(),e.beginPath(),e.strokeStyle="hsl(200,50%,50%)",e.moveTo(50,100),e.lineTo(r,l),e.lineTo(350,300),e.lineTo(c,a),e.closePath(),e.stroke(),e.restore()}function p(){let e=o();e.start=l,e.c1=s[0].y,e.end=a,e.c2=s[1].y,o(e);var t=`function bezierFun(t,b,c,d){\n  t = t/d;\n  var y = ${l}*Math.pow(1-t,3)+3*${s[0].y}*t*Math.pow(1-t,2)+3*${s[1].y}*Math.pow(t,2)*(1-t)+${a}*Math.pow(t,3);\n  return b+(300-y)/200*c;\n}`;n.value=t}function h(e,n){var o=t.getBoundingClientRect();return{x:e-o.left*(t.width/o.width),y:n-o.top*(t.height/o.height)}}d(),u(),p(),t.onmousedown=function(n){var o=h(n.clientX,n.clientY);s.forEach(((t,n)=>{if(e.beginPath(),e.arc(t.x,t.y,6,0,2*Math.PI,!1),e.isPointInPath(o.x,o.y))return i=n,!1})),t.onmousemove=function(e){s[i]=h(e.clientX,e.clientY),s[i].x=Math.max(10,s[i].x),s[i].x=Math.min(390,s[i].x),s[i].y=Math.max(10,s[i].y),s[i].y=Math.min(390,s[i].y),d(),u(),p()},t.onmouseup=function(e){t.onmousemove=null,t.onmouseup=null}}},children:[c({type:"canvas",init(e){t=e},attr:{width:"400",height:"400"},style:{cursor:"crosshair"}}),c({type:"button",text:"绘制",event:{click(){var t;e((t=o(),function(e,n,o,i){return e/=i,n+(300-(t.start*Math.pow(1-e,3)+3*t.c1*e*Math.pow(1-e,2)+3*t.c2*Math.pow(e,2)*(1-e)+t.end*Math.pow(e,3)))/200*o}))}}}),c({type:"textarea",init(e){n=e},style:{resize:"none",width:"400px",height:"100px",border:"none",padding:"0px",margin:"0px"}})]})}const Y=W((function(e){function t(t){t&&(e.panel.add(K),V.draw(t))}return{title:"动画演示",children:[c({type:"div",style:{width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px",overflow:"auto"},children:[B(e.panel.me,t),H(t)]})]}})),V=function(){let e,t,n=!1;return{draw(o){if(n)return;const i=[],r=t.createRadialGradient(0,0,0,0,0,15);r.addColorStop(0,"hsl(200,100%,85%)"),r.addColorStop(1,"hsl(200,100%,50%)"),t.clearRect(0,0,e.width,e.height),t.save(),t.beginPath(),t.strokeStyle="hsl(200,50%,50%)",t.moveTo(10,50),t.lineTo(10,350),t.lineTo(510,350),t.lineTo(510,50),t.closePath(),t.stroke(),t.restore(),F({duration:1e3,max:300,call(e,n){i.push({x:.5*n,y:-e}),t.save(),t.translate(10,350),t.strokeStyle="hsl(30,100%,50%)",t.beginPath(),t.clearRect(0,-450,500,49),t.clearRect(0,-300,500,300),t.clearRect(0,1,500,50),t.moveTo(0,0),i.forEach((function(e,n){t.lineTo(e.x,e.y)})),t.stroke(),t.restore(),function(e){t.save(),t.clearRect(520,0,90,400),t.translate(540,350-e),t.fillStyle=r,t.beginPath(),t.arc(0,0,15,0,2*Math.PI,!1),t.fill(),t.restore()}(e)},change:o,end(){n=!1}})},canvas:c({type:"canvas",init:n=>(console.log("初始化1"),e=n,t=e.getContext("2d"),t.lineWidth=2,function(){console.log("销毁1")}),attr:{width:"600",height:"400"}})}}(),K=W((function(e){return{title:"动画面板",width:l.mve.valueOf(600),height:l.mve.valueOf(450),noResize:!0,hideMax:!0,children:[V.canvas]}}));function U(e){const t=l.mve.atomValueOf(100),n=l.mve.atomValueOf(200);return[c({type:"button",text:"向上滚动10px",event:{click(){t(t()+10)}}}),c({type:"span",text:()=>"scrollTop"+t()}),c({type:"button",text:"向左滚动10px",event:{click(){n(n()+10)}}}),c({type:"span",text:()=>"scrollLeft"+n()}),c({type:"div",init(e){console.log(e.scrollTop,e.scrollLeft)},style:{overflow:"auto",width:()=>"400px",height:()=>"500px"},prop:{scrollLeft:n,scrollTop:()=>t()},children:[c({type:"div",style:{width:"1000px",height:"900px"},children:[c("演示初始化绑定scrollTop和scrollLeft。父容器需要固定。"),c({type:"a",attr:{href:"https://gitee.com/wy2010344/mve-vite-demo/blob/master/src/desktop/index/初始绑定scrollTop或scrollLeft.ts"},text:"源码地址"})]})]})]}function G(e,t){let n=0;return function(...o){clearTimeout(n),n=setTimeout((function(){e(...o)}),t)}}function Q(e,t){const n=[];e.firstChild&&n.push(e.firstChild);for(var o=n.pop();o&&!t(o);)o.nextSibling&&n.push(o.nextSibling),o.firstChild&&n.push(o.firstChild),o=n.pop()}function Z(e){const t=window.getSelection(),n={start:0,end:0};return Q(e,(function(e){if(e.nodeType==Node.TEXT_NODE){if(e==t.anchorNode){if(e==t.focusNode)return n.start+=t.anchorOffset,n.end+=t.focusOffset,n.dir=t.anchorOffset<=t.focusOffset?"->":"<-",!0;if(n.start+=t.anchorOffset,n.dir)return!0;n.dir="->"}else if(e==t.focusNode){if(n.end+=t.focusOffset,n.dir)return!0;n.dir="<-"}if(e.nodeType==Node.TEXT_NODE){var o=(e.nodeValue||"").length;"->"!=n.dir&&(n.start+=o),"<-"!=n.dir&&(n.end+=o)}}})),n}function J(e,t){const n=window.getSelection();let o,i,r=0,l=0;const[c,a,s]=function(e){var t=e.dir,n=e.start,o=e.end;return t||(t="->"),n<0&&(n=0),o<0&&(o=0),"<-"==t&&([n,o]=[o,n]),[n,o,t]}(t);let u=0;return Q(e,(function(e){if(e.nodeType!=Node.TEXT_NODE)return;const t=(e.nodeValue||"").length;if(u+t>=c&&(o||(o=e,r=c-u),u+t>=a))return i=e,l=a-u,!0;u+=t})),o||(o=e),i||(i=e),"<-"==s&&([o,r,i,l]=[i,l,o,r]),n.setBaseAndExtent(o,r,i,l),n}function ee(e){e.preventDefault()}const te=(ne=navigator.userAgent,oe=ne.indexOf("Opera")>-1,ie=ne.indexOf("compatible")>-1&&ne.indexOf("MSIE")>-1&&!oe,re=ne.indexOf("Firefox")>-1,le=ne.indexOf("Safari")>-1,ce=ie?(new RegExp("MSIE (\\d+\\.\\d+);").test(ne),{type:"IE",version:parseFloat(RegExp.$1),documentMode:document.documentMode}):re?{type:"FF"}:oe?{type:"Opera"}:le?{type:"Safari"}:void 0,console.log(ce,navigator.userAgent),ce);var ne,oe,ie,re,le,ce;const ae={text:"FF"==te.type?"true":"plaintext-only"};function se(e){return!(me(e)||ge(e)||a.META(e)||a.CONTROL(e)||a.ALT(e)||a.ARROWDOWN(e)||a.ARROWLEFT(e)||a.ARROWUP(e)||a.ARROWDOWN(e))}function ue(e){const t=window.getSelection().getRangeAt(0),n=document.createRange();return n.selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),n.toString()}function de(e){const t=window.getSelection().getRangeAt(0),n=document.createRange();return n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),n.toString()}function pe(e,t=0){let n=t;for(;n<e.length&&/[ \t]/.test(e[n]);)n++;return[e.substring(t,n),t,n]}function he(e){const t=e.lastIndexOf("\n")+1;return pe(e,t)}function fe(e,t,n,o){const i=Math.min(o.length,n.length);return i>0&&J(e,{start:t,end:t+i}).deleteFromDocument(),i}function ve(e,t,n,o){if(!n)return o;const i=e.innerHTML,r=Z(e),l=t[o];if(l&&l.html==i&&l.pos.start==r.start&&l.pos.end==r.end)return o;t[++o]={html:i,pos:r},t.splice(o+1);return o>300&&(o=300,t.splice(0,1)),o}function ye(e){return e.metaKey||e.ctrlKey}function me(e){return ye(e)&&!e.shiftKey&&a.Z(e)}function ge(e){return ye(e)&&e.shiftKey&&a.Z(e)}function xe(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),document.execCommand("insertHTML",!1,e)}function be(e){e.tab=e.tab||"\t",e.indentOn=e.indentOn||/{$/,e.closePair=e.closePair||["()","[]","{}",'""',"''"];const r={tab:l.mve.valueOrCall(e.tab),indentOn:l.mve.valueOrCall(e.indentOn),spellcheck:l.mve.valueOrCall(e.spellcheck||!1),noClosing:l.mve.valueOrCall(e.noClosing),closePair:l.mve.valueOrCall(e.closePair),content:l.mve.valueOrCall(e.content||"")},s=e.selection||{start:0,end:0};let u;const d=G((function(){const t=Z(u);e.highlight(u,t),J(u,t)}),30);let f=!1;const v=G((function(e){se(e)&&(g=ve(u,y,x,g),f=!1)}),300),y=[];let m,g=-1,x=!1;const b={getContent:()=>(null==u?void 0:u.textContent)||"",getSelection:()=>u?Z(u):s,setSelection(e){J(u,e)}};function w(){e.callback&&e.callback(b.getContent())}const O=e.element||{type:"pre"};O.event=O.event||{};const k=O.event;var M,C;return p(k,"keydown",(function(t){return t.push((function(t){if(!t.defaultPrevented){if(m=b.getContent(),a.ENTER(t))!function(e,t,n,o){const i=ue(e),r=de(e),[l]=he(i);let c=l;if(t.test(i)&&(c+=n),("FF"==te.type||c.length>0)&&(ee(o),xe("\n"+c)),c!=l&&"}"==r[0]){const t=Z(e);xe("\n"+l),J(e,t)}}(u,r.indentOn(),r.tab(),t);else if(a.TAB(t))!function(e,t,n){ee(n);const o=window.getSelection().toString();if(o.length>0){const i=Z(e),r=ue(e),[l,c]=he(r),a=o.split("\n");if(n.shiftKey){const n=r.substr(c)+a[0],[o]=pe(n);let s=fe(e,c,o,t),u=c+n.length+1-s;const d=Math.min(l.length,t.length);let p=s,h=1,f=a.length-1;for(;h<f;){const[n]=pe(a[h]),o=fe(e,u,n,t);u=u+a[h].length+1-o,p+=o,h++}if(0!=f){const n=de(e),o=a[f]+n.substr(0,n.indexOf("\n")),[i]=pe(o);p+=fe(e,u,i,t)}i.start<i.end?(i.start-=d,i.end-=p):(i.end-=d,i.start-=p),J(e,i)}else{J(e,{start:c,end:c}),xe(t);let n=r.length+a[0].length+t.length+1,o=1;for(;o<a.length;)J(e,{start:n,end:n}),xe(t),n=n+a[o].length+t.length+1,o++;i.start<i.end?(i.start=i.start+t.length,i.end=i.end+t.length*a.length):(i.start=i.start+t.length*a.length,i.end=i.end+t.length),J(e,i)}}else if(n.shiftKey){const n=ue(e),[o,i]=he(n);if(o.length>0){const n=Z(e),r=fe(e,i,o,t);n.start-=r,n.end-=r,J(e,n)}}else xe(t)}(u,r.tab(),t);else if(me(t)){ee(t),g--;const e=y[g];e&&(u.innerHTML=e.html,J(u,e.pos)),g<0&&(g=0)}else if(ge(t)){ee(t),g++;const e=y[g];e&&(u.innerHTML=e.html,J(u,e.pos)),g>=y.length&&g--}else e.noClosing||function(e,t,n){const o=ue(e),i=de(e);if("\\"!=o.substr(o.length-1))if(n.find((e=>e[1]==t.key))&&i.substr(0,1)==t.key){const n=Z(e);ee(t),n.start=++n.end,J(e,n)}else{const o=n.find((e=>e[0]==t.key));if(o){const n=Z(e);ee(t),xe(t.key+o[1]),n.start=++n.end,J(e,n)}}}(u,t,r.closePair());se(t)&&!f&&(g=ve(u,y,x,g),f=!0)}})),t})),p(k,"keyup",(function(e){return e.unshift((function(e){e.defaultPrevented||e.isComposing||(m!=b.getContent()&&d(),v(e),w())})),e})),p(k,"focus",(function(e){return e.push((function(e){x=!0})),e})),p(k,"blur",(function(e){return e.push((function(e){x=!1})),e})),p(k,"paste",(function(t){return t.push((function(t){g=ve(u,y,x,g),function(e,t,n){ee(n);const o=(n.originalEvent||n).clipboardData.getData("text/plain"),i=Z(e);xe(o),t(e,i),J(e,{start:i.start+o.length,end:i.start+o.length})}(u,e.highlight,t),g=ve(u,y,x,g),w()})),t})),h(O,(function(t){return t.push((function(t){u=t,b.setSelection(s),e.highlight(u,b.getSelection()),e.init&&e.init(b)})),t})),O.attr=((e,r)=>{for(var l in r||(r={}))n.call(r,l)&&i(e,l,r[l]);if(t)for(var l of t(r))o.call(r,l)&&i(e,l,r[l]);return e})({contentEditable:(M=e.readonly,C=function(e){return"function"==typeof e?function(){return e()?void 0:ae.text}:e?void 0:ae.text},C(M)),spellcheck:r.spellcheck},O.attr||{}),O.text=l.mve.delaySetAfter(r.content,(function(t,n){t!=b.getContent()&&(n(t),u&&e.highlight(u,b.getSelection()))})),c(O)}const we="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/";function Oe(e){Prism.highlightElement(e)}const ke=["","coy","dark","funky","okaidia","solarizedlight","tomorrow","twilight"],Me=l.run((function(){const e="prismjs-theme",t=l.mve.valueOf(localStorage.getItem(e)||"");return function(){if(0==arguments.length)return t();{const n=arguments[0];n!=t()&&(t(n),localStorage.setItem(e,n))}}}));const Ce={parse:{name:"渲染",type:"div",attr:{},hightlight(e){e.querySelectorAll("pre code").forEach((function(e){Oe(e)}))},render:e=>v(e)},lexed:{name:"语法树",type:"pre",attr:{class:"language-json"},hightlight(e){Oe(e)},render:e=>JSON.stringify(v.lexer(e),null,2)}};function Te(e){const t=l.mve.atomValueOf(""),n=function(t){return t.height=e.contentHeight()-30-10+"px",t.width=e.contentWidth()/2-10+"px",t.display="flex",t},o=l.mve.valueOf("parse");return[c({type:"div",style:{width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px",display:"flex"},children:[c({type:"div",style:{flex:1,padding:"5px"},children:[c({type:"div",children:[c("切换风格"),c({type:"select",attr:{placeholder:"default"},value:Me,children:ke.map((e=>c({type:"option",text:e,value:e}))),event:{change(e){Me(e.target.value)}}})]}),c({type:"div",style:f(n),children:[be({content:"\n# Marked in Node.js\n\nRendered by **marked**.\n\n```js\nvar a=98\nfunction b(){\n}\n```\n\n\n\n",highlight(e,n){Oe(e),t(e.innerText)},element:{type:"pre",style:{resize:"none",flex:1,overflow:"auto"},cls:"language-markdown"}})]})]}),c({type:"div",style:{flex:1,padding:"5px"},children:[c({type:"div",children:Object.entries(Ce).map((([e,t])=>c({type:"button",text:t.name,attr:{disabled:()=>o()==e||void 0},event:{click(){o(e)}}})))}),c({type:"div",style:f(n),children:Object.entries(Ce).map((([e,n])=>{let i;return c({type:n.type,init(e){i=e,n.hightlight(i)},attr:n.attr,prop:{innerHTML:l.mve.delaySetAfter((function(){return n.render(t())}),(function(e,t){t(e),i&&n.hightlight(i)}))},style:f((function(t){return t.display=e==o()?"":"none",t.flex=1,t.overflow="auto",t}))})}))})]})]})]}const Ie=W((function(e){return{hideClose:!0,title:"首页",children:[c({type:"button",text:"tictactoe",event:{click(t){e.panel.add(W((function(e){return{title:"tictactoe",left:l.mve.valueOf(t.clientX),top:l.mve.valueOf(t.clientY),children:D(e.panel.me)}})))}}}),c({type:"button",text:"动画效果",event:{click(t){e.panel.add(Y)}}}),c({type:"button",text:"初始绑定scrollTop或scrollLeft",event:{click(t){e.panel.add(W((function(e){return{title:"tictactoe",noResize:!0,hideMax:!0,left:l.mve.valueOf(t.clientX),top:l.mve.valueOf(t.clientY),children:U()}})))}}}),c({type:"button",text:"marked示例",event:{click(t){e.panel.add(W((function(e){return{title:"marked示例",width:l.mve.valueOf(800),height:l.mve.valueOf(600),left:l.mve.valueOf(t.clientX),top:l.mve.valueOf(t.clientY),children:Te(e)}})))}}})]}})),Ee=l.mve.valueOf(0),Ne=l.mve.valueOf(0);function Ae(){window.innerWidth!=Ee()&&Ee(window.innerWidth),window.innerHeight!=Ne()&&Ne(window.innerHeight)}window.addEventListener("resize",Ae),Ae();const Pe=r((function(e,t){const n=function(e){const t=l.mve.arrayModelOf([]),n=[];function o(e){for(let t=e;t<n.length;t++)n[t].index(t)}function i(e){const t=n.indexOf(e);t>-1&&(n.push(e),n.splice(t,1),o(t))}function r(e){const o=t.findRow((t=>t.panel==e));if(o)i(o);else{const o=l.mve.valueOf(t.size()),i={panel:e,index:o};n.push(i),t.push(i)}}return{add:r,render:s(t,(function(l,c,a){return c.panel({me:l,remove(){const e=c.index();n.splice(e,1),t.remove(a()),o(e)},add:r,desktop:e,index:c.index,bringToFront(){i(c)}})}))}}({width:Ee,height:Ne});return n.add(Ie),c({type:"div",init(){},style:{width:"100%",height:"100%",position:"fixed",top:"0",left:"0"},children:n.render})}));const Se=y("li");function Re(e,t,n,o){let i;return c({type:"li",cls:Se,init:()=>(console.log("初始化",n.content()),function(){console.log("销毁",n.content())}),children:[c({type:"input",init(e){i=e},attr:{type:"checkbox"},prop:{checked:n.complete},event:{change(e){n.complete(i.checked)}}}),c({type:"span",style:{"text-decoration":()=>n.complete()?"line-through":""},text:n.content}),c({type:"a",text:"x",attr:{href:"javascript:void(0)"},event:{click(){e.remove(o())}}})]})}function qe(e){return m(e,(function(t,n,o){return Re(e,0,n,o)}))}function je(e){return s(e,(function(t,n,o){return Re(e,0,n,o)}))}function Fe(e,t,n){const o=l.mve.valueOf(!1),i=l.mve.arrayModelOf([]);return c({type:"li",children:[c({type:"button",text:()=>o()?"-":"+",event:{click(){o(!o())}}}),c({type:"input"}),c({type:"button",text:"追加子节点",event:{click(){o(!0),i.push({})}}}),c({type:"ul",style:{display:()=>o()?"":"none"},children:s(i,Fe)})]})}function ze(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[o,i,r]=t[n];if(e[o]&&e[o]===e[i]&&e[o]===e[r])return e[o]}return null}function We(e){function t(t){return function(e){return c({type:"button",cls:"square",event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)}})}return c({type:"div",children:[c({type:"div",cls:"board-row",children:[t(0),t(1),t(2)]}),c({type:"div",cls:"board-row",children:[t(3),t(4),t(5)]}),c({type:"div",cls:"board-row",children:[t(6),t(7),t(8)]})]})}function Le(e){function t(t){return function(e){return c({type:"button",cls:"square",style:{background:e.background},event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)},background:()=>e.point()==t?"gray":""})}return c({type:"div",children:[c({type:"div",cls:"board-row",children:[t(0),t(1),t(2)]}),c({type:"div",cls:"board-row",children:[t(3),t(4),t(5)]}),c({type:"div",cls:"board-row",children:[t(6),t(7),t(8)]})]})}function _e(e,t){return c({type:"li",children:[c(e),c({type:"ul",children:t})]})}function De(e,t){return c({type:"li",children:[c(e+"："),Xe(t)]})}function Xe(e){return c({type:"a",text:e,attr:{href:e}})}const $e=["asc","desc","none"];function Be(e){let t,n;return[c({type:"input",init(e){t=e}}),c({type:"select",init(e){n=e},children:$e.map((e=>c({type:"option",text:e,value:e})))}),c({type:"button",text:"开始搜索",event:{click(){const o=Date.now(),i=t.value,r=n.value;console.log(i,r),e(i,r),console.log("消耗时间",Date.now()-o)}}})]}const He=[];for(let st=0;st<300;st++)He.push(Math.floor(1e4*Math.random()));function Ye(e){return function(t){const n=l.mve.arrayModelOf(He.map(((e,t)=>({index:t,show:l.mve.valueOf(!0),order:l.mve.valueOf(0),value:e})))),o=l.mve.valueOf("");return c({type:"div",children:[Be((function(t,o){e(t,o,n)})),c({type:"input",attr:{placeholder:"transition如 all 1s"},event:{change(e){const t=e.target.value;o(t)}}}),c({type:"div",style:{display:"flex","flex-direction":"column","font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:s(n,(function(e,t,n){return c({type:"div",style:{display:()=>t.show()?"flex":"none","justify-content":"space-around",order:t.order,transition:o},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:t.value})]})}))})]})}}function Ve(e,t,n){for(let o=0;o<e.length;o++)if(n(t.value,e[o].value))return e.splice(o,0,t);e.push(t)}function Ke(e,t){return e<t}function Ue(e,t){return e>t}const Ge=Ye((function(e,t,n){const o=[];n.forEach((n=>{(n.value+"").startsWith(e)?(n.show(!0),"none"==t?n.order(0):Ve(o,n,"asc"==t?Ke:Ue)):n.show(!1)})),o.forEach(((e,t)=>e.order(t)))}));function Qe(e,t,n,o,i){const r=l.mve.valueOf(!1),a=l.mve.arrayModelOf([]);function u(){return i()&&r()}return[c({type:"tr",style:{display:()=>i()?"":"none"},children:[c({type:"td",children:[c({type:"button",style:{width:"25px","margin-left":20*o+"px",visibility:()=>0==a.size()?"hidden":""},text:()=>r()?"-":"+",event:{click(){r(!r())}}}),c({type:"span",text:()=>"第"+(o+1)+"层"+(n()+1)+"元素"})]}),c({type:"td",text:"第二列"}),c({type:"td",children:[c({type:"button",text:"追加1",event:{click(){r(!0),a.push({})}}})]}),c({type:"td",children:[c({type:"button",text:"前加1",event:{click(){r(!0),a.unshift({})}}})]})]}),s(a,(function(e,t,n){return Qe(e,t,n,o+1,u)}))]}function Ze(e){const t=l.mve.arrayModelOf([{},{},{}]);return c({type:"div",children:[c({type:"table",attr:{border:1},children:s(t,(function(e,t,n){return Qe(0,0,n,0,(()=>!0))}))})]})}function Je(e,t){for(let n=e;n<t.size();n++)if(t.get(n).show())return n;return-1}function et(e,t){let n=Je(0,t);for(let o=0;o<e.length;o++){const i=e[o];if(t.get(n)==i)n++;else{const e=t.indexOf(i,n);if(e<n&&console.log("不应该出现的错误"),t.move(e,n),n=Je(n+1,t),n<0)return void console.log("不应该出现的错误")}}}const tt=Ye((function(e,t,n){const o=n.filter((t=>(t.value+"").startsWith(e)?(t.show(!0),!0):(t.show(!1),!1)));"asc"==t?(o.sort((function(e,t){return e.value-t.value})),et(o,n)):"desc"==t&&(o.sort((function(e,t){return t.value-e.value})),et(o,n)),console.log("执行完成")}));function nt(e,t,n=!1){return{type:"a",attr:{href:n?t:"#"+t,target:n?"_blank":null},children:e.map(c)}}function ot(e,t=1){return c({type:"ul",children:e.map((e=>c({type:"li",children:[c({type:"h"+t,children:e.title.map(c)}),c({type:"span",children:(e.summary||[]).map(c)}),ot(e.children||[],t+1)]})))})}const it=r((function(e,t){return x(e,t,{index:rt,desktop:Pe,simpleAdd:r((function(e,t){return function(e){const t=l.mve.valueOf(0);return c({type:"button",init:()=>(console.log("初始化"),function(){console.log("销毁")}),text:()=>t()+"",event:{click(){t(t()+1)}}})}()})),simpleTodo:r((function(e,t){return function(e){const t=l.mve.arrayModelOf([{content:l.mve.valueOf("ddd"),complete:l.mve.valueOf(!1)},{content:l.mve.valueOf("aaa"),complete:l.mve.valueOf(!0)},{content:l.mve.valueOf("ccc"),complete:l.mve.valueOf(!1)}]);let n;return[c({type:"input",init(e){n=e}}),c({type:"button",text:"添加",event:{click(){const e=n.value.trim();e?(t.unshift({content:l.mve.valueOf(e),complete:l.mve.valueOf(!1)}),n.value=""):alert("请输入内容")}}}),c({type:"style",text:`\n.${Se}{\ndisplay:flex;\njustify-content:space-between;\n}\n\t\t\t`}),c({type:"ul",children:[c({type:"li",text:"前面一条"}),je(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试局部反转"}),c({type:"ul",children:[c({type:"li",text:"前面一条"}),qe(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试全局反转"}),c({type:"ul",childrenReverse:!0,children:[c({type:"li",text:"前面一条"}),je(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试交替"}),c({type:"ul",childrenReverse:!0,children:[c({type:"li",text:"前面一条"}),je(t),c({type:"li",text:"中间一条"}),qe(t),c({type:"li",text:"后面一条"})]})]}()})),todo:r((function(e,t){return function(e){const t=l.mve.arrayModelOf([]);let n;return[c({type:"input",init(e){n=e}}),c({type:"button",text:"添加",event:{click(){const e=n.value.trim();e?(t.unshift({content:l.mve.valueOf(e),finish:l.mve.valueOf(!1)}),n.value=""):alert("请输入内容")}}}),c({type:"table",childrenReverse:!0,children:s(t,(function(e,n,o){return c({type:"tr",children:[c({type:"td",children:[c({type:"input",attr:{type:"checkbox"},prop:{checked:n.finish},event:{change(e){const t=e.target;n.finish(t.checked)}}})]}),c({type:"td",children:[c({type:"input",value:n.content,event:{change(e){const t=e.target,o=t.value.trim();o?n.content(o):t.value=n.content()}}})]}),c({type:"td",children:[c({type:"a",text:"删除",attr:{href:"javascript:void(0)"},event:{click(){t.remove(o())}}})]})]})}))})]}()})),tree:r((function(e,t){return function(e){const t=l.mve.arrayModelOf([]);return[c("tree"),c({type:"button",text:"追加根节点",event:{click(){t.push({})}}}),c({type:"ul",children:s(t,Fe)})]}()})),todoMVC:O,ask:O,tic_tac_toe:r((function(e){return function(e){const t=l.mve.arrayModelOf([{squares:Array(9).fill(null),xIsNext:!0}]),n=l.mve.valueOf(0);return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[We({square:()=>t.get(n()).squares,click(e){const o=n()+1;for(;t.size()>o;)t.pop();const i=t.get(n()),r=i.squares.slice();ze(r)||r[e]||(r[e]=i.xIsNext?"X":"O",t.push({squares:r,xIsNext:!i.xIsNext}),n(n()+1))}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n()),o=ze(e.squares);return o?`Winner: ${o}`:"Next player: "+(e.xIsNext?"X":"O")}}),c({type:"ol",children:s(t,(function(e,t,o){return c({type:"li",children:[c({type:"button",text:()=>o()?`Go to move #${o()}`:"Go to game start",event:{click(){n(o())}}})]})}))})]})]})}()})),tic_tac_toe_simplify:r((function(e){return function(e){const t=l.mve.arrayModelOf([{squares:Array(9).fill(null),xIsNext:!0,point:-1}]),n=l.mve.valueOf(0);return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[Le({point:()=>t.get(n()).point,square:()=>t.get(n()).squares,click(e){const o=n()+1;for(;t.size()>o;)t.pop();const i=t.get(n()),r=i.squares.slice();if(i.winner||r[e])return;r[e]=i.xIsNext?"X":"O";const l=function(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[o,i,r]=t[n];if(e[o]&&e[o]===e[i]&&e[o]===e[r])return e[o]}return null}(r)||(9==t.size()?"FAIR":null);t.push({squares:r,xIsNext:!i.xIsNext,point:e,winner:l}),n(n()+1)}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n()),o=e.winner;return o?`Winner: ${o}`:"Next player: "+(e.xIsNext?"X":"O")}}),c({type:"ol",children:s(t,(function(e,t,o){return c({type:"li",children:[c({type:"button",style:{color:()=>o()==n()?"blue":""},text:()=>o()?`Go to move #${o()}`:"Go to game start",event:{click(){n(o())}}})]})}))})]})]})}()})),tic_tac_toe_my_style:r((function(e){return D()})),sortAndFilterFlexOrder:r((function(e){return Ge(e)})),sortAndFilterMove:r((function(e){return tt(e)})),sortAndFilterFilterChildren:r((function(e){return function(e){const t=l.mve.valueOf(He.map(((e,t)=>({index:t,value:e})))),n=l.mve.valueOf({filter:"",sort:"none"});return c({type:"div",children:[Be((function(e,t){n({filter:e,sort:t})})),c({type:"div",style:{"font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:u((function(){const e=n(),o=t().filter((t=>(t.value+"").startsWith(e.filter)));return"none"==e.sort?o:"asc"==e.sort?o.sort((function(e,t){return e.value-t.value})):"desc"==e.sort?o.sort((function(e,t){return t.value-e.value})):void 0}),(function(e,t,n){return c({type:"div",style:{display:"flex","justify-content":"space-around"},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:t.value})]})}))})]})}()})),sortAndFilterFilterCacheChildren:r((function(e){return function(e){const t=l.mve.valueOf(He.map(((e,t)=>({index:t,value:e})))),n=l.mve.valueOf({filter:"",sort:"none"});return c({type:"div",children:[Be((function(e,t){n({filter:e,sort:t})})),c({type:"div",style:{"font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:g((function(){const e=n(),o=t().filter((t=>(t.value+"").startsWith(e.filter)));return"none"==e.sort?o:"asc"==e.sort?o.sort((function(e,t){return e.value-t.value})):"desc"==e.sort?o.sort((function(e,t){return t.value-e.value})):void 0}),(function(e,t,n){return c({type:"div",style:{display:"flex","justify-content":"space-around"},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:()=>t().value})]})}))})]})}()})),sameRootTree:r(Ze)})}))([]),rt=r((function(e,t){return c({type:"div",children:[ot([{title:[nt(["桌面系统"],it.href("desktop",{}))],summary:["\n\t\t\t\t\t一个桌面、窗口组件系统示例\n\t\t\t\t\t"]},{title:[nt(["vue3+ant-design-vue+tsx的后台管理网站"],"https://wy2010344.gitee.io/vite-vue-ant-design-learn/",!0)],summary:["\n\t\t\t\t\t跟随github项目实现，移除对covue和covue-lib的依赖。待补全\n\t\t\t\t\t"]},{title:[nt(["个人文章收集"],"https://gitee.com/wy2010344/article",!0)],summary:["\n\t\t\t\t\t一些个人文章，不一定完成\n\t\t\t\t\t"]},{title:[nt(["同级表格树"],it.href("sameRootTree",{}))],summary:["使用Table来完成的树结构，数据结构是树，在DOM上是表格"]},{title:[nt(["一个简单的todo"],it.href("todo",{}))],summary:["配合文章的示例《",nt(["mve：从一个简单的todo开始——使用vite"],"https://juejin.cn/post/7003976837860704287",!0),"》"]},{title:[nt(["一个测试的todo"],it.href("simpleTodo",{}))],summary:["以前写的一个todo，测试modelChildrenReverse和childrenReverse"]},{title:[nt(["todoMVC"],it.href("todoMVC/all",{}))],summary:["tastejs的todomvc。tastejs的todomvc是一个帮助你选择前端框架的方案示例",{type:"br"},nt(["https://todomvc.com/"],"https://todomvc.com/",!0)],children:[{title:[nt(["todoMVC"],it.href("ask/all",{}))],summary:["其实跟上面一样，只是路由模块化，使在不同路由下"]}]},{title:[nt(["井字棋tic-tac-toe"],it.href("tic_tac_toe",{}))],summary:["react教程《",nt(["入门教程: 认识 React"],"https://react.docschina.org/tutorial/tutorial.html"),"》在mve下的实现"],children:[{title:[nt(["简化思路"],it.href("tic_tac_toe_simplify",{}))]},{title:[nt(["undo-redo思路"],it.href("tic_tac_toe_my_style",{}))],summary:["不是很赞成react每次全局副本，难道用户每次点击数据库就要全量备份一次？历史记录应该记录操作栈，进而可以undo-redo"]}]},{title:["mve-过滤排序解决方案"],children:[{title:[nt(["modelChildren+flex+order方案"],it.href("sortAndFilterFlexOrder",{}))],summary:["仍然用ArrayModel+modelChildren复用DOM元素，巧妙地使用flex的order来作排序"]},{title:[nt(["modelChildren+move方案"],it.href("sortAndFilterMove",{}))],summary:["使用ArrayModel+modelChildren复用DOM元素，但使用ArrayModel::move来调整顺序"]},{title:[nt(["filterChildren方案"],it.href("sortAndFilterFilterChildren",{}))],summary:["使用filterChildren观察生成的列表，每次重新生成，无法复用DOM元素"]},{title:[nt(["filterCacheChildren方案"],it.href("sortAndFilterFilterCacheChildren",{}))],summary:["使用filterCacheChildren观察生成列表，就地复用DOM元素"]}]}]),c({type:"hr"}),c({type:"div",children:[c({type:"div",text:"欢迎使用小议的mve。它包含mve-core与mve-dom两部分，前一部分与dom无关，可自定义其它引擎，后一部分是mve-core在dom上的简单桥接。"}),c({type:"h3",text:"git地址"}),c({type:"ul",children:[De("当前项目源码地址","https://gitee.com/wy2010344/mve-vite-demo.git"),De("当前项目源码演示地址","https://wy2010344.gitee.io/mve-vite-demo/"),De("文章包地址","https://gitee.com/wy2010344/article.git"),_e("mve-core",[De("gitee","https://gitee.com/wy2010344/npm_mve.git"),De("github","https://github.com/wy2010344/npm_mve.git")]),_e("mve-dom",[De("gitee","https://gitee.com/wy2010344/npm_mve-DOM.git"),De("github","https://github.com/wy2010344/npm_mve-DOM.git")])]}),c({type:"h3",text:"特点"}),c({type:"ul",children:["过程式（函数式）基因，比react更早。作者避免在ts/js中使用class/this等概念。","无组件概念，完全使用编程语言本身的模块(函数)复用。","基础模型只有mve.Value<T>和mve.ArrayModel<T>，构建出庞大的页面逻辑。","界面布局使用纯ts/js，不引入复杂的xml，更高效地复用。","mvvm对属性节点针对性更新(受vue启发)，性能高。并创新地发现使用mve.ArrayModel<T>与界面片段一一对应(支持同级嵌套)，不使用虚拟DOM与任何形式的享元复用，和异步更新。","区分与DOM引擎无关的核心模块，可用于其它自定义引擎。并提供简单的dom桥接模块。","开放可定制自己的mve使用方式。"].map((e=>c({type:"li",text:e})))}),c({type:"div",style:{"text-align":"center"},children:[c("创作不易，如果给你带来帮助，欢迎给作者打赏。"),c({type:"h4",text:"微信"}),c({type:"img",attr:{src:"https://wy2010344.gitee.io/article/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81-small.png"}}),c({type:"h4",text:"支付宝"}),c({type:"img",attr:{src:"https://wy2010344.gitee.io/article/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81-small.png"}})]})]})]})})),lt=y("topArea"),ct=c.root((function(e){return{type:"div",children:[[c({type:"link",attr:{href(){const e=Me();return`${we}themes/prism${""==e?"":`-${e}`}.css`},rel:"stylesheet"}}),c({type:"script",attr:{src:`${we}components/prism-core.min.js`}}),c({type:"script",attr:{src:`${we}plugins/autoloader/prism-autoloader.min.js`}})],c({type:"style",text:`\n\t\t\t\t.${lt}{\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\ttop:0;\n\t\t\t\t\tleft:0;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight:100%\n\t\t\t\t}\n\t\t\t\t`}),it.render(e)]}}));b(it),document.body.appendChild(ct.element);const at=l.orRun(ct.init);at&&window.addEventListener("unload",at);
