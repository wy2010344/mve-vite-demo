import{d as e,u as t,m as n,c as i}from"./vendor.2c75a0ac.js";function o(t){function n(e){return function(n){n=n||window.event,t.resize(n,e)}}const i=t.allow,o=i?function(){return i()?"":"none"}:"";return[e({type:"div",style:{display:o,width:"100%",height:"7px",position:"absolute",top:"-3px",left:"0",cursor:"n-resize"},event:{mousedown:n({t:!0})}}),e({type:"div",style:{display:o,width:"7px",height:"100%",position:"absolute",right:"-3px",top:"0",cursor:"e-resize"},event:{mousedown:n({r:!0})}}),e({type:"div",style:{display:o,width:"7px",height:"100%",position:"absolute",left:"-3px",top:"0",cursor:"w-resize"},event:{mousedown:n({l:!0})}}),e({type:"div",style:{display:o,width:"100%",height:"7px",position:"absolute",bottom:"-3px",left:"0",cursor:"s-resize"},event:{mousedown:n({b:!0})}}),e({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",top:"-7px",left:"-7px",cursor:"nw-resize"},event:{mousedown:n({t:!0,l:!0})}}),e({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",top:"-7px",right:"-7px",cursor:"ne-resize"},event:{mousedown:n({t:!0,r:!0})}}),e({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",bottom:"-7px",left:"-7px",cursor:"sw-resize"},event:{mousedown:n({b:!0,l:!0})}}),e({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",bottom:"-7px",right:"-7px",cursor:"se-resize"},event:{mousedown:n({b:!0,r:!0})}})]}function r(){document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none",document.body.style.mozUserSelect="none",document.body.style["user-select"]="none"}function l(){document.body.style.webkitUserSelect="",document.body.style.msUserSelect="",document.body.style.mozUserSelect="",document.body.style["user-select"]=""}function d(e,t,n){return e?t.clientX-n.clientX:t.clientY-n.clientY}function c(e){let t=!1;function n(n){t&&e.move(n)}function i(t){l(),e.up&&(t=t||window.event,e.up(t)),c()}function o(t){l(),e.leave&&(t=t||window.event,e.leave(t)),c()}let d=e.border;function c(){t=!1,a(d,"mousemove",n),a(d,"mouseup",i),a(d,"mouseleave",o)}return function(l){r(),l=l||window.event,d||(d=l.target),e.down&&e.down(l),t=!0,p(d,"mousemove",n),p(d,"mouseup",i),p(d,"mouseleave",o)}}function u(e){let t;const n=e.allow||function(){return!0},i=[];function o(t){t=t||window.event,e.cancel&&e.cancel(t),h(t),f(t)}return e.diff&&i.push((function(t,n,i){e.diff({x:t,y:n,e:i})})),e.diffX&&i.push((function(t,n){0!=t&&e.diffX(t)})),e.diffY&&i.push((function(t,n){0!=n&&e.diffY(n)})),c({border:e.border||document,down(n){n=n||window.event,t=n,e.init&&e.init(n),h(n),f(n)},move(e){if(n()){const n=(e=e||window.event).clientX-t.clientX,o=e.clientY-t.clientY;for(let t of i)t(n,o,e);t=e,h(e),f(e)}},up:o,leave:o})}function s(e){let t=null;const n=e.allow||function(){return!0},i={cancel(e){t=null,l(),a(o,"mousemove",i.move),a(o,"mouseup",i.cancel),a(o,"mouseleave",i.cancel)},move(i){if(n()){const n=t.event;i=i||window.event,t.event=i;const o=d(!0,i,n),r=d(!1,i,n);0!=o&&(t.dir.l&&(e.addLeft(o),e.addWidth(-o)),t.dir.r&&e.addWidth(o)),0!=r&&(t.dir.t&&(e.addTop(r),e.addHeight(-r)),t.dir.b&&e.addHeight(r))}}},o=e.border||document;return function(e,n){r(),t={event:e,dir:n},p(o,"mousemove",i.move),p(o,"mouseup",i.cancel),p(o,"mouseleave",i.cancel)}}function p(e,t,n){e.addEventListener(t,n)}function a(e,t,n){e.removeEventListener(t,n)}function h(e){e.preventDefault()}function f(e){e.stopPropagation()}function v(n){const i=t.mve.valueOrCall(n.hideClose),o=t.mve.valueOrCall(n.hideMax);return e({type:"div",style:{"background-image":"linear-gradient(180deg, #e6e6e6, #bab9ba)",cursor:"move","border-radius":"5px 5px 0 0","white-space":"nowrap",height:n.height-1+"px","line-height":n.height-1+"px","border-bottom":"1px solid #696969",display:"flex","align-items":"center"},event:{mousedown(e){n.move(e||window.event)}},children:[e({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"#1600ff","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#e4e0df",display:()=>i()?"none":"inline-block"},text:"X",event:{mousedown(e){e.stopPropagation()},click:n.closeClick}}),e({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"green","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#f2ff2f",display:()=>o()?"none":"inline-block"},text:()=>n.max()?"o":"O",event:{mousedown(e){e.stopPropagation(e)},click(){n.max(!n.max())}}}),e({type:"div",style:{"font-weight":"bold","text-indent"(){let e=0;return i()&&(e-=20),o()&&(e-=20),e+"px"},"font-size":"15px","text-align":"center",display:"inline",margin:"0 5px",color:"#645d61",flex:1,overflow:"hidden","text-overflow":"ellipsis"},text:n.title})]})}function y(n){return function(i){function r(){return c()?i.desktop.width():h()}function l(){return c()?i.desktop.height():f()}const d=n({panel:i,contentHeight:()=>l()-30,contentWidth:r}),c=d.max||t.mve.valueOf(!1),p=d.top||t.mve.valueOf(0),a=d.left||t.mve.valueOf(0),h=d.width||t.mve.valueOf(400),f=d.height||t.mve.valueOf(600);return e({type:"div",event:{mousedown:{capture:!0,handler:i.bringToFront}},style:{background:"white","border-radius":"5px",position:"absolute","z-index":()=>i.index()+"","box-shadow":"rgb(102, 102, 102) 0px 0px 20px 5px",top:()=>c()?"0px":p()+"px",left:()=>c()?"0px":a()+"px",width:()=>r()+"px",height:()=>l()+"px"},children:[v({title:d.title,height:30,move:u({diffX(e){a(a()+e)},diffY(e){p(p()+e)}}),hideClose:d.hideClose,max:c,hideMax:d.hideMax,closeClick:i.remove}),d.children,o({resize:s({addHeight(e){f(f()+e)},addLeft(e){a(a()+e)},addTop(e){p(p()+e)},addWidth(e){h(h()+e)}})})]})}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const m=y((function(t){return{children:[e({type:"div",style:{overflow:"auto",width:()=>t.contentWidth()+"px",height:()=>t.contentHeight()+"px"},children:[e({type:"div",text:"中在",style:{width:"800px",height:"900px"}})]})]}})),x=y((function(t){return{hideClose:!0,title:"首页",children:[e({type:"button",text:"首页",event:{click(){t.panel.add(m)}}})]}})),w=t.mve.valueOf(0),g=t.mve.valueOf(0);function b(){window.innerWidth!=w()&&w(window.innerWidth),window.innerHeight!=g()&&g(window.innerHeight)}window.addEventListener("resize",b),b();const k=i("li");function O(i,o,r){const l=t.mve.valueOf(!1),d=t.mve.arrayModelOf([]);return e({type:"li",children:[e({type:"button",text:()=>l()?"-":"+",event:{click(){l(!l())}}}),e({type:"input"}),e({type:"button",text:"追加子节点",event:{click(){l(!0),d.push({})}}}),e({type:"ul",style:{display:()=>l()?"":"none"},children:n(d,O)})]})}function z(){return e({type:"ul",children:C.map((t=>e({type:"li",children:[e({type:"a",attr:{href:"javascript:void(0)"},text:t.title,event:{click(){location.hash="#"+t.url}}})]})))})}const C=[{title:"首页",url:"index",render:()=>e.root((function(e){return{type:"div",children:[z()]}}))},{title:"桌面",url:"desktop",render:function(){const i=function(e){const i=t.mve.arrayModelOf([]),o=[];function r(e){const n={panel:e,index:t.mve.valueOf(o.length)};i.push(n),o.push(n)}return{add:r,render:n(i,(function(t,n,l){return n.panel({me:t,remove(){i.remove(l())},add:r,desktop:e,index:n.index,bringToFront(){const e=o.indexOf(n);if(e<o.length-1){o.push(n),o.splice(e,1);for(let t=e;t<o.length;t++)o[t].index(t)}}})}))}}({width:w,height:g});return i.add(x),e.root((function(e){return{type:"div",init(){},style:{width:"100%",height:"100%",position:"fixed",top:"0",left:"0"},children:i.render}}))}},{title:"简单的加法",url:"simpleAdd",render:function(){return e.root((function(e){const n=t.mve.valueOf(0);return{type:"button",text:()=>n()+"",event:{click(){n(n()+1)}}}}))}},{title:"简单的Todo",url:"simpleTodo",render:function(){return e.root((function(i){const o=t.mve.arrayModelOf([]);let r;return{type:"div",children:[e({type:"input",init(e){r=e}}),e({type:"button",text:"添加",event:{click(){const e=r.value.trim();e?(o.unshift({content:t.mve.valueOf(e),complete:t.mve.valueOf(!1)}),r.value=""):alert("请输入内容")}}}),e({type:"style",text:`\n.${k}{\n\tdisplay:flex;\n\tjustify-content:space-between;\n}\n\t\t\t\t\t`}),e({type:"ul",children:n(o,(function(t,n,i){let r;return e({type:"li",cls:k,children:[e({type:"input",init(e){r=e},attr:{type:"checkbox"},prop:{checked:n.complete},event:{change(e){n.complete(r.checked)}}}),e({type:"span",style:{"text-decoration":()=>n.complete()?"line-through":""},text:n.content}),e({type:"a",text:"x",attr:{href:"javascript:void(0)"},event:{click(){o.remove(i())}}})]})}))})]}}))}},{title:"todo",url:"todo",render:function(){const i=t.mve.arrayModelOf([]);let o;return e.root((function(r){return{type:"div",children:[e({type:"input",init(e){o=e}}),e({type:"button",text:"添加",event:{click(){const e=o.value.trim();e?(i.unshift({content:t.mve.valueOf(e),finish:t.mve.valueOf(!1)}),o.value=""):alert("请输入内容")}}}),e({type:"table",childrenReverse:!0,children:n(i,(function(t,n,o){return e({type:"tr",children:[e({type:"td",children:[e({type:"input",attr:{type:"checkbox"},prop:{checked:n.finish},event:{change(e){const t=e.target;n.finish(t.checked)}}})]}),e({type:"td",children:[e({type:"input",value:n.content,event:{change(e){const t=e.target,i=t.value.trim();i?n.content(i):t.value=n.content()}}})]}),e({type:"td",children:[e({type:"a",text:"删除",attr:{href:"javascript:void(0)"},event:{click(){i.remove(o())}}})]})]})}))})]}}))}},{title:"tree",url:"tree",render:function(){const i=t.mve.arrayModelOf([]);return e.root((function(t){return{type:"div",children:[e("tree"),e({type:"button",text:"追加根节点",event:{click(){i.push({})}}}),e({type:"ul",children:n(i,O)})]}}))}}];let L;function M(){const t=location.hash,n=t?t.split("?")[0].slice(1):"index",i=C.find((e=>e.url==n));L&&L.destroy&&(L.destroy(),document.body.removeChild(L.element)),L=i?i.render():function(t){return e.root((function(n){return{type:"div",children:[e(`未找到路由定义:${t}`),e("可用定义有"),z()]}}))}(n),document.body.appendChild(L.element),L.init&&L.init()}window.addEventListener("hashchange",M),M(),window.addEventListener("close",(function(){L&&L.destroy&&L.destroy()}));
