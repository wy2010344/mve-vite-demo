var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;"undefined"!=typeof require&&require;import{c as l,u as r,d as c,k as s,m as a,a as u,D as d,b as p,f,i as h,r as v,e as y,g as m,h as g,F as x,S as b,j as w,l as O,n as k,o as C,p as M,q as T,s as E}from"./vendor.c0776ecf.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const A={all:null,active:{b:"2"},complete:{c:"3"}},N=l((function(e,t){let n;const o=r.mve.valueOf(null),i=r.mve.arrayModelOf([]);function l(){return t.current()||"all"}e.WatchAfter((function(){const e=l();return i.filter((t=>"all"==e||("active"==e?!t.completed():"complete"==e?t.completed():void 0)))}),(function(e){i.forEach((e=>e.show(!1)));for(const t of e)t.show(!0)}));return c({type:"div",cls:"todo-app-main",children:[c({type:"div",cls:"todo-app-body",children:[c({type:"section",cls:"todoapp",children:[c({type:"header",cls:"header",children:[c({type:"h1",text:"todos"}),c({type:"input",cls:"new-todo",attr:{autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"},init(e){n=e},event:{keydown(e){if(s.ENTER(e)){const e=n.value.trim();if(e){const t={show:r.mve.valueOf(!0),title:r.mve.valueOf(e),completed:r.mve.valueOf(!1),state:r.mve.valueOf("init")};i.push(t),setTimeout((function(){t.state(null)})),n.value=""}}}}})]}),c({type:"section",cls:"main",children:[c({type:"input",id:"toggle-all",cls:"toggle-all",attr:{type:"checkbox"},event:{click(e){i.forEach((t=>{t.completed(e.target.checked)}))}}}),c({type:"label",attr:{for:"toggle-all"},text:"Mark all as complete"}),c({type:"ul",cls:"todo-list",children:a(i,(function(e,t,n){let l,r;function a(){t.title(r.value.trim()),o(null)}return c({type:"li",cls(){const e=["todo"];return t.completed()&&e.push("completed"),t==o()&&e.push("editing"),e},style:{display:()=>t.show()?"":"none",left:()=>"destroy"==t.state()?"100%":"init"==t.state()?"-100%":"0",transition:"left 0.5s"},children:[c({type:"div",cls:"view",children:[c({type:"input",cls:"toggle",attr:{type:"checkbox"},init(e){l=e},prop:{checked:t.completed},event:{change(){t.completed(l.checked)}}}),c({type:"label",text:t.title,event:{dblclick(){o(t),r.focus()}}}),c({type:"button",cls:"destroy",event:{click(){t.state("destroy"),setTimeout((function(){i.remove(n())}),500)}}})]}),c({type:"input",cls:"edit",init(e){r=e},attr:{type:"text","todo-focus":()=>t==o()},value:t.title,event:{blur:a,keyup(e){s.ENTER(e)?a():"Escape"==e.key&&(o(null),r.value=t.title()),console.log(e)}}})]})}))})]}),c({type:"footer",cls:"footer",children:[c({type:"span",cls:"todo-count",children:[c({type:"strong",text:()=>i.filter((e=>!e.completed())).length}),c({type:"span",text:" items left"})]}),c({type:"ul",cls:"filters",children:Object.entries(A).map((([e,n])=>[c({type:"li",children:[c({type:"a",cls:()=>l()==e?"selected":"",attr:{href:"javascript:void(0)"},text:e,event:{click(){t.go(e,n)}}})]})]))}),c({type:"button",cls:"clear-completed",text:"Clear completed",style:{display:()=>i.filter((e=>e.completed())).length>0?"":"none"},event:{click(){i.removeWhere((e=>e.completed()))}}})]})]}),c({type:"fotter",cls:"info",children:[c({type:"p",text:"Double-click to edit a todo"}),c({type:"p",text:"written by wy2010344"}),c({type:"p",text:"Part of TodoMVC"})]})]})]})})),R={all:null,active:{b:"2"},complete:{c:"3"}},S=l((function(e,t){let n;const o=r.mve.valueOf(null),i=r.mve.arrayModelOf([]);function l(){return t.current()||"all"}e.WatchAfter((function(){const e=l();return i.filter((t=>"all"==e||("active"==e?!t.completed():"complete"==e?t.completed():void 0)))}),(function(e){i.forEach((e=>e.show(!1)));for(const t of e)t.show(!0)}));return u(d,{type:"div",cls:"todo-app-main"},u(d,{type:"div",cls:"todo-app-body"},u(d,{type:"section",cls:"todoapp"},u(d,{type:"header",cls:"header"},u(d,{type:"h1",text:"todos"}),u(d,{type:"input",cls:"new-todo",attr:{autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"},init:e=>{n=e},event:{keydown(e){if(s.ENTER(e)){const e=n.value.trim();if(e){const t={show:r.mve.valueOf(!0),title:r.mve.valueOf(e),completed:r.mve.valueOf(!1),state:r.mve.valueOf("init")};i.push(t),setTimeout((function(){t.state(null)})),n.value=""}}}}})),u(d,{type:"section",cls:"main"},u(d,{type:"input",id:"toggle-all",cls:"toggle-all",attr:{type:"checkbox"},event:{click(e){i.forEach((t=>{t.completed(e.target.checked)}))}}}),u(d,{type:"label",attr:{for:"toggle-all"},text:"Mark all as complete"}),u(d,{type:"ul",cls:"todo-list"},a(i,(function(e,t,n){let l,r;function c(){t.title(r.value.trim()),o(null)}return u(d,{type:"li",cls:()=>{const e=["todo"];return t.completed()&&e.push("completed"),t==o()&&e.push("editing"),e},style:{display:()=>t.show()?"":"none",left:()=>"destroy"==t.state()?"100%":"init"==t.state()?"-100%":"0",transition:"left 0.5s"}},u(d,{type:"div",cls:"view"},u(d,{type:"input",cls:"toggle",attr:{type:"checkbox"},init:e=>{l=e},prop:{checked:t.completed},event:{change(){t.completed(l.checked)}}}),u(d,{type:"label",text:t.title,event:{dblclick(){o(t),r.focus()}}}),u(d,{type:"button",cls:"destroy",event:{click(){t.state("destroy"),setTimeout((function(){console.log("删除",n()),i.remove(n())}),500)}}})),u(d,{type:"input",cls:"edit",init:e=>{r=e},attr:{type:"text","todo-focus":()=>t==o()},value:t.title,event:{blur:c,keyup(e){s.ENTER(e)?c():"Escape"==e.key&&(o(null),r.value=t.title()),console.log(e)}}}))})))),u(d,{type:"footer",cls:"footer"},u(d,{type:"span",cls:"todo-count"},u(d,{type:"strong",text:()=>i.filter((e=>!e.completed())).length})," items left"),u(d,{type:"ul",cls:"filters"},Object.entries(R).map((([e,n])=>u(d,{type:"li"},u(d,{type:"a",cls:()=>l()==e?"selected":"",attr:{href:"javascript:void(0)"},text:e,event:{click(){t.go(e,n)}}}))))),u(d,{type:"button",cls:"clear-completed",text:"Clear completed",style:{display:()=>i.filter((e=>e.completed())).length>0?"":"none"},event:{click(){i.removeWhere((e=>e.completed()))}}}))),u(d,{type:"footer",cls:"info"},u(d,{type:"p",text:"Double-click to edit a todo"}),u(d,{type:"p",text:"written by wy2010344"}),u(d,{type:"p",text:"Part of TodoMVC"}))))}));function P(e){function t(t){return function(n){n=n||window.event,e.resize(n,t)}}const n=e.allow,o=n?function(){return n()?"":"none"}:"";return[c({type:"div",style:{display:o,width:"100%",height:"7px",position:"absolute",top:"-3px",left:"0",cursor:"n-resize"},event:{mousedown:t({t:!0})}}),c({type:"div",style:{display:o,width:"7px",height:"100%",position:"absolute",right:"-3px",top:"0",cursor:"e-resize"},event:{mousedown:t({r:!0})}}),c({type:"div",style:{display:o,width:"7px",height:"100%",position:"absolute",left:"-3px",top:"0",cursor:"w-resize"},event:{mousedown:t({l:!0})}}),c({type:"div",style:{display:o,width:"100%",height:"7px",position:"absolute",bottom:"-3px",left:"0",cursor:"s-resize"},event:{mousedown:t({b:!0})}}),c({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",top:"-7px",left:"-7px",cursor:"nw-resize"},event:{mousedown:t({t:!0,l:!0})}}),c({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",top:"-7px",right:"-7px",cursor:"ne-resize"},event:{mousedown:t({t:!0,r:!0})}}),c({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",bottom:"-7px",left:"-7px",cursor:"sw-resize"},event:{mousedown:t({b:!0,l:!0})}}),c({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",bottom:"-7px",right:"-7px",cursor:"se-resize"},event:{mousedown:t({b:!0,r:!0})}})]}function j(){document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none",document.body.style.mozUserSelect="none",document.body.style["user-select"]="none"}function F(){document.body.style.webkitUserSelect="",document.body.style.msUserSelect="",document.body.style.mozUserSelect="",document.body.style["user-select"]=""}function q(e,t,n){return e?t.clientX-n.clientX:t.clientY-n.clientY}function z(e){let t=!1;function n(n){t&&e.move(n)}function o(t){F(),e.up&&(t=t||window.event,e.up(t)),r()}function i(t){F(),e.leave&&(t=t||window.event,e.leave(t)),r()}let l=e.border;function r(){t=!1,_(l,"mousemove",n),_(l,"mouseup",o),_(l,"mouseleave",i)}return function(r){j(),r=r||window.event,l||(l=r.target),e.down&&e.down(r),t=!0,D(l,"mousemove",n),D(l,"mouseup",o),D(l,"mouseleave",i)}}function W(e){let t;const n=e.allow||function(){return!0},o=[];function i(t){t=t||window.event,e.cancel&&e.cancel(t),L(t),X(t)}return e.diff&&o.push((function(t,n,o){e.diff({x:t,y:n,e:o})})),e.diffX&&o.push((function(t,n){0!=t&&e.diffX(t)})),e.diffY&&o.push((function(t,n){0!=n&&e.diffY(n)})),z({border:e.border||document,down(n){n=n||window.event,t=n,e.init&&e.init(n),L(n),X(n)},move(e){if(n()){const n=(e=e||window.event).clientX-t.clientX,i=e.clientY-t.clientY;for(let t of o)t(n,i,e);t=e,L(e),X(e)}},up:i,leave:i})}function I(e){let t=null;const n=r.mve.valueOrCall(e.forbidden),o={cancel(e){t=null,F(),_(i,"mousemove",o.move),_(i,"mouseup",o.cancel),_(i,"mouseleave",o.cancel)},move(o){if(!n()){const n=t.event;o=o||window.event,t.event=o;const i=q(!0,o,n),l=q(!1,o,n);0!=i&&(t.dir.l&&(e.addLeft(i),e.addWidth(-i)),t.dir.r&&e.addWidth(i)),0!=l&&(t.dir.t&&(e.addTop(l),e.addHeight(-l)),t.dir.b&&e.addHeight(l))}}},i=e.border||document;return function(e,n){j(),t={event:e,dir:n},D(i,"mousemove",o.move),D(i,"mouseup",o.cancel),D(i,"mouseleave",o.cancel)}}function D(e,t,n){e.addEventListener(t,n)}function _(e,t,n){e.removeEventListener(t,n)}function L(e){e.preventDefault()}function X(e){e.stopPropagation()}function $(e){const t=r.mve.valueOrCall(e.hideClose),n=r.mve.valueOrCall(e.hideMax),o=r.mve.valueOrCall(e.max);return c({type:"div",style:{"background-image":"linear-gradient(180deg, #e6e6e6, #bab9ba)",cursor:"move","border-radius":"5px 5px 0 0","white-space":"nowrap",height:e.height-1+"px","line-height":e.height-1+"px","border-bottom":"1px solid #696969",display:"flex","align-items":"center"},event:{mousedown(t){e.move(t||window.event)}},children:[c({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"#1600ff","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#e4e0df",display:()=>t()?"none":"inline-block"},text:"X",event:{mousedown(e){e.stopPropagation()},click:e.closeClick}}),c({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"green","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#f2ff2f",display:()=>n()?"none":"inline-block"},text:()=>o()?"o":"O",event:{mousedown(e){e.stopPropagation(e)},click(){e.maxClick()}}}),c({type:"div",style:{"font-weight":"bold","text-indent"(){let e=0;return t()&&(e-=20),n()&&(e-=20),e+"px"},"font-size":"15px","text-align":"center",display:"inline",margin:"0 5px",color:"#645d61",flex:1,overflow:"hidden","text-overflow":"ellipsis"},text:e.title})]})}function H(e){return function(t){const n={width:()=>f.on()?f.width():l()?t.desktop.width():u(),height:()=>f.on()?f.height():l()?t.desktop.height():d(),top:()=>f.on()?f.top():l()?0:s(),left:()=>f.on()?f.left():l()?0:a()},o=e({panel:t,contentHeight:()=>n.height()-30,contentWidth:n.width}),i=r.mve.valueOrCall(o.noResize),l=o.max||r.mve.valueOf(!1),s=o.top||r.mve.valueOf(0),a=o.left||r.mve.valueOf(0),u=o.width||r.mve.valueOf(400),d=o.height||r.mve.valueOf(600),f={on:r.mve.valueOf(!0),left:r.mve.valueOf(a()),top:r.mve.valueOf(s()),width:r.mve.valueOf(0),height:r.mve.valueOf(0)};return c({type:"div",init(){p.targetAnimationOf({data:[{to:u(),value:f.width},{to:d(),value:f.height}],change:p.Animation.Cubic.easeIn,duration:300,end(){f.on(!1)}})},event:{mousedown:{capture:!0,handler:t.bringToFront}},style:{overflow:"hidden",background:"white","border-radius":"5px",position:"absolute","z-index":()=>t.index()+"","box-shadow":"rgb(102, 102, 102) 0px 0px 20px 5px",top:()=>n.top()+"px",left:()=>n.left()+"px",width:()=>n.width()+"px",height:()=>n.height()+"px"},children:[$({title:o.title,height:30,move:W({diffX(e){a(a()+e)},diffY(e){s(s()+e)}}),hideClose:o.hideClose,max:l,maxClick(){l()?p.targetAnimationOf({data:[{from:n.width(),to:u(),value:f.width},{from:n.height(),to:d(),value:f.height},{from:n.left(),to:a(),value:f.left},{from:n.top(),to:s(),value:f.top}],begin(){f.on(!0)},change:p.Animation.Cubic.easeIn,duration:300,end(){f.on(!1),l(!1)}}):p.targetAnimationOf({data:[{from:n.width(),to:t.desktop.width(),value:f.width},{from:n.height(),to:t.desktop.height(),value:f.height},{from:n.left(),to:0,value:f.left},{from:n.top(),to:0,value:f.top}],begin(){f.on(!0)},change:p.Animation.Cubic.easeIn,duration:300,end(){f.on(!1),l(!0)}})},hideMax:o.hideMax,closeClick(){f.left(n.left()),f.top(n.top()),p.targetAnimationOf({data:[{from:n.width(),to:0,value:f.width},{from:n.height(),to:0,value:f.height}],change:p.Animation.Cubic.easeOut,begin(){f.on(!0)},duration:300,end(){f.on(!1),t.remove()}})}}),o.children,P({resize:I({forbidden:i,addHeight(e){d(d()+e)},addLeft(e){a(a()+e)},addTop(e){s(s()+e)},addWidth(e){u(u()+e)}})})]})}}function Y(e){return e&&"X"==e.who?"O":"X"}function B(e){function t(t){return function(e){return c({type:"button",cls:"square",style:{background:e.background},event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)},background:()=>e.point()==t?"gray":""})}function n(e){return c({type:"div",cls:"board-row",children:[t(e+0),t(e+1),t(e+2)]})}return c({type:"div",children:[n(0),n(3),n(6)]})}function V(e){const t=r.mve.arrayModelOf([]),n=r.mve.valueOf({square:Array(9).fill(null),stepNumber:-1});function o(e){const n=t.get(e.stepNumber+1);return e.square[n.point]=n.who,e.stepNumber++,e}function i(e){const n=t.get(e.stepNumber);return e.square[n.point]=null,e.stepNumber--,e}return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[B({point(){const e=n().stepNumber;return e<0?null:t.get(e).point},square:()=>n().square,click(e){const i=n(),l=i.stepNumber+1;for(;t.size()>l;)t.pop();const r=t.getLast();if(r&&r.winner||i.square[e])return;const c=Y(r);t.push({who:c,point:e,winner:K(i.square,c,e)||(7==i.stepNumber?"FAIR":void 0)}),n(o(i))}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n().stepNumber);return e&&e.winner?`Winner: ${e.winner}`:`Next player: ${Y(e)}`}}),c({type:"ol",children:[c({type:"li",children:[c({type:"button",text:"init",style:{color:()=>-1==n().stepNumber?"blue":""},event:{click(){const e=n();e.square.fill(null),e.stepNumber=-1,n(e)}}})]}),a(t,(function(e,t,l){return c({type:"li",children:[c({type:"button",style:{color:()=>l()==n().stepNumber?"blue":""},text:()=>`Go to move #${l()}`,event:{click(){let e=n();if(e.stepNumber<l()){for(;e.stepNumber<l();)e=o(e);n(e)}else if(e.stepNumber>l()){for(;e.stepNumber>l();)e=i(e);n(e)}}}})]})}))]})]})]})}function K(e,t,n){e[n]=t;const o=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let i=0;i<o.length;i++){const[l,r,c]=o[i];if(e[l]&&e[l]===e[r]&&e[l]===e[c])return e[n]=null,t}return e[n]=null,null}const U=Object.keys(p.Animation);function G(e,t){const n=r.mve.valueOf(U[0]),o=r.mve.valueOf(null);function i(e){n(e);const i=p.Animation[e],l="function"==typeof i?i:Object.values(i)[0];o(l),t(l)}const l=h("select-animation"),s=h("select-animation-type"),a=e.Cache((function(){const e=p.Animation[n()];return"function"==typeof e?[]:Object.entries(e)}));return setTimeout((function(){i(U[0])})),c({type:"div",init:()=>(console.log("初始化"),function(){console.log("销毁")}),children:[c({type:"div",children:[c({type:"h3",text:"内置动画类型"}),U.map((function(e){return c({type:"span",children:[c({type:"input",attr:{type:"radio",name:l},prop:{checked:()=>n()==e},event:{click(){i(e)}}}),c({type:"label",text:e})]})})),c({type:"h3",text:"细分类型",style:{display:()=>0==a().length?"none":""}}),f(a,(function(e,n){return c({type:"span",children:[c({type:"input",attr:{type:"radio",name:s},prop:{checked:()=>o()==n[1]},event:{click(){const e=n[1];o(e),t(e)}}}),c({type:"label",text:n[0]})]})}))]})]})}function Z(e){let t,n;const o=r.mve.valueOf({start:0,c1:0,end:0,c2:0});return c({type:"div",init(){const e=t.getContext("2d");let i=-1,l=50,r=300,c=350,s=100,a=[{x:300,y:250},{x:100,y:150}];function u(){e.save(),e.lineWidth=1,e.strokeStyle="#ff0000",e.beginPath(),e.moveTo(l,r),e.bezierCurveTo(a[0].x,a[0].y,a[1].x,a[1].y,c,s),e.stroke(),e.restore(),e.save(),e.strokeStyle="hsla(30,50%,50%,1.0)",e.beginPath(),e.moveTo(l,r),e.lineTo(a[0].x,a[0].y),e.stroke(),e.beginPath(),e.arc(a[0].x,a[0].y,6,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.moveTo(c,s),e.lineTo(a[1].x,a[1].y),e.stroke(),e.beginPath(),e.arc(a[1].x,a[1].y,6,0,2*Math.PI,!1),e.stroke(),e.restore()}function d(){e.clearRect(0,0,t.width,t.height),function(t,n,o){e.save(),e.lineWidth=.5,e.strokeStyle=t;for(var i=n+.5;i<e.canvas.width;i+=n)e.beginPath(),e.moveTo(i,0),e.lineTo(i,e.canvas.height),e.stroke();for(i=o+.5;i<e.canvas.height;i+=o)e.beginPath(),e.moveTo(0,i),e.lineTo(e.canvas.width,i),e.stroke();e.restore()}("hsla(0,0%,80%,1.0)",10,10),e.save(),e.beginPath(),e.strokeStyle="hsl(200,50%,50%)",e.moveTo(50,100),e.lineTo(l,r),e.lineTo(350,300),e.lineTo(c,s),e.closePath(),e.stroke(),e.restore()}function p(){let e=o();e.start=r,e.c1=a[0].y,e.end=s,e.c2=a[1].y,o(e);var t=`function bezierFun(t,b,c,d){\n  t = t/d;\n  var y = ${r}*Math.pow(1-t,3)+3*${a[0].y}*t*Math.pow(1-t,2)+3*${a[1].y}*Math.pow(t,2)*(1-t)+${s}*Math.pow(t,3);\n  return b+(300-y)/200*c;\n}`;n.value=t}function f(e,n){var o=t.getBoundingClientRect();return{x:e-o.left*(t.width/o.width),y:n-o.top*(t.height/o.height)}}d(),u(),p(),t.onmousedown=function(n){var o=f(n.clientX,n.clientY);a.forEach(((t,n)=>{if(e.beginPath(),e.arc(t.x,t.y,6,0,2*Math.PI,!1),e.isPointInPath(o.x,o.y))return i=n,!1})),t.onmousemove=function(e){a[i]=f(e.clientX,e.clientY),a[i].x=Math.max(10,a[i].x),a[i].x=Math.min(390,a[i].x),a[i].y=Math.max(10,a[i].y),a[i].y=Math.min(390,a[i].y),d(),u(),p()},t.onmouseup=function(e){t.onmousemove=null,t.onmouseup=null}}},children:[c({type:"canvas",init(e){t=e},attr:{width:"400",height:"400"},style:{cursor:"crosshair"}}),c({type:"button",text:"绘制",event:{click(){e(p.drawOfBezier3(o()))}}}),c({type:"textarea",init(e){n=e},style:{resize:"none",width:"400px",height:"100px",border:"none",padding:"0px",margin:"0px"}})]})}const J=H((function(e){function t(t){t&&(e.panel.add(ee),Q.draw(t))}return{title:"动画演示",children:[c({type:"div",style:{width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px",overflow:"auto"},children:[G(e.panel.me,t),Z(t)]})]}})),Q=function(){let e,t,n=!1;return{draw(o){if(n)return;const i=[],l=t.createRadialGradient(0,0,0,0,0,15);l.addColorStop(0,"hsl(200,100%,85%)"),l.addColorStop(1,"hsl(200,100%,50%)"),t.clearRect(0,0,e.width,e.height),t.save(),t.beginPath(),t.strokeStyle="hsl(200,50%,50%)",t.moveTo(10,50),t.lineTo(10,350),t.lineTo(510,350),t.lineTo(510,50),t.closePath(),t.stroke(),t.restore(),p.animationOf({duration:1e3,max:300,call(e,n){i.push({x:.5*n,y:-e}),t.save(),t.translate(10,350),t.strokeStyle="hsl(30,100%,50%)",t.beginPath(),t.clearRect(0,-450,500,49),t.clearRect(0,-300,500,300),t.clearRect(0,1,500,50),t.moveTo(0,0),i.forEach((function(e,n){t.lineTo(e.x,e.y)})),t.stroke(),t.restore(),function(e){t.save(),t.clearRect(520,0,90,400),t.translate(540,350-e),t.fillStyle=l,t.beginPath(),t.arc(0,0,15,0,2*Math.PI,!1),t.fill(),t.restore()}(e)},change:o,end(){n=!1}})},canvas:c({type:"canvas",init:n=>(console.log("初始化1"),e=n,t=e.getContext("2d"),t.lineWidth=2,function(){console.log("销毁1")}),attr:{width:"600",height:"400"}})}}(),ee=H((function(e){return{title:"动画面板",width:r.mve.valueOf(600),height:r.mve.valueOf(450),noResize:!0,hideMax:!0,children:[Q.canvas]}}));function te(e){const t=r.mve.atomValueOf(100),n=r.mve.atomValueOf(200);return[c({type:"button",text:"向上滚动10px",event:{click(){t(t()+10)}}}),c({type:"span",text:()=>"scrollTop"+t()}),c({type:"button",text:"向左滚动10px",event:{click(){n(n()+10)}}}),c({type:"span",text:()=>"scrollLeft"+n()}),c({type:"div",init(e){console.log(e.scrollTop,e.scrollLeft)},style:{overflow:"auto",width:()=>"400px",height:()=>"500px"},prop:{scrollLeft:n,scrollTop:()=>t()},children:[c({type:"div",style:{width:"1000px",height:"900px"},children:[c("演示初始化绑定scrollTop和scrollLeft。父容器需要固定。"),c({type:"a",attr:{href:"https://gitee.com/wy2010344/mve-vite-demo/blob/master/src/desktop/index/初始绑定scrollTop或scrollLeft.ts"},text:"源码地址"})]})]})]}function ne(e,t){let n=0;return function(...o){clearTimeout(n),n=setTimeout((function(){e(...o)}),t)}}function oe(e,t){const n=[];e.firstChild&&n.push(e.firstChild);for(var o=n.pop();o&&!t(o);)o.nextSibling&&n.push(o.nextSibling),o.firstChild&&n.push(o.firstChild),o=n.pop()}function ie(e){const t=window.getSelection(),n={start:0,end:0};return oe(e,(function(e){if(e.nodeType==Node.TEXT_NODE){if(e==t.anchorNode){if(e==t.focusNode)return n.start+=t.anchorOffset,n.end+=t.focusOffset,n.dir=t.anchorOffset<=t.focusOffset?"->":"<-",!0;if(n.start+=t.anchorOffset,n.dir)return!0;n.dir="->"}else if(e==t.focusNode){if(n.end+=t.focusOffset,n.dir)return!0;n.dir="<-"}if(e.nodeType==Node.TEXT_NODE){var o=(e.nodeValue||"").length;"->"!=n.dir&&(n.start+=o),"<-"!=n.dir&&(n.end+=o)}}})),n}function le(e,t){const n=window.getSelection();let o,i,l=0,r=0;const[c,s,a]=function(e){var t=e.dir,n=e.start,o=e.end;return t||(t="->"),n<0&&(n=0),o<0&&(o=0),"<-"==t&&([n,o]=[o,n]),[n,o,t]}(t);let u=0;return oe(e,(function(e){if(e.nodeType!=Node.TEXT_NODE)return;const t=(e.nodeValue||"").length;if(u+t>=c&&(o||(o=e,l=c-u),u+t>=s))return i=e,r=s-u,!0;u+=t})),o||(o=e),i||(i=e),"<-"==a&&([o,l,i,r]=[i,r,o,l]),n.setBaseAndExtent(o,l,i,r),n}function re(e){e.preventDefault()}const ce=(se=navigator.userAgent,ae=se.indexOf("Opera")>-1,ue=se.indexOf("compatible")>-1&&se.indexOf("MSIE")>-1&&!ae,de=se.indexOf("Firefox")>-1,pe=se.indexOf("Safari")>-1,fe=ue?(new RegExp("MSIE (\\d+\\.\\d+);").test(se),{type:"IE",version:parseFloat(RegExp.$1),documentMode:document.documentMode}):de?{type:"FF"}:ae?{type:"Opera"}:pe?{type:"Safari"}:void 0,console.log(fe,navigator.userAgent),fe);var se,ae,ue,de,pe,fe;const he={text:"FF"==ce.type?"true":"plaintext-only"};function ve(e){return!(ke(e)||Ce(e)||s.META(e)||s.CONTROL(e)||s.ALT(e)||s.ARROWDOWN(e)||s.ARROWLEFT(e)||s.ARROWUP(e)||s.ARROWDOWN(e))}function ye(e){const t=window.getSelection().getRangeAt(0),n=document.createRange();return n.selectNodeContents(e),n.setEnd(t.startContainer,t.startOffset),n.toString()}function me(e){const t=window.getSelection().getRangeAt(0),n=document.createRange();return n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),n.toString()}function ge(e,t=0){let n=t;for(;n<e.length&&/[ \t]/.test(e[n]);)n++;return[e.substring(t,n),t,n]}function xe(e){const t=e.lastIndexOf("\n")+1;return ge(e,t)}function be(e,t,n,o){const i=Math.min(o.length,n.length);return i>0&&le(e,{start:t,end:t+i}).deleteFromDocument(),i}function we(e,t,n,o){if(!n)return o;const i=e.innerHTML,l=ie(e),r=t[o];if(r&&r.html==i&&r.pos.start==l.start&&r.pos.end==l.end)return o;t[++o]={html:i,pos:l},t.splice(o+1);return o>300&&(o=300,t.splice(0,1)),o}function Oe(e){return e.metaKey||e.ctrlKey}function ke(e){return Oe(e)&&!e.shiftKey&&s.Z(e)}function Ce(e){return Oe(e)&&e.shiftKey&&s.Z(e)}function Me(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),document.execCommand("insertHTML",!1,e)}function Te(e){e.tab=e.tab||"\t",e.indentOn=e.indentOn||/{$/,e.closePair=e.closePair||["()","[]","{}",'""',"''"];const l={tab:r.mve.valueOrCall(e.tab),indentOn:r.mve.valueOrCall(e.indentOn),spellcheck:r.mve.valueOrCall(e.spellcheck||!1),noClosing:r.mve.valueOrCall(e.noClosing),closePair:r.mve.valueOrCall(e.closePair),content:r.mve.valueOrCall(e.content||"")},a=e.selection||{start:0,end:0};let u;const d=ne((function(){const t=ie(u);e.highlight(u,t),le(u,t)}),30);let p=!1;const f=ne((function(e){ve(e)&&(g=we(u,h,x,g),p=!1)}),300),h=[];let m,g=-1,x=!1;const b={getContent:()=>(null==u?void 0:u.textContent)||"",getSelection:()=>u?ie(u):a,setSelection(e){le(u,e)}};function w(){e.callback&&e.callback(b.getContent())}const O=e.element||{type:"pre"};O.event=O.event||{};const k=O.event;var C,M;return v(k,"keydown",(function(t){return t.push((function(t){if(!t.defaultPrevented){if(m=b.getContent(),s.ENTER(t))!function(e,t,n,o){const i=ye(e),l=me(e),[r]=xe(i);let c=r;if(t.test(i)&&(c+=n),("FF"==ce.type||c.length>0)&&(re(o),Me("\n"+c)),c!=r&&"}"==l[0]){const t=ie(e);Me("\n"+r),le(e,t)}}(u,l.indentOn(),l.tab(),t);else if(s.TAB(t))!function(e,t,n){re(n);const o=window.getSelection().toString();if(o.length>0){const i=ie(e),l=ye(e),[r,c]=xe(l),s=o.split("\n");if(n.shiftKey){const n=l.substr(c)+s[0],[o]=ge(n);let a=be(e,c,o,t),u=c+n.length+1-a;const d=Math.min(r.length,t.length);let p=a,f=1,h=s.length-1;for(;f<h;){const[n]=ge(s[f]),o=be(e,u,n,t);u=u+s[f].length+1-o,p+=o,f++}if(0!=h){const n=me(e),o=s[h]+n.substr(0,n.indexOf("\n")),[i]=ge(o);p+=be(e,u,i,t)}i.start<i.end?(i.start-=d,i.end-=p):(i.end-=d,i.start-=p),le(e,i)}else{le(e,{start:c,end:c}),Me(t);let n=l.length+s[0].length+t.length+1,o=1;for(;o<s.length;)le(e,{start:n,end:n}),Me(t),n=n+s[o].length+t.length+1,o++;i.start<i.end?(i.start=i.start+t.length,i.end=i.end+t.length*s.length):(i.start=i.start+t.length*s.length,i.end=i.end+t.length),le(e,i)}}else if(n.shiftKey){const n=ye(e),[o,i]=xe(n);if(o.length>0){const n=ie(e),l=be(e,i,o,t);n.start-=l,n.end-=l,le(e,n)}}else Me(t)}(u,l.tab(),t);else if(ke(t)){re(t),g--;const e=h[g];e&&(u.innerHTML=e.html,le(u,e.pos)),g<0&&(g=0)}else if(Ce(t)){re(t),g++;const e=h[g];e&&(u.innerHTML=e.html,le(u,e.pos)),g>=h.length&&g--}else e.noClosing||function(e,t,n){const o=ye(e),i=me(e);if("\\"!=o.substr(o.length-1))if(n.find((e=>e[1]==t.key))&&i.substr(0,1)==t.key){const n=ie(e);re(t),n.start=++n.end,le(e,n)}else{const o=n.find((e=>e[0]==t.key));if(o){const n=ie(e);re(t),Me(t.key+o[1]),n.start=++n.end,le(e,n)}}}(u,t,l.closePair());ve(t)&&!p&&(g=we(u,h,x,g),p=!0)}})),t})),v(k,"keyup",(function(e){return e.unshift((function(e){e.defaultPrevented||e.isComposing||(m!=b.getContent()&&d(),f(e),w())})),e})),v(k,"focus",(function(e){return e.push((function(e){x=!0})),e})),v(k,"blur",(function(e){return e.push((function(e){x=!1})),e})),v(k,"paste",(function(t){return t.push((function(t){g=we(u,h,x,g),function(e,t,n){re(n);const o=(n.originalEvent||n).clipboardData.getData("text/plain"),i=ie(e);Me(o),t(e,i),le(e,{start:i.start+o.length,end:i.start+o.length})}(u,e.highlight,t),g=we(u,h,x,g),w()})),t})),y(O,(function(t){return t.push((function(t){u=t,b.setSelection(a),e.highlight(u,b.getSelection()),e.init&&e.init(b)})),t})),O.attr=((e,l)=>{for(var r in l||(l={}))n.call(l,r)&&i(e,r,l[r]);if(t)for(var r of t(l))o.call(l,r)&&i(e,r,l[r]);return e})({contentEditable:(C=e.readonly,M=function(e){return"function"==typeof e?function(){return e()?void 0:he.text}:e?void 0:he.text},M(C)),spellcheck:l.spellcheck},O.attr||{}),O.text=r.mve.delaySetAfter(l.content,(function(t,n){t!=b.getContent()&&(n(t),u&&e.highlight(u,b.getSelection()))})),c(O)}const Ee="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/";function Ae(e){Prism.highlightElement(e)}const Ne=["","coy","dark","funky","okaidia","solarizedlight","tomorrow","twilight"],Re=r.run((function(){const e="prismjs-theme",t=r.mve.valueOf(localStorage.getItem(e)||"");return function(){if(0==arguments.length)return t();{const n=arguments[0];n!=t()&&(t(n),localStorage.setItem(e,n))}}}));const Se={parse:{name:"渲染",type:"div",attr:{},hightlight(e){e.querySelectorAll("pre code").forEach((function(e){Ae(e)}))},render:e=>g(e)},lexed:{name:"语法树",type:"pre",attr:{class:"language-json"},hightlight(e){Ae(e)},render:e=>JSON.stringify(g.lexer(e),null,2)}};function Pe(e){const t=r.mve.atomValueOf(""),n=function(t){return t.height=e.contentHeight()-30-10+"px",t.width=e.contentWidth()/2-10+"px",t.display="flex",t},o=r.mve.valueOf("parse");return[c({type:"div",style:{width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px",display:"flex"},children:[c({type:"div",style:{flex:1,padding:"5px"},children:[c({type:"div",children:[c("切换风格"),c({type:"select",attr:{placeholder:"default"},value:Re,children:Ne.map((e=>c({type:"option",text:e,value:e}))),event:{change(e){Re(e.target.value)}}})]}),c({type:"div",style:m(n),children:[Te({content:"\n# Marked in Node.js\n\nRendered by **marked**.\n\n```js\nvar a=98\nfunction b(){\n}\n```\n\n\n\n",highlight(e,n){Ae(e),t(e.innerText)},element:{type:"pre",style:{resize:"none",flex:1,overflow:"auto"},cls:"language-markdown"}})]})]}),c({type:"div",style:{flex:1,padding:"5px"},children:[c({type:"div",children:Object.entries(Se).map((([e,t])=>c({type:"button",text:t.name,attr:{disabled:()=>o()==e||void 0},event:{click(){o(e)}}})))}),c({type:"div",style:m(n),children:Object.entries(Se).map((([e,n])=>{let i;return c({type:n.type,init(e){i=e,n.hightlight(i)},attr:n.attr,prop:{innerHTML:r.mve.delaySetAfter((function(){return n.render(t())}),(function(e,t){t(e),i&&n.hightlight(i)}))},style:m((function(t){return t.display=e==o()?"":"none",t.flex=1,t.overflow="auto",t}))})}))})]})]})]}function je(e){const t=r.mve.arrayModelOf(["a","b"]);return u(x,null,"我在在工",u(d,{type:"div"},"我是第一行文字"),u(d,{type:"div"},"我是第二行文字"),u(b,{type:"svg"},u(b,{type:"rect",attr:{width:20,height:30},style:{fill:"green"}})),u(d,{type:"div"},"继续写文字 ",9,u(d,{type:"button",event:{click(){t.push(Date.now()+"")}}},"增加"),a(t,(function(e,n,o){return u(d,{type:"div"},u(d,{type:"span"},n," -- ",o()),u(d,{type:"button",event:{click(){t.remove(o())}}},"删除"),u(d,{type:"span",text:o}))}))))}const Fe=H((function(e){return{hideClose:!0,title:"首页",children:[c({type:"button",text:"tictactoe",event:{click(t){e.panel.add(H((function(e){return{title:"tictactoe",left:r.mve.valueOf(t.clientX),top:r.mve.valueOf(t.clientY),children:V(e.panel.me)}})))}}}),c({type:"button",text:"动画效果",event:{click(t){e.panel.add(J)}}}),c({type:"button",text:"初始绑定scrollTop或scrollLeft",event:{click(t){e.panel.add(H((function(e){return{title:"tictactoe",noResize:!0,hideMax:!0,left:r.mve.valueOf(t.clientX),top:r.mve.valueOf(t.clientY),children:te()}})))}}}),c({type:"button",text:"marked示例",event:{click(t){e.panel.add(H((function(e){return{title:"marked示例",width:r.mve.valueOf(800),height:r.mve.valueOf(600),left:r.mve.valueOf(t.clientX),top:r.mve.valueOf(t.clientY),children:Pe(e)}})))}}}),c({type:"button",text:"测试tsx",event:{click(t){e.panel.add(H((function(e){return{title:"测试tsx",width:r.mve.valueOf(800),height:r.mve.valueOf(600),left:r.mve.valueOf(t.clientX),top:r.mve.valueOf(t.clientY),children:je()}})))}}})]}})),qe=r.mve.valueOf(0),ze=r.mve.valueOf(0);function We(){window.innerWidth!=qe()&&qe(window.innerWidth),window.innerHeight!=ze()&&ze(window.innerHeight)}window.addEventListener("resize",We),We();const Ie=l((function(e,t){const n=function(e){const t=r.mve.arrayModelOf([]),n=[];function o(e){for(let t=e;t<n.length;t++)n[t].index(t)}function i(e){const t=n.indexOf(e);t>-1&&(n.push(e),n.splice(t,1),o(t))}function l(e){const o=t.findRow((t=>t.panel==e));if(o)i(o);else{const o=r.mve.valueOf(t.size()),i={panel:e,index:o};n.push(i),t.push(i)}}return{add:l,render:a(t,(function(r,c,s){return c.panel({me:r,remove(){const e=c.index();n.splice(e,1),t.remove(s()),o(e)},add:l,desktop:e,index:c.index,bringToFront(){i(c)}})}))}}({width:qe,height:ze});return n.add(Fe),c({type:"div",init(){},style:{width:"100%",height:"100%",position:"fixed",top:"0",left:"0"},children:n.render})}));const De=w("li");function _e(e,t,n,o){let i;return c({type:"li",cls:De,init:()=>(console.log("初始化",n.content()),function(){console.log("销毁",n.content())}),children:[c({type:"input",init(e){i=e},attr:{type:"checkbox"},prop:{checked:n.complete},event:{change(e){n.complete(i.checked)}}}),c({type:"span",style:{"text-decoration":()=>n.complete()?"line-through":""},text:n.content}),c({type:"a",text:"x",attr:{href:"javascript:void(0)"},event:{click(){e.remove(o())}}})]})}function Le(e){return O(e,(function(t,n,o){return _e(e,0,n,o)}))}function Xe(e){return a(e,(function(t,n,o){return _e(e,0,n,o)}))}function $e(e,t,n){const o=r.mve.valueOf(!1),i=r.mve.arrayModelOf([]);return c({type:"li",children:[c({type:"button",text:()=>o()?"-":"+",event:{click(){o(!o())}}}),c({type:"input"}),c({type:"button",text:"追加子节点",event:{click(){o(!0),i.push({})}}}),c({type:"ul",style:{display:()=>o()?"":"none"},children:a(i,$e)})]})}function He(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[o,i,l]=t[n];if(e[o]&&e[o]===e[i]&&e[o]===e[l])return e[o]}return null}function Ye(e){function t(t){return function(e){return c({type:"button",cls:"square",event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)}})}return c({type:"div",children:[c({type:"div",cls:"board-row",children:[t(0),t(1),t(2)]}),c({type:"div",cls:"board-row",children:[t(3),t(4),t(5)]}),c({type:"div",cls:"board-row",children:[t(6),t(7),t(8)]})]})}function Be(e){function t(t){return function(e){return c({type:"button",cls:"square",style:{background:e.background},event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)},background:()=>e.point()==t?"gray":""})}return c({type:"div",children:[c({type:"div",cls:"board-row",children:[t(0),t(1),t(2)]}),c({type:"div",cls:"board-row",children:[t(3),t(4),t(5)]}),c({type:"div",cls:"board-row",children:[t(6),t(7),t(8)]})]})}function Ve(e,t){return c({type:"li",children:[c(e),c({type:"ul",children:t})]})}function Ke(e,t){return c({type:"li",children:[c(e+"："),Ue(t)]})}function Ue(e){return c({type:"a",text:e,attr:{href:e}})}const Ge=["asc","desc","none"];function Ze(e){let t,n;return[c({type:"input",init(e){t=e}}),c({type:"select",init(e){n=e},children:Ge.map((e=>c({type:"option",text:e,value:e})))}),c({type:"button",text:"开始搜索",event:{click(){const o=Date.now(),i=t.value,l=n.value;console.log(i,l),e(i,l),console.log("消耗时间",Date.now()-o)}}})]}const Je=[];for(let yt=0;yt<300;yt++)Je.push(Math.floor(1e4*Math.random()));function Qe(e){return function(t){const n=r.mve.arrayModelOf(Je.map(((e,t)=>({index:t,show:r.mve.valueOf(!0),order:r.mve.valueOf(0),value:e})))),o=r.mve.valueOf("");return c({type:"div",children:[Ze((function(t,o){e(t,o,n)})),c({type:"input",attr:{placeholder:"transition如 all 1s"},event:{change(e){const t=e.target.value;o(t)}}}),c({type:"div",style:{display:"flex","flex-direction":"column","font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:a(n,(function(e,t,n){return c({type:"div",style:{display:()=>t.show()?"flex":"none","justify-content":"space-around",order:t.order,transition:o},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:t.value})]})}))})]})}}function et(e,t,n){for(let o=0;o<e.length;o++)if(n(t.value,e[o].value))return e.splice(o,0,t);e.push(t)}function tt(e,t){return e<t}function nt(e,t){return e>t}const ot=Qe((function(e,t,n){const o=[];n.forEach((n=>{(n.value+"").startsWith(e)?(n.show(!0),"none"==t?n.order(0):et(o,n,"asc"==t?tt:nt)):n.show(!1)})),o.forEach(((e,t)=>e.order(t)))}));function it(e,t,n,o,i){const l=r.mve.valueOf(!1),s=r.mve.arrayModelOf([]);function u(){return i()&&l()}return[c({type:"tr",style:{display:()=>i()?"":"none"},children:[c({type:"td",children:[c({type:"button",style:{width:"25px","margin-left":20*o+"px",visibility:()=>0==s.size()?"hidden":""},text:()=>l()?"-":"+",event:{click(){l(!l())}}}),c({type:"span",text:()=>"第"+(o+1)+"层"+(n()+1)+"元素"})]}),c({type:"td",text:"第二列"}),c({type:"td",children:[c({type:"button",text:"追加1",event:{click(){l(!0),s.push({})}}})]}),c({type:"td",children:[c({type:"button",text:"前加1",event:{click(){l(!0),s.unshift({})}}})]})]}),a(s,(function(e,t,n){return it(e,t,n,o+1,u)}))]}function lt(e){const t=r.mve.arrayModelOf([{},{},{}]);return c({type:"div",children:[c({type:"table",attr:{border:1},children:a(t,(function(e,t,n){return it(0,0,n,0,(()=>!0))}))})]})}function rt(e,t){for(let n=e;n<t.size();n++)if(t.get(n).show())return n;return-1}function ct(e,t){let n=rt(0,t);for(let o=0;o<e.length;o++){const i=e[o];if(t.get(n)==i)n++;else{const e=t.indexOf(i,n);if(e<n&&console.log("不应该出现的错误"),t.move(e,n),n=rt(n+1,t),n<0)return void console.log("不应该出现的错误")}}}const st=Qe((function(e,t,n){const o=n.filter((t=>(t.value+"").startsWith(e)?(t.show(!0),!0):(t.show(!1),!1)));"asc"==t?(o.sort((function(e,t){return e.value-t.value})),ct(o,n)):"desc"==t&&(o.sort((function(e,t){return t.value-e.value})),ct(o,n)),console.log("执行完成")}));function at(e,...t){return c({type:"a",attr:{href:e.link?e.href:"#"+e.href,target:e.link?"_blank":null},children:T(e.children,t)})}function ut(e,t=1){return c({type:"ul",children:e.map((e=>c({type:"li",children:[c({type:"h"+t,children:M(e.title)}),c({type:"span",children:M(e.summary||"")}),ut(e.children||[],t+1)]})))})}const dt=l((function(e,t){return C(e,t,{index:pt,desktop:Ie,simpleAdd:l((function(e,t){return function(e){const t=r.mve.valueOf(0);return c({type:"button",init:()=>(console.log("初始化"),function(){console.log("销毁")}),text:()=>t()+"",event:{click(){t(t()+1)}}})}()})),simpleTodo:l((function(e,t){return function(e){const t=r.mve.arrayModelOf([{content:r.mve.valueOf("ddd"),complete:r.mve.valueOf(!1)},{content:r.mve.valueOf("aaa"),complete:r.mve.valueOf(!0)},{content:r.mve.valueOf("ccc"),complete:r.mve.valueOf(!1)}]);let n;return[c({type:"input",init(e){n=e}}),c({type:"button",text:"添加",event:{click(){const e=n.value.trim();e?(t.unshift({content:r.mve.valueOf(e),complete:r.mve.valueOf(!1)}),n.value=""):alert("请输入内容")}}}),c({type:"style",text:`\n.${De}{\ndisplay:flex;\njustify-content:space-between;\n}\n\t\t\t`}),c({type:"ul",children:[c({type:"li",text:"前面一条"}),Xe(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试局部反转"}),c({type:"ul",children:[c({type:"li",text:"前面一条"}),Le(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试全局反转"}),c({type:"ul",childrenReverse:!0,children:[c({type:"li",text:"前面一条"}),Xe(t),c({type:"li",text:"后面一条"})]}),c({type:"hr"}),c({type:"h2",text:"测试交替"}),c({type:"ul",childrenReverse:!0,children:[c({type:"li",text:"前面一条"}),Xe(t),c({type:"li",text:"中间一条"}),Le(t),c({type:"li",text:"后面一条"})]})]}()})),todo:l((function(e,t){return function(e){const t=r.mve.arrayModelOf([]);let n;return[c({type:"input",init(e){n=e}}),c({type:"button",text:"添加",event:{click(){const e=n.value.trim();e?(t.unshift({content:r.mve.valueOf(e),finish:r.mve.valueOf(!1)}),n.value=""):alert("请输入内容")}}}),c({type:"table",childrenReverse:!0,children:a(t,(function(e,n,o){return c({type:"tr",children:[c({type:"td",children:[c({type:"input",attr:{type:"checkbox"},prop:{checked:n.finish},event:{change(e){const t=e.target;n.finish(t.checked)}}})]}),c({type:"td",children:[c({type:"input",value:n.content,event:{change(e){const t=e.target,o=t.value.trim();o?n.content(o):t.value=n.content()}}})]}),c({type:"td",children:[c({type:"a",text:"删除",attr:{href:"javascript:void(0)"},event:{click(){t.remove(o())}}})]})]})}))})]}()})),tree:l((function(e,t){return function(e){const t=r.mve.arrayModelOf([]);return[c("tree"),c({type:"button",text:"追加根节点",event:{click(){t.push({})}}}),c({type:"ul",children:a(t,$e)})]}()})),todoMVC:N,ask:S,tic_tac_toe:l((function(e){return function(e){const t=r.mve.arrayModelOf([{squares:Array(9).fill(null),xIsNext:!0}]),n=r.mve.valueOf(0);return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[Ye({square:()=>t.get(n()).squares,click(e){const o=n()+1;for(;t.size()>o;)t.pop();const i=t.get(n()),l=i.squares.slice();He(l)||l[e]||(l[e]=i.xIsNext?"X":"O",t.push({squares:l,xIsNext:!i.xIsNext}),n(n()+1))}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n()),o=He(e.squares);return o?`Winner: ${o}`:"Next player: "+(e.xIsNext?"X":"O")}}),c({type:"ol",children:a(t,(function(e,t,o){return c({type:"li",children:[c({type:"button",text:()=>o()?`Go to move #${o()}`:"Go to game start",event:{click(){n(o())}}})]})}))})]})]})}()})),tic_tac_toe_simplify:l((function(e){return function(e){const t=r.mve.arrayModelOf([{squares:Array(9).fill(null),xIsNext:!0,point:-1}]),n=r.mve.valueOf(0);return c({type:"div",cls:"game-tic-tac-toe",children:[c({type:"div",cls:"game-board",children:[Be({point:()=>t.get(n()).point,square:()=>t.get(n()).squares,click(e){const o=n()+1;for(;t.size()>o;)t.pop();const i=t.get(n()),l=i.squares.slice();if(i.winner||l[e])return;l[e]=i.xIsNext?"X":"O";const r=function(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[o,i,l]=t[n];if(e[o]&&e[o]===e[i]&&e[o]===e[l])return e[o]}return null}(l)||(9==t.size()?"FAIR":null);t.push({squares:l,xIsNext:!i.xIsNext,point:e,winner:r}),n(n()+1)}})]}),c({type:"div",cls:"game-info",children:[c({type:"div",text(){const e=t.get(n()),o=e.winner;return o?`Winner: ${o}`:"Next player: "+(e.xIsNext?"X":"O")}}),c({type:"ol",children:a(t,(function(e,t,o){return c({type:"li",children:[c({type:"button",style:{color:()=>o()==n()?"blue":""},text:()=>o()?`Go to move #${o()}`:"Go to game start",event:{click(){n(o())}}})]})}))})]})]})}()})),tic_tac_toe_my_style:l((function(e){return V()})),sortAndFilterFlexOrder:l((function(e){return ot(e)})),sortAndFilterMove:l((function(e){return st(e)})),sortAndFilterFilterChildren:l((function(e){return function(e){const t=r.mve.valueOf(Je.map(((e,t)=>({index:t,value:e})))),n=r.mve.valueOf({filter:"",sort:"none"});return c({type:"div",children:[Ze((function(e,t){n({filter:e,sort:t})})),c({type:"div",style:{"font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:f((function(){const e=n(),o=t().filter((t=>(t.value+"").startsWith(e.filter)));return"none"==e.sort?o:"asc"==e.sort?o.sort((function(e,t){return e.value-t.value})):"desc"==e.sort?o.sort((function(e,t){return t.value-e.value})):void 0}),(function(e,t,n){return c({type:"div",style:{display:"flex","justify-content":"space-around"},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:t.value})]})}))})]})}()})),sortAndFilterFilterCacheChildren:l((function(e){return function(e){const t=r.mve.valueOf(Je.map(((e,t)=>({index:t,value:e})))),n=r.mve.valueOf({filter:"",sort:"none"});return c({type:"div",children:[Ze((function(e,t){n({filter:e,sort:t})})),c({type:"div",style:{"font-family":"Monaco","letter-spacing":"2px","text-align":"right"},children:k((function(){const e=n(),o=t().filter((t=>(t.value+"").startsWith(e.filter)));return"none"==e.sort?o:"asc"==e.sort?o.sort((function(e,t){return e.value-t.value})):"desc"==e.sort?o.sort((function(e,t){return t.value-e.value})):void 0}),(function(e,t,n){return c({type:"div",style:{display:"flex","justify-content":"space-around"},children:[c({type:"span",style:{flex:1},text:n}),c({type:"span",style:{flex:1},text:"随机数据"}),c({type:"span",style:{flex:1},text:()=>t().value})]})}))})]})}()})),sameRootTree:l(lt)})}))([]),pt=l((function(e,t){return c({type:"div",children:[ut([{title:u(at,{href:dt.href("desktop",{})},"桌面系统"),summary:u(x,null,"一个桌面、窗口组件系统示例")},{title:u(at,{href:"https://wy2010344.gitee.io/vite-vue-ant-design-learn/",link:!0},"vue3+ant-design-vue+tsx的后台管理网站"),summary:u(x,null,"跟随github项目实现，移除对covue和covue-lib的依赖。待补全")},{title:u(at,{href:"https://gitee.com/wy2010344/article",link:!0},"个人文章收集"),summary:u(x,null,"一些个人文章，不一定完成")},{title:u(at,{href:dt.href("sameRootTree",{})},"同级表格树"),summary:u(x,null,"使用Table来完成的树结构，数据结构是树，在DOM上是表格")},{title:u(at,{href:dt.href("todo",{})},"一个简单的todo"),summary:u(x,null,"配合文章的示例《",u(at,{href:"https://juejin.cn/post/7003976837860704287",link:!0},"mve：从一个简单的todo开始——使用vite"),"》")},{title:u(at,{href:dt.href("simpleTodo",{})},"一个测试的todo"),summary:u(x,null,"以前写的一个todo，测试modelChildrenReverse和childrenReverse")},{title:u(at,{href:dt.href("todoMVC/all",{})},"todoMVC"),summary:u(x,null,"tastejs的todomvc。tastejs的todomvc是一个帮助你选择前端框架的方案示例",u(d,{type:"br"}),u(at,{href:"https://todomvc.com/",link:!0},"https://todomvc.com/")),children:[{title:u(at,{href:dt.href("ask/all",{})},"todoMVC"),summary:u(x,null,"其实跟上面一样，只是路由模块化，使在不同路由下")}]},{title:u(at,{href:dt.href("tic_tac_toe",{})},"井字棋tic-tac-toe"),summary:u(x,null,"react教程《",u(at,{href:"https://react.docschina.org/tutorial/tutorial.html",link:!0},"入门教程: 认识 React"),"》在mve下的实现"),children:[{title:u(at,{href:dt.href("tic_tac_toe_simplify",{})},"简化思路")},{title:u(at,{href:dt.href("tic_tac_toe_my_style",{})},"undo-redo思路"),summary:u(x,null,"不是很赞成react每次全局副本，难道用户每次点击数据库就要全量备份一次？历史记录应该记录操作栈，进而可以undo-redo")}]},{title:"mve-过滤排序解决方案",children:[{title:u(at,{href:dt.href("sortAndFilterFlexOrder",{})},"modelChildren+flex+order方案"),summary:u(x,null,"仍然用ArrayModel+modelChildren复用DOM元素，巧妙地使用flex的order来作排序")},{title:u(at,{href:dt.href("sortAndFilterMove",{})},"modelChildren+move方案"),summary:u(x,null,"使用ArrayModel+modelChildren复用DOM元素，但使用ArrayModel::move来调整顺序")},{title:u(at,{href:dt.href("sortAndFilterFilterChildren",{})},"filterChildren方案"),summary:u(x,null,"使用filterChildren观察生成的列表，每次重新生成，无法复用DOM元素")},{title:u(at,{href:dt.href("sortAndFilterFilterCacheChildren",{})},"filterCacheChildren方案"),summary:u(x,null,"使用filterCacheChildren观察生成列表，就地复用DOM元素")}]}]),c({type:"hr"}),c({type:"div",children:[c({type:"div",text:"欢迎使用小议的mve。它包含mve-core与mve-dom两部分，前一部分与dom无关，可自定义其它引擎，后一部分是mve-core在dom上的简单桥接。"}),c({type:"h3",text:"git地址"}),c({type:"ul",children:[Ke("当前项目源码地址","https://gitee.com/wy2010344/mve-vite-demo.git"),Ke("当前项目源码演示地址","https://wy2010344.gitee.io/mve-vite-demo/"),Ke("文章包地址","https://gitee.com/wy2010344/article.git"),Ve("mve-core",[Ke("gitee","https://gitee.com/wy2010344/npm_mve.git"),Ke("github","https://github.com/wy2010344/npm_mve.git")]),Ve("mve-dom",[Ke("gitee","https://gitee.com/wy2010344/npm_mve-DOM.git"),Ke("github","https://github.com/wy2010344/npm_mve-DOM.git")])]}),c({type:"h3",text:"特点"}),c({type:"ul",children:["过程式（函数式）基因，比react更早。作者避免在ts/js中使用class/this等概念。","无组件概念，完全使用编程语言本身的模块(函数)复用。","基础模型只有mve.Value<T>和mve.ArrayModel<T>，构建出庞大的页面逻辑。","界面布局使用纯ts/js，不引入复杂的xml，更高效地复用。","mvvm对属性节点针对性更新(受vue启发)，性能高。并创新地发现使用mve.ArrayModel<T>与界面片段一一对应(支持同级嵌套)，不使用虚拟DOM与任何形式的享元复用，和异步更新。","区分与DOM引擎无关的核心模块，可用于其它自定义引擎。并提供简单的dom桥接模块。","开放可定制自己的mve使用方式。"].map((e=>c({type:"li",text:e})))}),c({type:"div",style:{"text-align":"center"},children:[c("创作不易，如果给你带来帮助，欢迎给作者打赏。"),c({type:"h4",text:"微信"}),c({type:"img",attr:{src:"https://wy2010344.gitee.io/article/%E5%BE%AE%E4%BF%A1%E6%94%B6%E6%AC%BE%E7%A0%81-small.png"}}),c({type:"h4",text:"支付宝"}),c({type:"img",attr:{src:"https://wy2010344.gitee.io/article/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%B6%E6%AC%BE%E7%A0%81-small.png"}})]})]})]})})),ft=w("topArea"),ht=c.root((function(e){return{type:"div",children:[[c({type:"link",attr:{href(){const e=Re();return`${Ee}themes/prism${""==e?"":`-${e}`}.css`},rel:"stylesheet"}}),c({type:"script",attr:{src:`${Ee}components/prism-core.min.js`}}),c({type:"script",attr:{src:`${Ee}plugins/autoloader/prism-autoloader.min.js`}})],c({type:"style",text:`\n\t\t\t\t.${ft}{\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\ttop:0;\n\t\t\t\t\tleft:0;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight:100%\n\t\t\t\t}\n\t\t\t\t`}),dt.render(e)]}}));E(dt),document.body.appendChild(ht.element);const vt=r.orRun(ht.init);vt&&window.addEventListener("unload",vt);
