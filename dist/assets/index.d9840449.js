var e=Object.defineProperty,t=("undefined"!=typeof require&&require,(t,n,o)=>(((t,n,o)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o})(t,"symbol"!=typeof n?n+"":n,o),o));import{u as n,m as o,d as i,k as r,c}from"./vendor.d6392f71.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class l{constructor(e,o){t(this,"param",n.mve.valueOf({path:[],query:{}})),this.parentPath=e,this.fun=o}current(){return this.param().path[0]}render(e){return this.fun(e,this)}go(e,t){location.hash=this.parentPath.concat(e).join("/")+function(e){if(e){const t=[];if(Object.entries(e).forEach((function([e,n]){if(n instanceof Array)for(const o of n)t.push(`${e}=${o}`);else t.push(`${e}=${n}`)})),t.length>0)return"?"+t.join("&")}return""}(t)}}function s(e){return function(t){return new l(t,e)}}const d=s((function(e,t){return i({type:"div",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"},children:[i({type:"div",text:"404"}),i({type:"div",text:()=>t.param().path.join("/")}),i({type:"div",text:()=>JSON.stringify(t.param().query)})]})}));const u={all:null,active:{b:"2"},complete:{c:"3"}},p=s((function(e,t){let c;const l=n.mve.valueOf(null),s=n.mve.arrayModelOf([]);function d(){return t.current()||"all"}return e.WatchAfter((function(){const e=d();return s.filter((t=>"all"==e||("active"==e?!t.completed():"complete"==e?t.completed():void 0)))}),(function(e){s.forEach((e=>e.show(!1)));for(const t of e)t.show(!0)})),i({type:"div",cls:"todo-app-main",children:[i({type:"div",cls:"todo-app-body",children:[i({type:"section",cls:"todoapp",children:[i({type:"header",cls:"header",children:[i({type:"h1",text:"todos"}),i({type:"input",cls:"new-todo",attr:{autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"},init(e){c=e},event:{keydown(e){if(r.ENTER(e)){const e=c.value.trim();e&&(s.push({show:n.mve.valueOf(!0),title:n.mve.valueOf(e),completed:n.mve.valueOf(!1)}),c.value="")}}}})]}),i({type:"section",cls:"main",children:[i({type:"input",id:"toggle-all",cls:"toggle-all",attr:{type:"checkbox"},event:{click(e){s.forEach((t=>{t.completed(e.target.checked)}))}}}),i({type:"label",attr:{for:"toggle-all"},text:"Mark all as complete"}),i({type:"ul",cls:"todo-list",children:o(s,(function(e,t,n){let o,c;function d(){t.title(c.value.trim()),l(null)}return i({type:"li",cls(){const e=["todo"];return t.completed()&&e.push("completed"),t==l()&&e.push("editing"),e.join(" ")},style:{display:()=>t.show()?"":"none"},children:[i({type:"div",cls:"view",children:[i({type:"input",cls:"toggle",attr:{type:"checkbox"},init(e){o=e},prop:{checked:t.completed},event:{change(){t.completed(o.checked)}}}),i({type:"label",text:t.title,event:{dblclick(){l(t),c.focus()}}}),i({type:"button",cls:"destroy",event:{click(){s.remove(n())}}})]}),i({type:"input",cls:"edit",init(e){c=e},attr:{type:"text","todo-focus":()=>t==l()},value:t.title,event:{blur:d,keyup(e){r.ENTER(e)?d():"Escape"==e.key&&(l(null),c.value=t.title()),console.log(e)}}})]})}))})]}),i({type:"footer",cls:"footer",children:[i({type:"span",cls:"todo-count",children:[i({type:"strong",text:()=>s.filter((e=>!e.completed())).length}),i({type:"span",text:" items left"})]}),i({type:"ul",cls:"filters",children:Object.entries(u).map((([e,n])=>[i({type:"li",children:[i({type:"a",cls:()=>d()==e?"selected":"",attr:{href:"javascript:void(0)"},text:e,event:{click(){t.go(e,n)}}})]})]))}),i({type:"button",cls:"clear-completed",text:"Clear completed",style:{display:()=>s.filter((e=>e.completed())).length>0?"":"none"},event:{click(){s.removeWhere((e=>e.completed()))}}})]})]}),i({type:"fotter",cls:"info",children:[i({type:"p",text:"Double-click to edit a todo"}),i({type:"p",text:"written by wy2010344"}),i({type:"p",text:"Part of TodoMVC"})]})]})]})}));function a(e){function t(t){return function(n){n=n||window.event,e.resize(n,t)}}const n=e.allow,o=n?function(){return n()?"":"none"}:"";return[i({type:"div",style:{display:o,width:"100%",height:"7px",position:"absolute",top:"-3px",left:"0",cursor:"n-resize"},event:{mousedown:t({t:!0})}}),i({type:"div",style:{display:o,width:"7px",height:"100%",position:"absolute",right:"-3px",top:"0",cursor:"e-resize"},event:{mousedown:t({r:!0})}}),i({type:"div",style:{display:o,width:"7px",height:"100%",position:"absolute",left:"-3px",top:"0",cursor:"w-resize"},event:{mousedown:t({l:!0})}}),i({type:"div",style:{display:o,width:"100%",height:"7px",position:"absolute",bottom:"-3px",left:"0",cursor:"s-resize"},event:{mousedown:t({b:!0})}}),i({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",top:"-7px",left:"-7px",cursor:"nw-resize"},event:{mousedown:t({t:!0,l:!0})}}),i({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",top:"-7px",right:"-7px",cursor:"ne-resize"},event:{mousedown:t({t:!0,r:!0})}}),i({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",bottom:"-7px",left:"-7px",cursor:"sw-resize"},event:{mousedown:t({b:!0,l:!0})}}),i({type:"div",style:{display:o,width:"15px",height:"15px",position:"absolute",bottom:"-7px",right:"-7px",cursor:"se-resize"},event:{mousedown:t({b:!0,r:!0})}})]}function f(){document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none",document.body.style.mozUserSelect="none",document.body.style["user-select"]="none"}function h(){document.body.style.webkitUserSelect="",document.body.style.msUserSelect="",document.body.style.mozUserSelect="",document.body.style["user-select"]=""}function v(e,t,n){return e?t.clientX-n.clientX:t.clientY-n.clientY}function y(e){let t=!1;function n(n){t&&e.move(n)}function o(t){h(),e.up&&(t=t||window.event,e.up(t)),c()}function i(t){h(),e.leave&&(t=t||window.event,e.leave(t)),c()}let r=e.border;function c(){t=!1,w(r,"mousemove",n),w(r,"mouseup",o),w(r,"mouseleave",i)}return function(c){f(),c=c||window.event,r||(r=c.target),e.down&&e.down(c),t=!0,g(r,"mousemove",n),g(r,"mouseup",o),g(r,"mouseleave",i)}}function m(e){let t;const n=e.allow||function(){return!0},o=[];function i(t){t=t||window.event,e.cancel&&e.cancel(t),b(t),k(t)}return e.diff&&o.push((function(t,n,o){e.diff({x:t,y:n,e:o})})),e.diffX&&o.push((function(t,n){0!=t&&e.diffX(t)})),e.diffY&&o.push((function(t,n){0!=n&&e.diffY(n)})),y({border:e.border||document,down(n){n=n||window.event,t=n,e.init&&e.init(n),b(n),k(n)},move(e){if(n()){const n=(e=e||window.event).clientX-t.clientX,i=e.clientY-t.clientY;for(let t of o)t(n,i,e);t=e,b(e),k(e)}},up:i,leave:i})}function x(e){let t=null;const n=e.allow||function(){return!0},o={cancel(e){t=null,h(),w(i,"mousemove",o.move),w(i,"mouseup",o.cancel),w(i,"mouseleave",o.cancel)},move(o){if(n()){const n=t.event;o=o||window.event,t.event=o;const i=v(!0,o,n),r=v(!1,o,n);0!=i&&(t.dir.l&&(e.addLeft(i),e.addWidth(-i)),t.dir.r&&e.addWidth(i)),0!=r&&(t.dir.t&&(e.addTop(r),e.addHeight(-r)),t.dir.b&&e.addHeight(r))}}},i=e.border||document;return function(e,n){f(),t={event:e,dir:n},g(i,"mousemove",o.move),g(i,"mouseup",o.cancel),g(i,"mouseleave",o.cancel)}}function g(e,t,n){e.addEventListener(t,n)}function w(e,t,n){e.removeEventListener(t,n)}function b(e){e.preventDefault()}function k(e){e.stopPropagation()}function O(e){const t=n.mve.valueOrCall(e.hideClose),o=n.mve.valueOrCall(e.hideMax);return i({type:"div",style:{"background-image":"linear-gradient(180deg, #e6e6e6, #bab9ba)",cursor:"move","border-radius":"5px 5px 0 0","white-space":"nowrap",height:e.height-1+"px","line-height":e.height-1+"px","border-bottom":"1px solid #696969",display:"flex","align-items":"center"},event:{mousedown(t){e.move(t||window.event)}},children:[i({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"#1600ff","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#e4e0df",display:()=>t()?"none":"inline-block"},text:"X",event:{mousedown(e){e.stopPropagation()},click:e.closeClick}}),i({type:"div",style:{width:"20px",height:"20px",cursor:"pointer",backgroundColor:"green","border-radius":"5px","margin-left":"5px","text-align":"center","line-height":"20px",color:"#f2ff2f",display:()=>o()?"none":"inline-block"},text:()=>e.max()?"o":"O",event:{mousedown(e){e.stopPropagation(e)},click(){e.max(!e.max())}}}),i({type:"div",style:{"font-weight":"bold","text-indent"(){let e=0;return t()&&(e-=20),o()&&(e-=20),e+"px"},"font-size":"15px","text-align":"center",display:"inline",margin:"0 5px",color:"#645d61",flex:1,overflow:"hidden","text-overflow":"ellipsis"},text:e.title})]})}function j(e){return function(t){function o(){return l()?t.desktop.width():u()}function r(){return l()?t.desktop.height():p()}const c=e({panel:t,contentHeight:()=>r()-30,contentWidth:o}),l=c.max||n.mve.valueOf(!1),s=c.top||n.mve.valueOf(0),d=c.left||n.mve.valueOf(0),u=c.width||n.mve.valueOf(400),p=c.height||n.mve.valueOf(600);return i({type:"div",event:{mousedown:{capture:!0,handler:t.bringToFront}},style:{background:"white","border-radius":"5px",position:"absolute","z-index":()=>t.index()+"","box-shadow":"rgb(102, 102, 102) 0px 0px 20px 5px",top:()=>l()?"0px":s()+"px",left:()=>l()?"0px":d()+"px",width:()=>o()+"px",height:()=>r()+"px"},children:[O({title:c.title,height:30,move:m({diffX(e){d(d()+e)},diffY(e){s(s()+e)}}),hideClose:c.hideClose,max:l,hideMax:c.hideMax,closeClick:t.remove}),c.children,a({resize:x({addHeight(e){p(p()+e)},addLeft(e){d(d()+e)},addTop(e){s(s()+e)},addWidth(e){u(u()+e)}})})]})}}const M=j((function(e){return{children:[i({type:"div",style:{overflow:"auto",width:()=>e.contentWidth()+"px",height:()=>e.contentHeight()+"px"},children:[i({type:"div",text:"中在",style:{width:"800px",height:"900px"}})]})]}})),q=j((function(e){return{hideClose:!0,title:"首页",children:[i({type:"button",text:"首页",event:{click(){e.panel.add(M)}}})]}})),z=n.mve.valueOf(0),C=n.mve.valueOf(0);function E(){window.innerWidth!=z()&&z(window.innerWidth),window.innerHeight!=C()&&C(window.innerHeight)}window.addEventListener("resize",E),E();const N=s((function(e,t){const r=function(e){const t=n.mve.arrayModelOf([]),i=[];function r(e){const o={panel:e,index:n.mve.valueOf(i.length)};t.push(o),i.push(o)}return{add:r,render:o(t,(function(n,o,c){return o.panel({me:n,remove(){t.remove(c())},add:r,desktop:e,index:o.index,bringToFront(){const e=i.indexOf(o);if(e<i.length-1){i.push(o),i.splice(e,1);for(let t=e;t<i.length;t++)i[t].index(t)}}})}))}}({width:z,height:C});return r.add(q),i({type:"div",init(){},style:{width:"100%",height:"100%",position:"fixed",top:"0",left:"0"},children:r.render})}));const W=c("li");function L(e,t,r){const c=n.mve.valueOf(!1),l=n.mve.arrayModelOf([]);return i({type:"li",children:[i({type:"button",text:()=>c()?"-":"+",event:{click(){c(!c())}}}),i({type:"input"}),i({type:"button",text:"追加子节点",event:{click(){c(!0),l.push({})}}}),i({type:"ul",style:{display:()=>c()?"":"none"},children:o(l,L)})]})}function P(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[o,i,r]=t[n];if(e[o]&&e[o]===e[i]&&e[o]===e[r])return e[o]}return null}function X(e){function t(t){return function(e){return i({type:"button",cls:"square",event:{click:e.click},text:e.value})}({value:()=>e.square()[t],click(){e.click(t)}})}return i({type:"div",children:[i({type:"div",cls:"board-row",children:[t(0),t(1),t(2)]}),i({type:"div",cls:"board-row",children:[t(3),t(4),t(5)]}),i({type:"div",cls:"board-row",children:[t(6),t(7),t(8)]})]})}const S=s((function(e,t){return i({type:"ul",children:[T("首页",(function(){$.go("index",{})})),T("桌面系统",(function(){$.go("desktop",{})})),T("todoMVC",(function(){$.go("todoMVC/all",{})})),T("active",(function(){$.go("todoMVC/active",{b:"2"})}),"\n\t\t\ttastejs的todomvc\n\t\t\thttps://todomvc.com/\n\t\t\t"),T("tic-tac-toe",(function(){$.go("tic_tac_toe",{})}),"\n\t\t\t仿react的tic-tac-toe\n\t\t\t")]})}));function T(e,t,n){return i({type:"li",children:[i({type:"a",attr:{href:"javascript:void(0)"},text:e,event:{click:t}}),i(n||"")]})}const $=s((function(e,t){return function(e,t,i){const r={};Object.entries(i).forEach((function([e,n]){const o=n;r[e]=o(t.parentPath.concat(e))}));const c=d(t.parentPath.concat("404")),l=n.mve.arrayModelOf([]);function s(){l.size()>0&&l.remove(0)}return e.WatchAfter((function(){return t.param()}),(function(e){if(e){const{path:[t,...n],query:o}=e,i=l.get(0);if(t){const e=r[t]||c;i==e?i.param({path:n,query:o}):(l.remove(0),l.push(e),e.param({path:n,query:o}))}else s()}else s()})),o(l,(function(e,t,n){return t.render(e)}))}(e,t,{index:S,desktop:N,simpleAdd:s((function(e,t){return function(e){const t=n.mve.valueOf(0);return i({type:"button",init(){console.log("初始化")},destroy(){console.log("销毁")},text:()=>t()+"",event:{click(){t(t()+1)}}})}()})),simpleTodo:s((function(e,t){return function(e){const t=n.mve.arrayModelOf([]);let r;return[i({type:"input",init(e){r=e}}),i({type:"button",text:"添加",event:{click(){const e=r.value.trim();e?(t.unshift({content:n.mve.valueOf(e),complete:n.mve.valueOf(!1)}),r.value=""):alert("请输入内容")}}}),i({type:"style",text:`\n.${W}{\ndisplay:flex;\njustify-content:space-between;\n}\n\t\t\t`}),i({type:"ul",children:o(t,(function(e,n,o){let r;return i({type:"li",cls:W,children:[i({type:"input",init(e){r=e},attr:{type:"checkbox"},prop:{checked:n.complete},event:{change(e){n.complete(r.checked)}}}),i({type:"span",style:{"text-decoration":()=>n.complete()?"line-through":""},text:n.content}),i({type:"a",text:"x",attr:{href:"javascript:void(0)"},event:{click(){t.remove(o())}}})]})}))})]}()})),todo:s((function(e,t){return function(e){const t=n.mve.arrayModelOf([]);let r;return[i({type:"input",init(e){r=e}}),i({type:"button",text:"添加",event:{click(){const e=r.value.trim();e?(t.unshift({content:n.mve.valueOf(e),finish:n.mve.valueOf(!1)}),r.value=""):alert("请输入内容")}}}),i({type:"table",childrenReverse:!0,children:o(t,(function(e,n,o){return i({type:"tr",children:[i({type:"td",children:[i({type:"input",attr:{type:"checkbox"},prop:{checked:n.finish},event:{change(e){const t=e.target;n.finish(t.checked)}}})]}),i({type:"td",children:[i({type:"input",value:n.content,event:{change(e){const t=e.target,o=t.value.trim();o?n.content(o):t.value=n.content()}}})]}),i({type:"td",children:[i({type:"a",text:"删除",attr:{href:"javascript:void(0)"},event:{click(){t.remove(o())}}})]})]})}))})]}()})),tree:s((function(e,t){return function(e){const t=n.mve.arrayModelOf([]);return[i("tree"),i({type:"button",text:"追加根节点",event:{click(){t.push({})}}}),i({type:"ul",children:o(t,L)})]}()})),todoMVC:p,ask:p,tic_tac_toe:s((function(e){return function(e){const t=n.mve.arrayModelOf([{squares:Array(9).fill(null),xIsNext:!0}]),r=n.mve.valueOf(0);return i({type:"div",cls:"game-tic-tac-toe",children:[i({type:"div",cls:"game-board",children:[X({square:()=>t.get(r()).squares,click(e){const n=r()+1;for(;t.size()>n;)t.pop();const o=t.get(r()),i=o.squares.slice();P(i)||i[e]||(i[e]=o.xIsNext?"X":"O",t.push({squares:i,xIsNext:!o.xIsNext}),r(r()+1))}})]}),i({type:"div",cls:"game-info",children:[i({type:"div",text(){const e=t.get(r()),n=P(e.squares);return n?`Winner: ${n}`:"Next player: "+(e.xIsNext?"X":"O")}}),i({type:"ol",children:o(t,(function(e,t,n){return i({type:"li",children:[i({type:"button",text:()=>n()?`Go to move #${n()}`:"Go to game start",event:{click(){r(n())}}})]})}))})]})]})}()}))})}))([]),A=c("topArea"),H=i.root((function(e){return{type:"div",children:[i({type:"style",text:`\n\t\t\t\t.${A}{\n\t\t\t\t\tposition:fixed;\n\t\t\t\t\ttop:0;\n\t\t\t\t\tleft:0;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight:100%\n\t\t\t\t}\n\t\t\t\t`}),$.render(e)]}}));function Y(){const e=location.hash,t={},n=[];if(e){const[o,i]=e.split("?");o.slice(1).split("/").forEach((e=>{e&&n.push(e)})),i&&i.split("&").forEach((e=>{const[n,o]=e.split("="),i=t[n];i?i.push(o):t[n]=o}))}0==n.length&&n.push("index"),$.param({path:n,query:t})}window.addEventListener("hashchange",Y),Y(),document.body.appendChild(H.element),H.init&&H.init(),H.destroy&&window.addEventListener("unload",H.destroy),console.log("jjjj");
