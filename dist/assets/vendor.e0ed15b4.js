var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={},n={__esModule:!0,VirtualChild:void 0},r=function(){function t(t,e){this.param=t,this.parent=e,this.children=[]}return t.deepRun=function(e,n){if(e instanceof t)for(var r=0;r<e.children.length;r++)t.deepRun(e.children[r],n);else n(e)},t.prototype.pureRemove=function(e){var n=this.children.splice(e,1)[0],r=this.children[e-1],i=this.children[e];return r&&r instanceof t&&(r.after=i),n},t.prototype.remove=function(e){if(e>-1&&e<this.children.length){var n=this.pureRemove(e),r=this.param;t.deepRun(n,(function(t){r.remove(t)}))}else console.warn("删除"+e+"失败,总宽度仅为"+this.children.length)},t.prototype.move=function(e,n){if(e>-1&&e<this.children.length&&n>-1&&n<this.children.length){var r=this.pureRemove(e),i=this.pureInsert(n,r),o=this.nextEL(i);t.preformaceAdd(r,this.param,o,!0)}else console.warn("移动失败"+e+"->"+n+",总宽度仅为"+this.children.length)},t.prototype.pureInsert=function(e,n){this.children.splice(e,0,n);var r=this.children[e-1],i=this.children[e+1];return n instanceof t&&(n.parent=this,n.param=this.param,n.after=i),r&&r instanceof t&&(r.after=n),i},t.prototype.nextEL=function(e){return e?t.realNextEO(e):t.realParentNext(this)},t.prototype.insert=function(e,n){if(e>-1&&e<this.children.length+1){var r=this.pureInsert(e,n),i=this.nextEL(r);t.preformaceAdd(n,this.param,i)}else console.warn("插入"+e+"失败,总宽度仅为"+this.children.length)},t.preformaceAdd=function(e,n,r,i){r?t.deepRun(e,(function(t){n.insertBefore(t,r,i)})):t.deepRun(e,(function(t){n.append(t,i)}))},t.realNextEO=function(e){if(e instanceof t){var n=e.children[0];if(n)return t.realNextEO(n);var r=e.after;return r?t.realNextEO(r):t.realParentNext(e.parent)}return e},t.realParentNext=function(e){if(e){var n=e.after;return n?t.realNextEO(n):t.realParentNext(e.parent)}return null},t.newRootChild=function(e){return new t(e)},t.prototype.push=function(t){return this.insert(this.children.length,t)},t.prototype.newChildAt=function(e){var n=new t(this.param,this);return this.insert(e,n),n},t.prototype.newChildAtLast=function(){return this.newChildAt(this.children.length)},t}();n.VirtualChild=r;var i={};!function(e){var n,r=t&&t.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=t&&t.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};e.__esModule=!0,e.onceLife=e.BuildResultList=e.arrayMove=e.arrayForEach=e.isArray=e.orDestroy=e.orInit=e.orRun=e.mve=e.SimpleArray=void 0;var o,u=function(){function t(){this.id=t.uid++,this.subs={}}return t.prototype.depend=function(){t.target&&(this.subs[t.target.id]=t.target)},t.prototype.notify=function(){var t=this.subs;for(var e in this.subs={},t)t[e].update()},t.watcherCount=0,t.uid=0,t}(),s=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.array=t}return t.prototype.get=function(t){return this.array[t]},t.prototype.insert=function(t,e){this.array.splice(t,0,e)},t.prototype.push=function(t){this.array.push(t)},t.prototype.forEach=function(t){this.array.forEach(t)},t.prototype.indexOf=function(t){return this.array.indexOf(t)},t.prototype.splice=function(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return(n=this.array).splice.apply(n,i([t,e],r))},t.prototype.remove=function(t){return this.array.splice(t,1)[0]},t.prototype.set=function(t,e){var n=this.array[t];return this.array[t]=e,n},t.prototype.move=function(t,e){h(this,t,e)},t.prototype.clear=function(){this.array.length=0},t.prototype.size=function(){return this.array.length},t}();e.SimpleArray=s,function(t){t.delaySetAfter=function(t,e){var n=t;return n.after=e,n},t.valueOf=function(t){var e=new u;return function(){if(0==arguments.length)return e.depend(),t;if(u.target)throw"计算期间不允许修改";t=arguments[0],e.notify()}},t.valueOrCall=function(t){return"function"==typeof t?t:function(){return t}},t.reWriteMTValue=function(t,e){var n=t.after,r=function(){return e(t())};return r.after=n,r};var e=function(){function t(t,e,n){this.size=t,this.array=e,this.views=n}return t.prototype.addView=function(t){this.views.push(t);for(var e=0;e<this.array.size();e++)t.insert(e,this.array.get(e))},t.prototype.removeView=function(t){var e=this.views.indexOf(t);-1!=e&&this.views.remove(e)},t.prototype.get=function(t){return this.array.get(t)},t.prototype.getLast=function(){var t=this.size();return this.array.get(t-1)},t.prototype.findIndex=function(t,e){for(var n=this.size(),r=e||0;r<n;r++){if(t(this.get(r),r))return r}return-1},t.prototype.forEach=function(t){for(var e=this.size(),n=0;n<e;n++)t(this.get(n),n)},t.prototype.map=function(t){for(var e=[],n=this.size(),r=0;r<n;r++)e.push(t(this.get(r),r));return e},t.prototype.filter=function(t){for(var e=[],n=this.size(),r=0;r<n;r++){var i=this.get(r);t(i,r)&&e.push(i)}return e},t.prototype.findRow=function(t,e){for(var n=this.size(),r=e||0;r<n;r++){var i=this.get(r);if(t(i,r))return i}},t.prototype.indexOf=function(t,e){return this.findIndex((function(e){return e==t}),e)},t.prototype.count=function(t){for(var e=this.size(),n=0,r=0;r<e;r++){t(this.get(r),r)&&n++}return n},t.prototype.exist=function(t){for(var e=this.size(),n=0;n<e;n++){if(t(this.get(n),n))return!0}return!1},t.prototype.all=function(t){for(var e=this.size(),n=0;n<e;n++){if(!t(this.get(n),n))return!1}return!0},t.prototype.join=function(t){return this.map((function(t){return t})).join(t)},t}();t.CacheArrayModel=e;var n=function(e){function n(n){void 0===n&&(n=[]);for(var r=this,i=new s,o=0,u=n;o<u.length;o++){var a=u[o];i.push(a)}var f=t.valueOf(0),c=new s;return(r=e.call(this,f,i,c)||this).size_value=f,r.array_value=i,r.views_value=c,r.reload_size(),r}return r(n,e),n.prototype.reload_size=function(){this.size_value(this.array_value.size())},n.prototype.insert=function(t,e){this.array_value.insert(t,e),this.views_value.forEach((function(n){n.insert(t,e)})),this.reload_size()},n.prototype.remove=function(t){var e=this.get(t);return this.array_value.remove(t),this.views_value.forEach((function(e){e.remove(t)})),this.reload_size(),e},n.prototype.set=function(t,e){var n=this.array_value.splice(t,1,e)[0];return this.views_value.forEach((function(n){n.set(t,e)})),this.reload_size(),n},n.prototype.removeWhere=function(t){for(var e=this.size()-1;e>-1;){t(this.get(e),e)&&this.remove(e),e--}},n.prototype.removeEqual=function(t){this.removeWhere((function(e){return e==t}))},n.prototype.move=function(t,e){h(this.array_value,t,e),this.views_value.forEach((function(n){n.move(t,e)})),this.reload_size()},n.prototype.moveToFirst=function(t){this.move(t,0)},n.prototype.moveToLast=function(t){this.move(t,this.size_value()-1)},n.prototype.shift=function(){return this.remove(0)},n.prototype.unshift=function(t){return this.insert(0,t)},n.prototype.pop=function(){return this.remove(this.size_value()-1)},n.prototype.push=function(t){return this.insert(this.size_value(),t)},n.prototype.clear=function(){for(;this.size_value()>0;)this.pop()},n.prototype.reset=function(t){void 0===t&&(t=[]),this.clear();for(var e=0,n=t;e<n.length;e++){var r=n[e];this.push(r)}},n}(e);t.ArrayModel=n,t.arrayModelOf=function(t){return new n(t)};var i=function(){function t(){this.id=t.uid++,this.enable=!0,u.watcherCount++}return t.prototype.update=function(){this.enable&&this.realUpdate()},t.prototype.disable=function(){this.enable=!1,u.watcherCount--},t.uid=0,t}();t.Watcher=i,t.Watch=function(t){return new a(t)},t.WatchExp=function(t,e,n){return new f(t,e,n)},t.WatchBefore=function(t,e){return new c(t,e)},t.WatchAfter=function(t,e){return new l(t,e)};var o=function(){function e(){this.destroyList=[],this.pool=[]}return e.prototype.Watch=function(e){this.pool.push(t.Watch(e))},e.prototype.WatchExp=function(e,n,r){this.pool.push(t.WatchExp(e,n,r))},e.prototype.WatchBefore=function(e,n){this.pool.push(t.WatchBefore(e,n))},e.prototype.WatchAfter=function(e,n){this.pool.push(t.WatchAfter(e,n))},e.prototype.Cache=function(t){var e,n=new u;return this.Watch((function(){e=t(),n.notify()})),function(){return n.depend(),e}},e.prototype.destroy=function(){for(;this.pool.length>0;)this.pool.pop().disable();for(var t=0,e=this.destroyList;t<e.length;t++){(0,e[t])()}},e}();t.newLifeModel=function(){var t=new o;return{me:t,destroy:function(){t.destroy()}}}}(o=e.mve||(e.mve={}));var a=function(t){function e(e){var n=t.call(this)||this;return n.exp=e,n.update(),n}return r(e,t),e.prototype.realUpdate=function(){u.target=this,this.exp(),u.target=null},e}(o.Watcher),f=function(t){function e(e,n,r){var i=t.call(this)||this;return i.before=e,i.exp=n,i.after=r,i.update(),i}return r(e,t),e.prototype.realUpdate=function(){var t=this.before();u.target=this;var e=this.exp(t);u.target=null,this.after(e)},e}(o.Watcher),c=function(t){function e(e,n){var r=t.call(this)||this;return r.before=e,r.exp=n,r.update(),r}return r(e,t),e.prototype.realUpdate=function(){var t=this.before();u.target=this,this.exp(t),u.target=null},e}(o.Watcher),l=function(t){function e(e,n){var r=t.call(this)||this;return r.exp=e,r.after=n,r.update(),r}return r(e,t),e.prototype.realUpdate=function(){u.target=this;var t=this.exp();u.target=null,this.after(t)},e}(o.Watcher);function h(t,e,n){var r=t.remove(e);t.insert(n,r)}e.orRun=function(t){t&&t()},e.orInit=function(t){t.init&&t.init()},e.orDestroy=function(t){t.destroy&&t.destroy()},e.isArray=function(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)},e.arrayForEach=function(t,e){for(var n=0;n<t.size();n++)e(t.get(n),n)},e.arrayMove=h;var p=function(){function t(){this.inits=[],this.destroys=[]}return t.init=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=new t,i=0;i<e.length;i++)r.push(e[i]);return r},t.prototype.orPush=function(t){t&&this.push(t)},t.prototype.push=function(t){t.init&&this.inits.push(t.init),t.destroy&&this.destroys.push(t.destroy)},t.prototype.getInit=function(){var t=this.inits,e=t.length;return e>1?function(){for(var n=0;n<e;n++)t[n]()}:1==e?t[0]:void 0},t.prototype.getDestroy=function(){var t=this.destroys,e=t.length;return e>1?function(){for(var n=e-1;n>-1;n--)t[n]()}:1==e?t[0]:void 0},t.prototype.getAsOne=function(t){return{element:t,init:this.getInit(),destroy:this.getDestroy()}},t}();e.BuildResultList=p,e.onceLife=function(t,e){var n=!e,r={isInit:!1,isDestroy:!1,out:t},i=t.init,o=t.destroy;return i&&(t.init=function(){r.isInit?n&&console.warn("禁止重复init"):(r.isInit=!0,i())},o||(t.destroy=function(){r.isDestroy?n&&console.warn("禁止重复destroy"):(r.isDestroy=!0,r.isInit||console.warn("未初始化故不销毁"))})),o&&(i||(t.init=function(){r.isInit?n&&console.warn("禁止重复init"):r.isInit=!0}),t.destroy=function(){r.isDestroy?n&&console.warn("禁止重复destroy"):(r.isDestroy=!0,r.isInit?o():console.warn("未初始化故不销毁"))}),r}}(i),e.__esModule=!0,e.childrenBuilder=e.baseChildrenBuilder=e.isEOChildFunType=e.ChildLife=void 0;var o=n,u=i,s=function(){function t(t){this.result=t}return t.of=function(e){return new t(e)},t}();function a(t){return"function"==typeof t}function f(t,e,n,r){if(u.isArray(e))for(var i=0;i<e.length;)f(t,e[i],n,r),i++;else a(e)?t.push(e(n.newChildAtLast(),r)):e instanceof s?t.push(e.result):n.push(e)}function c(t,e,n){var r=u.BuildResultList.init();return f(r,e,n,t),u.onceLife(r.getAsOne()).out}e.ChildLife=s,e.isEOChildFunType=a,e.baseChildrenBuilder=c,e.childrenBuilder=function(t,e,n){return c(t,n,o.VirtualChild.newRootChild(e))};var l={};!function(t){t.__esModule=!0,t.buildElement=t.buildElementOrginal=t.parseUtil=t.objectForEach=void 0;var e=i;function n(t,e){for(var n in t)e(t[n],n)}function r(t){var n=function(e){return function(n,r){var i=t(r,e);return n.push(i.element),i}};return n.one=t,n.root=function(n){var r=e.mve.newLifeModel();return t(r.me,n(r.me),r)},n}t.objectForEach=n,t.parseUtil={bind:function(t,e,n){"function"==typeof e?"after"in e&&e.after?t.WatchAfter(e,(function(t){e.after(t,n)})):t.WatchAfter(e,n):n(e)},bindKV:function(e,r,i){n(r,(function(n,r){t.parseUtil.bind(e,n,(function(t){i(r,t)}))}))}},t.buildElementOrginal=r,t.buildElement=function(t){return r((function(n,r,i){var o=e.BuildResultList.init(),u=t(n,r,o);return i&&o.push(i),e.onceLife(o.getAsOne(u)).out}))}}(l);var h={};function p(t,e){if(0!=t.scrollTop||0!=t.scrollLeft){var n={el:t,top:t.scrollTop,left:t.scrollLeft};e.push(n)}for(var r=0;r<t.children.length;r++)p(t.children[r],e)}function d(t){var e=[];return p(t,e),e}function v(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];r.el.scrollTop=r.top,r.el.scrollLeft=r.left}}function y(t,e){return t!=e||"string"!=typeof e&&t!=e+""}function m(t,e,n){return n?function(r){return(r.keyCode==t||r.key==e)&&r.code==n}:function(n){return n.keyCode==t||n.key==e}}h.__esModule=!0,h.html=h.value=h.content=h.text=h.event=h.prop=h.style=h.attr=h.empty=h.removeChild=h.insertChildBefore=h.insertChildAfter=h.prefixChild=h.replaceWith=h.appendChild=h.createTextNode=h.createElementNS=h.createElement=h.keyCode=h.revertAfterMove=h.saveBeforeMove=void 0,h.saveBeforeMove=d,h.revertAfterMove=v;var g=h.keyCode={BACKSPACE:m(8,"Backspace"),ENTER:m(13,"Enter"),TAB:m(9,"Tab"),ESCAPE:m(27,"Escape"),CAPSLOCK:m(20,"CapsLock"),ARROWLEFT:m(37,"ArrowLeft"),ARROWUP:m(38,"ArrowUp"),ARROWRIGHT:m(39,"ArrowRight"),ARROWDOWN:m(40,"ArrowDown"),CONTROL:m(17,"Control"),SHIFT:m(16,"Shift"),SHIFTLEFT:m(16,"Shift","ShiftLeft"),SHIFTRIGHT:m(16,"Shift","ShiftRight"),META:m(91,"Meta"),METALEFT:m(91,"Meta","MetaLeft"),METARIGHT:m(91,"Meta","MetaRight"),ALT:m(18,"Alt"),ALTLEFT:m(18,"Alt","AltLeft"),ALTRIGHT:m(18,"Alt","AltRight"),A:m(65,"a"),Z:m(90,"z"),V:m(86,"v"),C:m(67,"c"),X:m(88,"x")};function w(t,e){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}function C(t,e,n){var r=n.nextSibling;r?t.insertBefore(e,r):t.appendChild(e)}h.createElement=function(t){return document.createElement(t)},h.createElementNS=function(t,e){return document.createElementNS(e,t)},h.createTextNode=function(t){return document.createTextNode(t)},h.appendChild=function(t,e,n){if(n){var r=d(e);t.appendChild(e),v(r)}else t.appendChild(e)},h.replaceWith=function(t,e){var n=t.parentNode;n&&n.replaceChild(e,t)},h.prefixChild=function(t,e,n){if(n){var r=d(e);w(t,e),v(r)}else w(t,e)},h.insertChildAfter=function(t,e,n,r){if(r){var i=d(n),o=d(e);C(t,e,n),v(i),v(o)}else C(t,e,n)},h.insertChildBefore=function(t,e,n,r){if(r){var i=d(n),o=d(e);t.insertBefore(e,n),v(i),v(o)}else t.insertBefore(e,n)},h.removeChild=function(t,e){t.removeChild(e)},h.empty=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},h.attr=function(t,e,n){y(t.getAttribute(e),n)&&(null==n?t.removeAttribute(e):t.setAttribute(e,n))},h.style=function(t,e,n){try{y(t.style[e],n)&&(t.style[e]=n)}catch(r){console.warn(r)}},h.prop=function(t,e,n){y(t[e],n)&&(t[e]=n)},h.event=function(t,e,n){"function"==typeof n?t.addEventListener(e,n):n&&t.addEventListener(e,n.handler,n)},h.text=function(t,e){y(t.innerText,e)&&(t.innerText=e)},h.content=function(t,e){y(t.textContent,e)&&(t.textContent=e)},h.value=function(t,e){y(t.value,e)&&(t.value=e)},h.html=function(t,e){y(t.innerHTML,e)&&(t.innerHTML=e)};var A,b=t&&t.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),x=t&&t.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),E=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&b(e,t,n);return x(e,t),e},_=e,L=l,O=i,z=E(h),T=function(){function t(t){this.pel=t}return t.prototype.append=function(t,e){z.appendChild(this.pel,t,e)},t.prototype.remove=function(t){z.removeChild(this.pel,t)},t.prototype.insertBefore=function(t,e,n){z.insertChildBefore(this.pel,t,e,n)},t}(),R=function(){function t(t){this.pel=t}return t.prototype.remove=function(t){z.removeChild(this.pel,t)},t.prototype.append=function(t,e){z.prefixChild(this.pel,t,e)},t.prototype.insertBefore=function(t,e,n){z.insertChildAfter(this.pel,t,e,n)},t}();function I(t,e,n){if(n.event)for(var r in n.event){var i=n.event[r];if(O.isArray(i))for(var o=0,u=i;o<u.length;o++){var s=u[o];z.event(e,r,s)}else z.event(e,r,i)}n.style&&L.parseUtil.bindKV(t,n.style,(function(t,n){z.style(e,t,n)})),n.attr&&L.parseUtil.bindKV(t,n.attr,(function(t,n){z.attr(e,t,n)})),n.prop&&L.parseUtil.bindKV(t,n.prop,(function(t,n){z.prop(e,t,n)})),n.cls&&L.parseUtil.bind(t,n.cls,(function(t){z.attr(e,"class",t)})),n.id&&L.parseUtil.bind(t,n.id,(function(t){z.attr(e,"id",t)})),n.text&&L.parseUtil.bind(t,n.text,(function(t){z.content(e,t)}));var a={};if(n.init)if(O.isArray(n.init))for(var f=0,c=n.init;f<c.length;f++){(0,c[f])(e,t)}else{var l=n.init;a.init=function(){l(e,t)}}if(n.destroy)if(O.isArray(n.destroy)){var h=n.destroy;a.destroy=function(){for(var t=0,n=h;t<n.length;t++){(0,n[t])(e)}}}else{var p=n.destroy;a.destroy=function(){p(e)}}return a}function B(t,e,n){n.value&&L.parseUtil.bind(t,n.value,(function(t){z.value(e,t)}))}var M=L.buildElementOrginal((function(t,e,n){if("string"==typeof(e=e||"")){var r=z.createTextNode(e);return n?{element:r,init:n.init,destroy:n.destroy}:{element:r,init:null,destroy:null}}var i=z.createElement(e.type),o=O.BuildResultList.init(),u=I(t,i,e);if("children"in e){var s=e.children;if(s){var a=e.childrenReverse?new R(i):new T(i);o.push(_.childrenBuilder(t,a,s))}}return B(t,i,e),o.push(u),n&&o.push(n),O.onceLife(o.getAsOne(i)).out}));L.buildElement((function(t,e,n){var r=z.createElementNS(e.type,"http://www.w3.org/2000/svg"),i=I(t,r,e);if("children"in e){var o=e.children;if(o){var u=e.childrenReverse?new R(r):new T(r);n.push(_.childrenBuilder(t,u,o))}}return B(t,r,e),n.push(i),r}));var W=0;var S=function(t){return t+W++},N=0;A=function(t){return t+N++};var U=e,D=i;var V=function(){function t(t,e,n,r){this.index=t,this.value=e,this.life=n,this.result=r}return t.prototype.init=function(){D.orInit(this.result)},t.prototype.destroy=function(){this.life.destroy(),D.orDestroy(this.result)},t}();var j,F,P=(j=function(t){return t},F=function(){return null},function(t,e,n,r){var i=D.mve.valueOf(t),o=D.mve.newLifeModel(),u=r(o.me,e,i),s=n.newChildAt(t),a=U.baseChildrenBuilder(o.me,j(u),s);return new V(i,F(u),o,a)});var k=function(t,e){return function(t,e,n,r){return function(i,o){var u=D.onceLife({init:function(){for(var e=t.size(),n=0;n<e;n++)t.get(n).init()},destroy:function(){!function(t,e,n){for(var r=t.size()-1;r>-1;r--)t.get(r).destroy();e.removeView(n),t.clear()}(t,e,s)}}),s={insert:function(e,o){var s=r(e,o,i,n);t.insert(e,s),function(t,e){for(var n=e+1;n<t.size();n++)t.get(n).index(n)}(t,e),u.isInit&&s.init()},remove:function(e){var n=t.get(e);t.remove(e),n&&(u.isInit&&n.destroy(),function(t,e){for(var n=e;n<t.size();n++)t.get(n).index(n)}(t,e),i.remove(e))},set:function(e,o){var s=r(e,o,i,n),a=t.set(e,s);u.isInit&&(s.init(),a.destroy()),i.remove(e+1)},move:function(e,n){t.move(e,n),i.move(e,n),function(t,e,n){for(var r=e<n?[e,n]:[n,e],i=r[0];i<=r[1];i++)t.get(i).index(i)}(t,e,n)}};return e.addView(s),u.out}}(new D.SimpleArray,t,e,P)};var H=function(t,e){return function(t,e,n,r){return function(i,o){var u=D.onceLife({init:function(){for(var e=t.size()-1;e>-1;e--)t.get(e).init()},destroy:function(){!function(t,e,n){for(var r=t.size(),i=0;i<r;i++)t.get(i).destroy();e.removeView(n),t.clear()}(t,e,s)}}),s={insert:function(e,o){e=t.size()-e;var s=r(e,o,i,n);t.insert(e,s),function(t,e){for(var n=t.size()-1,r=e;r>-1;r--)t.get(r).index(n-r)}(t,e),u.isInit&&s.init()},remove:function(e){e=t.size()-1-e;var n=t.get(e);t.remove(e),n&&(u.isInit&&n.destroy(),function(t,e){for(var n=t.size()-1,r=e-1;r>-1;r--)t.get(r).index(n-r)}(t,e),i.remove(e))},set:function(e,o){var s=t.size()-1,a=r(e=s-e,o,i,n),f=t.set(e,a);u.isInit&&(a.init(),f.destroy()),a.index(s-e),i.remove(e+1)},move:function(e,n){var r=t.size()-1;e=r-e,n=r-n,t.move(e,n),i.move(e,n),function(t,e,n){for(var r=e<n?[e,n]:[n,e],i=t.size()-1,o=r[0];o<=r[1];o++)t.get(o).index(i-o)}(t,e,n)}};return e.addView(s),u.out}}(new D.SimpleArray,t,e,P)},K={__esModule:!0,ifChildren:void 0},G=e,q=i;K.ifChildren=function(t){return function(e,n){var r,i,o,u=q.onceLife({init:function(){r&&q.orInit(r)},destroy:function(){s.disable(),r&&q.orDestroy(r),o.destroy()}}),s=q.mve.WatchExp((function(){o&&o.destroy(),o=q.mve.newLifeModel()}),(function(){return t(o.me)}),(function(t){r&&(u.isInit&&q.orDestroy(r),r=null),i&&(e.remove(0),i=null),t&&(i=e.newChildAtLast(),r=G.baseChildrenBuilder(o.me,t,i),u.isInit&&q.orInit(r))}));return u.out}};var X,Z=K,J=i;X=function(t,e){return Z.ifChildren((function(n){var r=[];return t().forEach((function(t,i){var o=e(n,t,i);J.isArray(o)?o.forEach((function(t){return r.push(t)})):r.push(o)})),r}))};var Q,Y=e,$=i,tt=function(){function t(t,e,n){this.row=t,this.life=e,this.result=n}return t.prototype.init=function(){$.orInit(this.result)},t.prototype.destroy=function(){this.life.destroy(),$.orDestroy(this.result)},t}();Q=function(t,e){return function(n,r){var i=[],o=$.onceLife({init:function(){for(var t=i.length,e=0;e<t;e++)i[e].init()},destroy:function(){for(var t=i.length-1;t>-1;t--)i[t].destroy();i.length=0,u.disable()}}),u=$.mve.WatchAfter(t,(function(t){if(t.length<i.length){for(var r=0;r<t.length;r++)i[r].row(t[r]);var u=t.length-1;for(r=i.length-1;r>u;r--)o.isInit&&i[r].destroy(),n.remove(r);i.length=t.length}else{for(r=0;r<i.length;r++)i[r].row(t[r]);for(r=i.length;r<t.length;r++){var s=$.mve.valueOf(t[r]),a=$.mve.newLifeModel(),f=e(a.me,s,r),c=n.newChildAt(r),l=Y.baseChildrenBuilder(a.me,f,c),h=new tt(s,a,l);i.push(h),o.isInit&&h.init()}}}));return o.out}};export{H as a,Q as b,A as c,M as d,X as f,S as i,g as k,k as m,i as u};
